<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama API Server - Chat with Memory Features</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            background: #f0f2f5;
            margin: 0;
            padding: 0;
            font-size: 16px;
            line-height: 1.6;
        }

        .container {
            display: flex;
            height: 100vh;
            background: white;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
            font-weight: bold;
            color: #ecf0f1;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
            color: #bdc3c7;
        }

        .main-content {
            display: flex;
            margin-top: 100px;
            height: calc(100vh - 100px);
        }

        .sidebar {
            width: 400px;
            background: #ecf0f1;
            border-right: 3px solid #3498db;
            overflow-y: auto;
            padding: 25px;
            position: fixed;
            left: 0;
            top: 100px;
            height: calc(100vh - 100px);
        }

        .chat-area {
            margin-left: 400px;
            flex: 1;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 100px);
        }

        .config-section {
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 6px solid #3498db;
        }

        .config-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-section h3::before {
            content: "‚öôÔ∏è";
            font-size: 1.4em;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: bold;
            font-size: 1.1em;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            background: white;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
        }

        .help-text {
            margin-top: 6px;
            color: #7f8c8d;
            font-size: 14px;
            line-height: 1.4;
            font-style: italic;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 16px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
            text-align: center;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-success {
            background: #27ae60;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn-warning {
            background: #f39c12;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        .btn-primary {
            background: #3498db;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .feedback-display {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .feedback-display h5 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .feedback-display p {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .feedback-display ul {
            margin-left: 20px;
            margin-bottom: 10px;
        }

        .feedback-display li {
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .memory-stats {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 6px solid #27ae60;
        }

        .memory-stats h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .memory-stats h4::before {
            content: "üìä";
            font-size: 1.4em;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
            padding: 8px 0;
            border-bottom: 2px solid #ecf0f1;
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-value {
            font-weight: bold;
            color: #27ae60;
            font-size: 1.1em;
        }

        .chat-messages {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: #f8f9fa;
            scroll-behavior: smooth;
        }

        .chat-messages::-webkit-scrollbar {
            width: 12px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #ecf0f1;
            border-radius: 6px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #bdc3c7;
            border-radius: 6px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #95a5a6;
        }

        .message {
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 15px;
            max-width: 80%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            animation: messageSlideIn 0.3s ease-out;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: #3498db;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 8px;
        }

        .message.assistant {
            background: white;
            border: 2px solid #ecf0f1;
            color: #2c3e50;
            border-bottom-left-radius: 8px;
        }

        .message.system {
            background: #e8f4fd;
            border: 2px solid #3498db;
            color: #2c3e50;
            font-style: italic;
            font-size: 1em;
            max-width: 90%;
            margin: 0 auto 20px auto;
            text-align: center;
        }

        .message-header {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .chat-input {
            padding: 25px;
            background: white;
            border-top: 3px solid #ecf0f1;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
        }

        .input-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .training-controls {
            margin-bottom: 18px;
            background: rgba(255, 255, 255, 0.15);
            padding: 18px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .training-select {
            width: 100%;
            margin-bottom: 12px;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 8px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.95);
            color: #2c3e50;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .training-select:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.9);
            background: white;
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.3);
        }

        .training-section {
            background: #3498db;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            color: white;
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
            position: relative;
            overflow: hidden;
        }

        .training-section::before {
            content: "üß†";
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            opacity: 0.3;
        }

        .training-question {
            background: white;
            color: #2c3e50;
            padding: 22px;
            border-radius: 12px;
            margin-bottom: 18px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 6px solid #3498db;
            font-size: 16px;
        }

        .training-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 15px;
        }

        .training-option {
            padding: 16px 20px;
            border: 3px solid #bdc3c7;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            font-weight: bold;
            font-size: 16px;
            position: relative;
            overflow: hidden;
        }

        .training-option:hover {
            border-color: #3498db;
            background-color: #e8f4fd;
            transform: translateX(8px);
        }

        .training-option.selected {
            border-color: #3498db;
            background: #3498db;
            color: white;
            transform: translateX(8px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .training-feedback {
            padding: 16px 20px;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .training-feedback.correct {
            background: #d4edda;
            color: #155724;
            border-left: 6px solid #27ae60;
        }

        .training-feedback.correct::before {
            content: "‚úÖ";
            font-size: 1.3em;
        }

        .training-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border-left: 6px solid #e74c3c;
        }

        .training-feedback.incorrect::before {
            content: "‚ùå";
            font-size: 1.3em;
        }

        .input-group input {
            flex: 1;
            padding: 16px 20px;
            border: 3px solid #bdc3c7;
            border-radius: 12px;
            font-size: 18px;
            transition: all 0.3s ease;
            background: #f8f9fa;
            min-height: 60px;
        }

        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            background: white;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.2);
        }

        .input-group button {
            padding: 16px 24px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 100px;
            min-height: 60px;
        }

        .input-group button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .input-group button:active {
            transform: translateY(0);
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ / Responsive Design */
        @media (max-width: 1024px) {
            .sidebar {
                width: 350px;
            }
            
            .chat-area {
                margin-left: 350px;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
                margin-top: 80px;
            }

            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
                max-height: 400px;
                overflow-y: auto;
            }

            .chat-area {
                margin-left: 0;
                height: calc(100vh - 480px);
            }

            .header {
                padding: 15px 20px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .header p {
                font-size: 1em;
            }

            .config-section {
                padding: 18px;
                margin-bottom: 20px;
            }

            .btn {
                padding: 14px 18px;
                font-size: 15px;
                min-height: 45px;
            }

            .message {
                max-width: 90%;
                padding: 18px;
                font-size: 15px;
            }

            .input-group {
                gap: 12px;
            }

            .input-group input {
                padding: 14px 16px;
                font-size: 16px;
                min-height: 50px;
            }

            .input-group button {
                padding: 14px 20px;
                font-size: 16px;
                min-width: 80px;
                min-height: 50px;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                margin-top: 70px;
            }

            .sidebar {
                max-height: 350px;
                padding: 20px;
            }

            .chat-area {
                height: calc(100vh - 420px);
            }

            .header h1 {
                font-size: 1.5em;
            }

            .header p {
                font-size: 0.9em;
            }

            .config-section h3 {
                font-size: 1.2em;
            }

            .form-group label {
                font-size: 1em;
            }

            .form-group input, .form-group select {
                padding: 12px 14px;
                font-size: 15px;
            }

            .btn {
                padding: 12px 16px;
                font-size: 14px;
                margin-bottom: 10px;
                min-height: 40px;
            }

            .message {
                max-width: 95%;
                padding: 15px;
                font-size: 14px;
            }

            .input-group input {
                padding: 12px 14px;
                font-size: 15px;
                min-height: 45px;
            }

            .input-group button {
                padding: 12px 16px;
                font-size: 15px;
                min-width: 70px;
                min-height: 45px;
            }
        }

        .status {
            padding: 16px 20px;
            margin-bottom: 20px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            animation: statusSlideIn 0.3s ease-out;
        }

        @keyframes statusSlideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border-left: 6px solid #27ae60;
        }

        .status.success::before {
            content: "‚úÖ";
            font-size: 1.2em;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border-left: 6px solid #e74c3c;
        }

        .status.error::before {
            content: "‚ùå";
            font-size: 1.2em;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 6px solid #3498db;
        }

        .status.info::before {
            content: "‚ÑπÔ∏è";
            font-size: 1.2em;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #6c757d;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background-color: #e9ecef;
            border-radius: 2px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
            animation: progress-animation 2s ease-in-out infinite;
        }

        .retry-button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 14px;
        }

        .retry-button:hover {
            background: #c82333;
        }

        @keyframes progress-animation {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        .memory-item {
            background: white;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #667eea;
            font-size: 14px;
        }

        .memory-item .timestamp {
            font-size: 0.8em;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .memory-item .content {
            color: #495057;
        }

        .emotion-breakdown {
            margin-top: 10px;
        }

        .emotion-item {
            background: #f8f9fa;
            padding: 5px 10px;
            margin: 2px 0;
            border-radius: 3px;
            font-size: 12px;
            display: inline-block;
            margin-right: 5px;
        }

        .timeline-event {
            background: #f8f9fa;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .event-date {
            font-weight: bold;
            color: #667eea;
            font-size: 14px;
        }

        .event-type {
            color: #6c757d;
            font-size: 12px;
            text-transform: uppercase;
        }

        .event-description {
            margin: 5px 0;
            color: #495057;
        }

        .event-emotion {
            color: #28a745;
            font-size: 12px;
        }

        .pattern-item {
            background: #f8f9fa;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }

        .pattern-topics {
            font-weight: bold;
            color: #495057;
        }

        .pattern-emotion {
            color: #6c757d;
            font-size: 12px;
        }

        .pattern-frequency {
            color: #28a745;
            font-size: 12px;
        }

        .pattern-date {
            color: #6c757d;
            font-size: 11px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: 2;
            }
            
            .chat-area {
                order: 1;
            }
        }

        /* Brain Research Computing Styles */
        .capabilities-display {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .capability-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .capability-item:last-child {
            border-bottom: none;
        }

        .capability-label {
            font-weight: 600;
            color: #495057;
        }

        .capability-value {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .capability-value.detecting {
            background: #fff3cd;
            color: #856404;
        }

        .capability-value.supported {
            background: #d4edda;
            color: #155724;
        }

        .capability-value.not-supported {
            background: #f8d7da;
            color: #721c24;
        }

        .jobs-list {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .job-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .job-item:hover {
            border-color: #3498db;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.2);
        }

        .job-item.selected {
            border-color: #3498db;
            background: #ebf3fd;
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .job-title {
            font-weight: 600;
            color: #2c3e50;
        }

        .job-complexity {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .job-complexity.easy {
            background: #d4edda;
            color: #155724;
        }

        .job-complexity.medium {
            background: #fff3cd;
            color: #856404;
        }

        .job-complexity.hard {
            background: #f8d7da;
            color: #721c24;
        }

        .job-description {
            color: #6c757d;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .job-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8em;
            color: #6c757d;
        }

        .current-job-info {
            background: #e8f5e8;
            border: 1px solid #28a745;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .progress-container {
            margin: 15px 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: #495057;
        }

        .contribution-stats, .research-stats {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #6c757d;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .leaderboard-item:last-child {
            border-bottom: none;
        }

        .rank {
            font-weight: bold;
            color: #3498db;
            min-width: 30px;
        }

        .rank.gold { color: #ffd700; }
        .rank.silver { color: #c0c0c0; }
        .rank.bronze { color: #cd7f32; }

        .user-info {
            flex: 1;
            margin-left: 15px;
        }

        .username {
            font-weight: 600;
            color: #2c3e50;
        }

        .points {
            font-size: 0.9em;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="mainTitle">üß† Kairos Cognitive Enhancement Platform</h1>
            <p id="subtitle">Advanced AI-Powered Memory & Cognitive Training System</p>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="config-section">
                    <h3 id="settingsTitle">‚öôÔ∏è System Configuration</h3>
                    <div class="form-group">
                        <label for="languageSelect" id="labelLanguage">Ïñ∏Ïñ¥ / Language / Langue / Ë®ÄË™û / ËØ≠Ë®Ä</label>
                        <select id="languageSelect">
                            <option value="en">English</option>
                            <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                            <option value="fr">Fran√ßais</option>
                            <option value="ja">Êó•Êú¨Ë™û</option>
                            <option value="zh">‰∏≠Êñá</option>
                        </select>
                        <div class="help-text" id="languageHelp"></div>
                    </div>
                    <div class="form-group">
                        <label for="apiUrl" id="labelApiUrl">API URL:</label>
                        <input type="text" id="apiUrl" value="http://localhost:3000" placeholder="Enter API URL">
                        <div class="help-text" id="apiUrlHelp"></div>
                    </div>
                    <div class="form-group">
                        <label for="apiKey" id="labelApiKey">API Key:</label>
                        <input type="text" id="apiKey" value="your-secret-key-here" placeholder="Enter API key">
                        <div class="help-text" id="apiKeyHelp"></div>
                    </div>
                    <div class="form-group">
                        <label for="userId" id="labelUserId">User ID:</label>
                        <input type="text" id="userId" value="user_001" placeholder="Enter user ID">
                        <div class="help-text" id="userIdHelp"></div>
                    </div>
                    <div class="form-group">
                        <label for="timeout" id="labelTimeout">Timeout (seconds):</label>
                        <input type="number" id="timeout" value="90" min="30" max="300" placeholder="90">
                        <div class="help-text" id="timeoutHelp"></div>
                    </div>
                    <div class="form-group">
                        <label for="model" id="labelModel">Model:</label>
                        <select id="model">
                            <option value="">Select a model...</option>
                        </select>
                        <button class="btn btn-secondary" id="refreshModelsBtn" style="margin-top: 5px; width: 100%;">üîÑ Refresh Model List</button>
                        <div class="help-text" id="modelHelp"></div>
                    </div>
                    <button class="btn" id="testConnectionBtn">üîó Test Connection</button>
                    <div class="help-text" id="testConnectionHelp"></div>
                </div>

                <div class="config-section">
                    <h3 id="memoryManageTitle">üß† Memory Management</h3>
                    <button class="btn" id="loadMemoryStatsBtn">üìä Memory Statistics</button>
                    <div class="help-text" id="statsHelp"></div>
                    <button class="btn" id="loadUserMemoryBtn">üìñ View Memory</button>
                    <div class="help-text" id="memoryHelp"></div>
                    <button class="btn btn-secondary" id="addFactBtn">‚ûï Add Fact</button>
                    <div class="help-text" id="addFactHelp"></div>
                    <button class="btn btn-secondary" id="addPreferenceBtn">‚ûï Add Preference</button>
                    <div class="help-text" id="addPrefHelp"></div>
                    <button class="btn btn-danger" id="deleteMemoryBtn">üóëÔ∏è Delete Memory</button>
                    <div class="help-text" id="deleteMemHelp"></div>
                </div>

                <div class="config-section">
                    <h3 id="advancedMemoryTitle">üß† Advanced Memory & Contextualization</h3>
                    <button class="btn" id="loadEmotionalStatsBtn">üòä Emotional Analysis</button>
                    <div class="help-text" id="emotionalHelp"></div>
                    <button class="btn" id="loadTimelineBtn">üìÖ Life Timeline</button>
                    <div class="help-text" id="timelineHelp"></div>
                    <button class="btn" id="loadPatternsBtn">üîç Context Patterns</button>
                    <div class="help-text" id="patternsHelp"></div>
                    <button class="btn btn-secondary" id="addRelationshipBtn">üë• Add Relationship</button>
                    <div class="help-text" id="relationshipHelp"></div>
                    <button class="btn btn-secondary" id="addGoalBtn">üéØ Add Goal</button>
                    <div class="help-text" id="goalHelp"></div>
                    <button class="btn btn-secondary" id="addInterestBtn">‚≠ê Add Interest</button>
                    <div class="help-text" id="interestHelp"></div>
                    <button class="btn btn-secondary" id="addLongTermMemoryBtn">üíæ Add Long-term Memory</button>
                    <div class="help-text" id="longTermHelp"></div>
                </div>

                <div class="config-section">
                    <h3 id="cognitiveTrainingTitle">üß† Cognitive Enhancement Training</h3>
                    <div class="training-controls">
                        <select id="trainingType" class="training-select">
                            <option value="memoryRecall">Memory Recall Training</option>
                            <option value="patternRecognition">Pattern Recognition</option>
                            <option value="cognitiveStimulation">Cognitive Stimulation</option>
                            <option value="attentionTraining">Attention Training</option>
                        </select>
                        <select id="trainingDifficulty" class="training-select">
                            <option value="easy">Easy</option>
                            <option value="medium" selected>Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                        <button class="btn btn-primary" id="startTrainingBtn">üéØ Start Training</button>
                    </div>
                    <button class="btn" id="loadTrainingStatsBtn">üìà Training Statistics</button>
                    <div class="help-text" id="trainingStatsHelp"></div>
                    <button class="btn" id="loadTrainingRecordsBtn">üìã Training Records</button>
                    <div class="help-text" id="trainingRecordsHelp"></div>
                    <button class="btn" id="loadTrainingTemplatesBtn">üìö Training Guide</button>
                    <div class="help-text" id="trainingTemplatesHelp"></div>
                </div>

                <div class="memory-stats" id="memoryStats" style="display: none;">
                    <h4>üìä Memory Statistics</h4>
                    <div id="statsContent"></div>
                </div>

                <!-- Î©ÄÌã∞Î™®Îã¨ ÌÜµÌï© ÏÑπÏÖò -->
                <div class="section" id="multimodalSection">
                    <h3 id="multimodalTitle">üîä Multimodal Integration</h3>
                    
                    <!-- ÏùåÏÑ± Ï≤òÎ¶¨ -->
                    <div class="subsection" id="voiceSection" style="display: none;">
                        <h4 id="voiceTitle">üé§ Voice Processing</h4>
                        <div class="form-group">
                            <label for="voiceInput" id="voiceInputLabel">Voice Input:</label>
                            <input type="file" id="voiceInput" accept="audio/*" />
                        </div>
                        <div class="button-group">
                            <button id="processVoiceBtn" class="btn btn-primary">Process Voice</button>
                            <button id="synthesizeVoiceBtn" class="btn btn-secondary">Synthesize Voice</button>
                        </div>
                    </div>

                    <!-- ÏòÅÏÉÅ Ï≤òÎ¶¨ -->
                    <div class="subsection" id="videoSection" style="display: none;">
                        <h4 id="videoTitle">üìπ Video Processing</h4>
                        <div class="form-group">
                            <label for="videoInput" id="videoInputLabel">Video Input:</label>
                            <input type="file" id="videoInput" accept="video/*" />
                        </div>
                        <div class="button-group">
                            <button id="processVideoBtn" class="btn btn-primary">Process Video</button>
                            <button id="extractFramesBtn" class="btn btn-secondary">Extract Frames</button>
                        </div>
                    </div>

                    <!-- ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞ -->
                    <div class="subsection" id="sensorSection">
                        <h4 id="sensorTitle">üì° Sensor Data</h4>
                        <div class="form-group">
                            <label for="sensorType" id="sensorTypeLabel">Sensor Type:</label>
                            <select id="sensorType">
                                <option value="temperature">Temperature</option>
                                <option value="humidity">Humidity</option>
                                <option value="light">Light</option>
                                <option value="motion">Motion</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="processSensorBtn" class="btn btn-primary">Process Sensor Data</button>
                            <button id="loadSensorHistoryBtn" class="btn btn-secondary">Sensor History</button>
                        </div>
                    </div>

                    <!-- Ïõ®Ïñ¥Îü¨Î∏î Í∏∞Í∏∞ -->
                    <div class="subsection" id="wearableSection">
                        <h4 id="wearableTitle">‚åö Wearable Devices</h4>
                        <div class="form-group">
                            <label for="deviceType" id="deviceTypeLabel">Device Type:</label>
                            <select id="deviceType">
                                <option value="smartwatch">Smartwatch</option>
                                <option value="fitness_tracker">Fitness Tracker</option>
                                <option value="health_monitor">Health Monitor</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="connectWearableBtn" class="btn btn-primary">Connect Device</button>
                            <button id="getWearableDataBtn" class="btn btn-secondary">Get Data</button>
                        </div>
                    </div>

                    <!-- Í±¥Í∞ï Î™®ÎãàÌÑ∞ÎßÅ -->
                    <div class="subsection" id="healthSection">
                        <h4 id="healthTitle">‚ù§Ô∏è Health Monitoring</h4>
                        <div class="form-group">
                            <label for="reportType" id="reportTypeLabel">Report Type:</label>
                            <select id="reportType">
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="processHealthBtn" class="btn btn-primary">Process Health Data</button>
                            <button id="generateHealthReportBtn" class="btn btn-secondary">Generate Report</button>
                        </div>
                    </div>

                    <!-- Î©ÄÌã∞Î™®Îã¨ Ïª®ÌÖçÏä§Ìä∏ -->
                    <div class="subsection" id="contextSection">
                        <h4 id="contextTitle">üîó Multimodal Context</h4>
                        <div class="button-group">
                            <button id="generateContextBtn" class="btn btn-primary">Generate Context</button>
                            <button id="checkMultimodalStatusBtn" class="btn btn-secondary">Check Status</button>
                        </div>
                    </div>
                </div>

                <!-- Î¨∏Ìôî Î∞è Ïñ∏Ïñ¥ ÏµúÏ†ÅÌôî ÏÑπÏÖò -->
                <div class="config-section" id="culturalSection">
                    <h3 id="culturalTitle">üåç Cultural & Language Optimization</h3>
                    
                    <!-- Ïñ∏Ïñ¥ Î∞è Í≤©Ïãù ÏàòÏ§Ä ÏÑ§Ï†ï -->
                    <div class="subsection">
                        <h4>Language & Formality Settings</h4>
                        <div class="form-group">
                            <label for="culturalLanguage">Language:</label>
                            <select id="culturalLanguage" class="form-control">
                                <option value="en">English</option>
                                <option value="fr">Fran√ßais</option>
                                <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                                <option value="ja">Êó•Êú¨Ë™û</option>
                                <option value="zh">‰∏≠Êñá</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="culturalFormality">Formality Level:</label>
                            <select id="culturalFormality" class="form-control">
                                <option value="casual">Casual</option>
                                <option value="polite">Polite</option>
                                <option value="formal">Formal</option>
                                <option value="respectful">Respectful</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="userAge">User Age (for respectful addressing):</label>
                            <input type="number" id="userAge" class="form-control" placeholder="Enter age" min="1" max="120">
                        </div>
                        <div class="button-group">
                            <button id="saveCulturalPrefsBtn" class="btn btn-primary">Save Preferences</button>
                            <button id="loadCulturalPrefsBtn" class="btn btn-secondary">Load Preferences</button>
                        </div>
                    </div>

                    <!-- Î¨∏ÌôîÏ†Å ÌëúÌòÑ ÏÉùÏÑ± -->
                    <div class="subsection">
                        <h4>Cultural Expression Generation</h4>
                        <div class="form-group">
                            <label for="responseType">Response Type:</label>
                            <select id="responseType" class="form-control">
                                <option value="greeting">Greeting</option>
                                <option value="agreement">Agreement</option>
                                <option value="disagreement">Disagreement</option>
                                <option value="gratitude">Gratitude</option>
                                <option value="apology">Apology</option>
                                <option value="encouragement">Encouragement</option>
                                <option value="sympathy">Sympathy</option>
                                <option value="humor">Humor</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="generateCulturalResponseBtn" class="btn btn-primary">Generate Response</button>
                            <button id="generateGreetingBtn" class="btn btn-secondary">Generate Greeting</button>
                        </div>
                    </div>

                    <!-- ÎåÄÌôî ÏãúÏûëÏñ¥ ÏÉùÏÑ± -->
                    <div class="subsection">
                        <h4>Conversation Starters</h4>
                        <div class="form-group">
                            <label for="conversationTopic">Topic:</label>
                            <select id="conversationTopic" class="form-control">
                                <option value="general">General</option>
                                <option value="health">Health</option>
                                <option value="family">Family</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="generateConversationStarterBtn" class="btn btn-primary">Generate Starter</button>
                        </div>
                    </div>

                    <!-- Î¨∏ÌôîÏ†Å ÏòàÏ†à Ï†ïÎ≥¥ -->
                    <div class="subsection">
                        <h4>Cultural Etiquette</h4>
                        <div class="form-group">
                            <label for="etiquetteContext">Context:</label>
                            <select id="etiquetteContext" class="form-control">
                                <option value="general">General</option>
                                <option value="elderly">Elderly Respect</option>
                                <option value="communication">Communication</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="getCulturalEtiquetteBtn" class="btn btn-primary">Get Etiquette Info</button>
                        </div>
                    </div>

                    <!-- Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏ Ï†ÅÏö© -->
                    <div class="subsection">
                        <h4>Apply Cultural Context</h4>
                        <div class="form-group">
                            <label for="messageToEnhance">Message to Enhance:</label>
                            <textarea id="messageToEnhance" class="form-control" placeholder="Enter a message to apply cultural context..." rows="3"></textarea>
                        </div>
                        <div class="button-group">
                            <button id="applyCulturalContextBtn" class="btn btn-primary">Apply Cultural Context</button>
                        </div>
                    </div>
                </div>

                <!-- Brain Research Computing ÏÑπÏÖò -->
                <div class="config-section" id="brainResearchSection">
                    <h3 id="brainResearchTitle">üß† Brain Disease Research Computing</h3>
                    <p id="brainResearchDescription">Contribute to Alzheimer's and dementia research by running distributed computing jobs in your browser.</p>
                    
                    <!-- ÏÇ¨Ïö©Ïûê Í∏∞Îä• Í∞êÏßÄ -->
                    <div class="subsection" id="capabilitiesSection">
                        <h4 id="capabilitiesTitle">üîç Device Capabilities</h4>
                        <div id="capabilitiesDisplay" class="capabilities-display">
                            <div class="capability-item">
                                <span class="capability-label">GPU Support:</span>
                                <span id="gpuSupport" class="capability-value">Detecting...</span>
                            </div>
                            <div class="capability-item">
                                <span class="capability-label">WebGPU:</span>
                                <span id="webgpuSupport" class="capability-value">Detecting...</span>
                            </div>
                            <div class="capability-item">
                                <span class="capability-label">WebAssembly:</span>
                                <span id="webassemblySupport" class="capability-value">Detecting...</span>
                            </div>
                            <div class="capability-item">
                                <span class="capability-label">CPU Cores:</span>
                                <span id="cpuCores" class="capability-value">Detecting...</span>
                            </div>
                            <div class="capability-item">
                                <span class="capability-label">Memory:</span>
                                <span id="deviceMemory" class="capability-value">Detecting...</span>
                            </div>
                        </div>
                        <button id="refreshCapabilitiesBtn" class="btn btn-secondary">üîÑ Refresh Capabilities</button>
                    </div>

                    <!-- ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏûëÏóÖ -->
                    <div class="subsection" id="availableJobsSection">
                        <h4 id="availableJobsTitle">üìã Available Computing Jobs</h4>
                        <div class="button-group">
                            <button id="loadAvailableJobsBtn" class="btn btn-primary">üîç Load Available Jobs</button>
                            <button id="refreshJobsBtn" class="btn btn-secondary">üîÑ Refresh Jobs</button>
                            <button id="runSelectedJobBtn" class="btn btn-success">üöÄ Run Selected Job</button>
                        </div>
                        <div id="availableJobsList" class="jobs-list" style="display: none;">
                            <!-- ÏûëÏóÖ Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                        </div>
                    </div>

                    <!-- ÌòÑÏû¨ Ïã§Ìñâ Ï§ëÏù∏ ÏûëÏóÖ -->
                    <div class="subsection" id="currentJobSection" style="display: none;">
                        <h4 id="currentJobTitle">‚ö° Current Computing Job</h4>
                        <div id="currentJobInfo" class="current-job-info">
                            <!-- ÌòÑÏû¨ ÏûëÏóÖ Ï†ïÎ≥¥Í∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div id="computationProgress" class="progress-fill"></div>
                            </div>
                            <div id="progressText" class="progress-text">0%</div>
                        </div>
                        <div class="button-group">
                            <button id="stopComputationBtn" class="btn btn-danger">‚èπÔ∏è Stop Computation</button>
                        </div>
                    </div>

                    <!-- Í∏∞Ïó¨ ÌÜµÍ≥Ñ -->
                    <div class="subsection" id="contributionSection">
                        <h4 id="contributionTitle">üìä Your Contribution</h4>
                        <div class="button-group">
                            <button id="loadContributionBtn" class="btn btn-primary">üìà Load Contribution Stats</button>
                            <button id="loadLeaderboardBtn" class="btn btn-secondary">üèÜ View Leaderboard</button>
                        </div>
                        <div id="contributionStats" class="contribution-stats" style="display: none;">
                            <!-- Í∏∞Ïó¨ ÌÜµÍ≥ÑÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                        </div>
                    </div>

                    <!-- Ïó∞Íµ¨ ÌÜµÍ≥Ñ -->
                    <div class="subsection" id="researchStatsSection">
                        <h4 id="researchStatsTitle">üî¨ Research Statistics</h4>
                        <div class="button-group">
                            <button id="loadResearchStatsBtn" class="btn btn-primary">üìä Load Research Stats</button>
                        </div>
                        <div id="researchStats" class="research-stats" style="display: none;">
                            <!-- Ïó∞Íµ¨ ÌÜµÍ≥ÑÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                        </div>
                    </div>
                </div>

                <!-- Telomere-Driven Healthy Aging ÏÑπÏÖò -->
                <div class="config-section" id="telomereSection">
                    <h3 id="telomereTitle">üß¨ Telomere-Driven Healthy Aging</h3>
                    
                    <!-- ÏùºÏÉÅ Î£®Ìã¥ Í∏∞Î°ù -->
                    <div class="subsection">
                        <h4>Daily Routine Tracking</h4>
                        <div class="form-group">
                            <label for="sleepHours">Sleep Hours:</label>
                            <input type="number" id="sleepHours" class="form-control" placeholder="7.5" min="0" max="24" step="0.5">
                        </div>
                        <div class="form-group">
                            <label for="sleepQuality">Sleep Quality (0-100):</label>
                            <input type="number" id="sleepQuality" class="form-control" placeholder="80" min="0" max="100">
                        </div>
                        <div class="form-group">
                            <label for="dailySteps">Daily Steps:</label>
                            <input type="number" id="dailySteps" class="form-control" placeholder="8000" min="0">
                        </div>
                        <div class="form-group">
                            <label for="activityMinutes">Activity Minutes:</label>
                            <input type="number" id="activityMinutes" class="form-control" placeholder="30" min="0">
                        </div>
                        <div class="form-group">
                            <label for="hiitSessions">HIIT Sessions:</label>
                            <input type="number" id="hiitSessions" class="form-control" placeholder="1" min="0">
                        </div>
                        <div class="form-group">
                            <label for="strengthSessions">Strength Sessions:</label>
                            <input type="number" id="strengthSessions" class="form-control" placeholder="2" min="0">
                        </div>
                        <div class="form-group">
                            <label for="dietScore">Mediterranean Diet Score (0-100):</label>
                            <input type="number" id="dietScore" class="form-control" placeholder="75" min="0" max="100">
                        </div>
                        <div class="form-group">
                            <label for="omega3Intake">Omega-3 Intake (g/week):</label>
                            <input type="number" id="omega3Intake" class="form-control" placeholder="2.5" min="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="stressLevel">Stress Level (0-100):</label>
                            <input type="number" id="stressLevel" class="form-control" placeholder="45" min="0" max="100">
                        </div>
                        <div class="form-group">
                            <label for="mindfulnessMinutes">Mindfulness Minutes:</label>
                            <input type="number" id="mindfulnessMinutes" class="form-control" placeholder="10" min="0">
                        </div>
                        <div class="button-group">
                            <button id="logRoutineBtn" class="btn btn-primary">Log Daily Routine</button>
                            <button id="getDailySignalsBtn" class="btn btn-secondary">Get Daily Signals</button>
                        </div>
                    </div>

                    <!-- Î∞îÏù¥Ïò§ÎßàÏª§ Í∏∞Î°ù -->
                    <div class="subsection">
                        <h4>Biomarker Tracking</h4>
                        <div class="form-group">
                            <label for="hsCRP">hs-CRP (mg/L):</label>
                            <input type="number" id="hsCRP" class="form-control" placeholder="1.1" min="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="fastingGlucose">Fasting Glucose (mg/dL):</label>
                            <input type="number" id="fastingGlucose" class="form-control" placeholder="98" min="0">
                        </div>
                        <div class="form-group">
                            <label for="hba1c">HbA1c (%):</label>
                            <input type="number" id="hba1c" class="form-control" placeholder="5.6" min="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="omega3Index">Omega-3 Index (%):</label>
                            <input type="number" id="omega3Index" class="form-control" placeholder="7.2" min="0" step="0.1">
                        </div>
                        <div class="button-group">
                            <button id="saveBiomarkersBtn" class="btn btn-primary">Save Biomarkers</button>
                            <button id="getBiomarkerReportBtn" class="btn btn-secondary">Get Report</button>
                        </div>
                    </div>

                    <!-- ÌÖîÎ°úÎØ∏Ïñ¥ Ï∏°Ï†ï -->
                    <div class="subsection">
                        <h4>Telomere Length Measurement</h4>
                        <div class="form-group">
                            <label for="ltlValue">LTL Value:</label>
                            <input type="number" id="ltlValue" class="form-control" placeholder="1.03" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="ltlUnits">Units:</label>
                            <select id="ltlUnits" class="form-control">
                                <option value="T/S">T/S</option>
                                <option value="kb">kb</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ltlMethod">Method:</label>
                            <select id="ltlMethod" class="form-control">
                                <option value="qPCR">qPCR</option>
                                <option value="Flow-FISH">Flow-FISH</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button id="saveLTLBtn" class="btn btn-primary">Save LTL Result</button>
                            <button id="getLTLTrendBtn" class="btn btn-secondary">Get Trend</button>
                        </div>
                    </div>

                    <!-- ÌîºÎìúÎ∞± Î∞è Í∂åÏû•ÏÇ¨Ìï≠ -->
                    <div class="subsection">
                        <h4>Health Feedback & Recommendations</h4>
                        <div class="button-group">
                            <button id="generateFeedbackBtn" class="btn btn-primary">Generate Feedback</button>
                        </div>
                        <div id="feedbackDisplay" class="feedback-display" style="display: none;">
                            <h5>Your Health Insights:</h5>
                            <div id="feedbackContent"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-area">
                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        <div class="message-header">System</div>
                        <div class="message-content" id="welcomeMessage">Welcome to the Kairos Cognitive Enhancement Platform! Set your user ID and start your cognitive training journey.</div>
                    </div>
                    <div class="message system">
                        <div class="message-header">System</div>
                        <div class="message-content" id="tipMessage">üí° Tip: Model list will be loaded automatically. If not loaded, click the "üîÑ Refresh Model List" button.</div>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <div>ü§î AI is thinking...</div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>

                <div class="chat-input">
                    <div class="input-group">
                        <input type="text" id="messageInput" placeholder="Enter your message..." onkeypress="handleKeyPress(event)">
                        <button id="sendMessageBtn">Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /*
         Multi-language comments for all functions and modules
         - EN: This application provides an AI chat with memory features to support cognitive health. Title aligned with Kairos mission.
         - FR: Cette application offre un chat IA avec m√©moire pour soutenir la sant√© cognitive. Titre align√© avec la mission Kairos.
         - KO: Ïù¥ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÄ Ïù∏ÏßÄ Í∏∞Îä• Í±¥Í∞ïÏùÑ ÎèïÍ∏∞ ÏúÑÌïú Î©îÎ™®Î¶¨ Í∏∞Îä• Ìè¨Ìï® AI Ï±ÑÌåÖÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§. Kairos ÎØ∏ÏÖòÍ≥º ÏùºÏπò.
         - JA: Êú¨„Ç¢„Éó„É™„ÅØË™çÁü•Ê©üËÉΩ„ÅÆÂÅ•Â∫∑„ÇíÊîØÊè¥„Åô„Çã„Åü„ÇÅ„ÅÆ„É°„É¢„É™Ê©üËÉΩ‰ªò„ÅçAI„ÉÅ„É£„ÉÉ„Éà„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇKairos„ÅÆ‰ΩøÂëΩ„Å®Êï¥Âêà„ÄÇ
         - ZH: Êú¨Â∫îÁî®Êèê‰æõÂ∏¶ËÆ∞ÂøÜÂäüËÉΩÁöÑAIËÅäÂ§©Ôºå‰ª•ÊîØÊåÅËÆ§Áü•ÂÅ•Â∫∑„ÄÇ‰∏éKairos‰ΩøÂëΩ‰∏ÄËá¥„ÄÇ
        */

        // Ï†ÑÏó≠ Î≥ÄÏàò / Global variables / Variables globales / „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞ / ÂÖ®Â±ÄÂèòÈáè
        let currentUserId = 'user_001';
        let memoryData = null;
        let brainComputingClient = null;
        let currentComputingJob = null;
        let computationProgressInterval = null;

        // DOM ÏöîÏÜåÎì§
        const apiUrlInput = document.getElementById('apiUrl');
        const apiKeyInput = document.getElementById('apiKey');
        const userIdInput = document.getElementById('userId');
        const timeoutInput = document.getElementById('timeout');
        const modelSelect = document.getElementById('model');
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const loading = document.getElementById('loading');
        const memoryStats = document.getElementById('memoryStats');
        const statsContent = document.getElementById('statsContent');

        // ÏÑ§Ï†ïÍ∞í Í∞ÄÏ†∏Ïò§Í∏∞ / Get config / R√©cup√©rer la configuration / Ë®≠ÂÆöÂèñÂæó / Ëé∑ÂèñÈÖçÁΩÆ
        function getConfig() {
            return {
                apiUrl: apiUrlInput.value.trim(),
                apiKey: apiKeyInput.value.trim(),
                userId: userIdInput.value.trim(),
                timeout: parseInt(timeoutInput.value) || 90,
                model: modelSelect.value
            };
        }

        // ÏÉÅÌÉú Î©îÏãúÏßÄ ÌëúÏãú / Show status message / Afficher le statut / „Çπ„ÉÜ„Éº„Çø„Çπ„É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫ / ÊòæÁ§∫Áä∂ÊÄÅÊ∂àÊÅØ
        function showStatus(message, type = 'info') {
            const statusDiv = document.createElement('div');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;
            chatMessages.appendChild(statusDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            setTimeout(() => {
                statusDiv.remove();
            }, 5000);
        }

        // Îã§Íµ≠Ïñ¥ Î¶¨ÏÜåÏä§ / i18n resources
        const i18n = {
            en: {
                title: 'üß† Cognitive Function Support AI Chat (Kairos)',
                subtitle: 'AI Chat with Memory for Cognitive Health',
                languageHelp: 'Choose the interface language.',
                apiUrlHelp: 'API server address. Ex: http://localhost:3000 (local), ngrok URL for remote access.',
                apiKeyHelp: 'API key used to authorize requests (Bearer token).',
                userIdHelp: 'Identifier for storing and retrieving your personal memory.',
                timeoutHelp: 'Maximum wait time in seconds before cancellation.',
                modelHelp: 'Choose an installed model. Large models require more VRAM/CPU and are slower.',
                testHelp: 'Check connectivity to /health endpoint.',
                settingsTitle: 'Settings',
                memoryManageTitle: 'Memory Management',
                statsHelp: 'View totals (conversations, facts, preferences).',
                memoryHelp: 'Display saved memory for this user.',
                addFactHelp: 'Add a fact to your personal memory.',
                addPrefHelp: 'Add a preference (ex: preferred language).',
                deleteMemHelp: 'Delete all memory for current user.',
                welcome: 'Welcome! Set your user ID and start chatting.',
                tip: 'Tip: Model list loads automatically. If not, click Refresh.',
                timeoutError: '‚ùå Request timeout. Please try again.',
                timeoutSolutions: 'Solutions: 1) Increase timeout (180-300s), 2) Try lighter model (llama3.1), 3) Check computer specs (GPU/VRAM), 4) Use localhost instead of ngrok, 5) Close other apps',
                computerRequirements: 'üíª Computer Requirements: Good GPU (8GB+ VRAM) recommended for large models. CPU-only mode is slower.',
                refreshModels: 'üîÑ Refresh Model List',
                selectModel: 'Select a model...',
                testConnection: 'üîó Test Connection',
                memoryStats: 'üìä Memory Statistics',
                viewMemory: 'üìñ View Memory',
                addFact: '‚ûï Add Fact',
                addPreference: '‚ûï Add Preference',
                deleteMemory: 'üóëÔ∏è Delete Memory',
                send: 'Send',
                enterMessage: 'Enter your message...',
                totalConversations: 'Total Conversations:',
                totalFacts: 'Total Facts:',
                totalPreferences: 'Total Preferences:',
                createdDate: 'Created:',
                lastUpdated: 'Last Updated:',
                loadingModels: 'üîÑ Loading model list...',
                modelsFound: '‚úÖ Found {count} models',
                noModels: '‚ö†Ô∏è No models installed. Please download models in Ollama.',
                modelLoadTimeout: '‚ùå Model list load timeout. Please try again.',
                serverConnectionError: '‚ùå Cannot connect to server. Please check if server is running.',
                modelLoadError: '‚ùå Model list load failed: {error}',
                defaultModelSelected: '‚úÖ Default model selected: {model}',
                modelSelected: '‚úÖ Model selected: {model}',
                responseDelay: '‚ö†Ô∏è Response is taking longer than expected. Please wait...',
                connectionError: 'Connection error: {error}',
                unknownError: 'Unknown error',
                advancedMemoryTitle: 'üß† Advanced Memory & Context',
                emotionalAnalysis: 'üòä Emotional Analysis',
                lifeTimeline: 'üìÖ Life Timeline',
                contextPatterns: 'üîç Context Patterns',
                addRelationship: 'üë• Add Relationship',
                addGoal: 'üéØ Add Goal',
                addInterest: '‚≠ê Add Interest',
                addLongTermMemory: 'üíæ Add Long-term Memory',
                emotionalHelp: 'Analyze emotional states and trends over time.',
                timelineHelp: 'View life events timeline with emotional impact.',
                patternsHelp: 'Explore conversation patterns and context.',
                relationshipHelp: 'Add important relationships and connections.',
                goalHelp: 'Set and track personal goals and objectives.',
                interestHelp: 'Add interests, hobbies, and preferences.',
                longTermHelp: 'Store important long-term memories and experiences.',
                multimodalTitle: 'üîä Multimodal Integration',
                brainResearchTitle: 'üß† Brain Disease Research Computing',
                brainResearchDescription: 'Contribute to Alzheimer\'s and dementia research by running distributed computing jobs in your browser.',
                capabilitiesTitle: 'üîç Device Capabilities',
                availableJobsTitle: 'üìã Available Computing Jobs',
                currentJobTitle: '‚ö° Current Computing Job',
                contributionTitle: 'üìä Your Contribution',
                researchStatsTitle: 'üî¨ Research Statistics',
                voiceTitle: 'üé§ Voice Processing',
                voiceInputLabel: 'Voice Input:',
                processVoice: 'Process Voice',
                synthesizeVoice: 'Synthesize Voice',
                videoTitle: 'üìπ Video Processing',
                videoInputLabel: 'Video Input:',
                processVideo: 'Process Video',
                extractFrames: 'Extract Frames',
                sensorTitle: 'üì° Sensor Data',
                sensorTypeLabel: 'Sensor Type:',
                temperature: 'Temperature',
                humidity: 'Humidity',
                light: 'Light',
                motion: 'Motion',
                processSensorData: 'Process Sensor Data',
                sensorHistory: 'Sensor History',
                wearableTitle: '‚åö Wearable Devices',
                deviceTypeLabel: 'Device Type:',
                smartwatch: 'Smartwatch',
                fitnessTracker: 'Fitness Tracker',
                healthMonitor: 'Health Monitor',
                connectDevice: 'Connect Device',
                getData: 'Get Data',
                healthTitle: '‚ù§Ô∏è Health Monitoring',
                reportTypeLabel: 'Report Type:',
                daily: 'Daily',
                weekly: 'Weekly',
                monthly: 'Monthly',
                processHealthData: 'Process Health Data',
                generateReport: 'Generate Report',
                contextTitle: 'üîó Multimodal Context',
                generateContext: 'Generate Context',
                checkStatus: 'Check Status',
                culturalTitle: 'üåç Cultural & Language Optimization',
                languageSettings: 'Language & Formality Settings',
                culturalLanguage: 'Language:',
                culturalFormality: 'Formality Level:',
                userAge: 'User Age (for respectful addressing):',
                savePreferences: 'Save Preferences',
                loadPreferences: 'Load Preferences',
                culturalExpression: 'Cultural Expression Generation',
                responseType: 'Response Type:',
                greeting: 'Greeting',
                agreement: 'Agreement',
                disagreement: 'Disagreement',
                gratitude: 'Gratitude',
                apology: 'Apology',
                encouragement: 'Encouragement',
                sympathy: 'Sympathy',
                humor: 'Humor',
                generateResponse: 'Generate Response',
                generateGreeting: 'Generate Greeting',
                conversationStarters: 'Conversation Starters',
                conversationTopic: 'Topic:',
                general: 'General',
                health: 'Health',
                family: 'Family',
                generateStarter: 'Generate Starter',
                culturalEtiquette: 'Cultural Etiquette',
                etiquetteContext: 'Context:',
                elderly: 'Elderly Respect',
                communication: 'Communication',
                getEtiquetteInfo: 'Get Etiquette Info',
                applyCulturalContext: 'Apply Cultural Context',
                messageToEnhance: 'Message to Enhance:',
                enterMessageToEnhance: 'Enter a message to apply cultural context...',
                applyContext: 'Apply Cultural Context',
                telomereTitle: 'üß¨ Telomere-Driven Healthy Aging',
                dailyRoutineTracking: 'Daily Routine Tracking',
                sleepHours: 'Sleep Hours:',
                sleepQuality: 'Sleep Quality (0-100):',
                dailySteps: 'Daily Steps:',
                activityMinutes: 'Activity Minutes:',
                hiitSessions: 'HIIT Sessions:',
                strengthSessions: 'Strength Sessions:',
                mediterraneanDietScore: 'Mediterranean Diet Score (0-100):',
                omega3Intake: 'Omega-3 Intake (g/week):',
                stressLevel: 'Stress Level (0-100):',
                mindfulnessMinutes: 'Mindfulness Minutes:',
                logDailyRoutine: 'Log Daily Routine',
                getDailySignals: 'Get Daily Signals',
                biomarkerTracking: 'Biomarker Tracking',
                hsCRP: 'hs-CRP (mg/L):',
                fastingGlucose: 'Fasting Glucose (mg/dL):',
                hba1c: 'HbA1c (%):',
                omega3Index: 'Omega-3 Index (%):',
                saveBiomarkers: 'Save Biomarkers',
                getReport: 'Get Report',
                telomereLengthMeasurement: 'Telomere Length Measurement',
                ltlValue: 'LTL Value:',
                ltlUnits: 'Units:',
                ltlMethod: 'Method:',
                saveLTLResult: 'Save LTL Result',
                getTrend: 'Get Trend',
                healthFeedbackRecommendations: 'Health Feedback & Recommendations',
                generateFeedback: 'Generate Feedback',
                yourHealthInsights: 'Your Health Insights:'
            },
            fr: {
                title: 'üß† Chat IA pour le soutien cognitif (Kairos)',
                subtitle: 'Chat IA avec m√©moire pour la sant√© cognitive',
                languageHelp: 'Choisissez la langue de l‚Äôinterface.',
                apiUrlHelp: 'Adresse du serveur API. Ex.: http://localhost:3000 (local), URL ngrok pour un acc√®s distant.',
                apiKeyHelp: 'Cl√© API utilis√©e pour autoriser les requ√™tes (Bearer token).',
                userIdHelp: "Identifiant pour stocker et r√©cup√©rer votre m√©moire personnelle.",
                timeoutHelp: 'Temps d‚Äôattente maximal en secondes avant l‚Äôannulation.',
                modelHelp: 'Choisissez un mod√®le install√©. Les gros mod√®les exigent plus de VRAM/CPU et sont plus lents.',
                testHelp: 'V√©rifie la connectivit√© au point /health.',
                settingsTitle: 'Param√®tres',
                memoryManageTitle: 'Gestion de la m√©moire',
                statsHelp: 'Voir les totaux (conversations, faits, pr√©f√©rences).',
                memoryHelp: 'Afficher la m√©moire enregistr√©e pour cet utilisateur.',
                addFactHelp: 'Ajouter un fait √† votre m√©moire personnelle.',
                addPrefHelp: 'Ajouter une pr√©f√©rence (ex.: langue pr√©f√©r√©e).',
                deleteMemHelp: 'Supprimer toute la m√©moire de l‚Äôutilisateur courant.',
                welcome: 'Bienvenue ! D√©finissez votre ID utilisateur et commencez √† discuter.',
                tip: 'Astuce : la liste des mod√®les se charge automatiquement. Sinon, cliquez sur Actualiser.',
                timeoutError: '‚ùå D√©lai d\'attente d√©pass√©. Veuillez r√©essayer.',
                timeoutSolutions: 'Solutions : 1) Augmenter le d√©lai (180-300s), 2) Essayer un mod√®le plus l√©ger (llama3.1), 3) V√©rifier les sp√©cifications PC (GPU/VRAM), 4) Utiliser localhost au lieu de ngrok, 5) Fermer d\'autres applications',
                computerRequirements: 'üíª Exigences PC : GPU performant (8GB+ VRAM) recommand√© pour les gros mod√®les. Mode CPU uniquement plus lent.',
                refreshModels: 'üîÑ Actualiser la liste des mod√®les',
                selectModel: 'S√©lectionner un mod√®le...',
                testConnection: 'üîó Tester la connexion',
                memoryStats: 'üìä Statistiques m√©moire',
                viewMemory: 'üìñ Voir la m√©moire',
                addFact: '‚ûï Ajouter un fait',
                addPreference: '‚ûï Ajouter une pr√©f√©rence',
                deleteMemory: 'üóëÔ∏è Supprimer la m√©moire',
                send: 'Envoyer',
                enterMessage: 'Entrez votre message...',
                totalConversations: 'Total conversations :',
                totalFacts: 'Total faits :',
                totalPreferences: 'Total pr√©f√©rences :',
                createdDate: 'Cr√©√© le :',
                lastUpdated: 'Derni√®re mise √† jour :',
                loadingModels: 'üîÑ Chargement de la liste des mod√®les...',
                modelsFound: '‚úÖ {count} mod√®les trouv√©s',
                noModels: '‚ö†Ô∏è Aucun mod√®le install√©. Veuillez t√©l√©charger des mod√®les dans Ollama.',
                modelLoadTimeout: '‚ùå D√©lai de chargement de la liste des mod√®les d√©pass√©. Veuillez r√©essayer.',
                serverConnectionError: '‚ùå Impossible de se connecter au serveur. V√©rifiez que le serveur fonctionne.',
                modelLoadError: '‚ùå √âchec du chargement de la liste des mod√®les : {error}',
                defaultModelSelected: '‚úÖ Mod√®le par d√©faut s√©lectionn√© : {model}',
                modelSelected: '‚úÖ Mod√®le s√©lectionn√© : {model}',
                responseDelay: '‚ö†Ô∏è La r√©ponse prend plus de temps que pr√©vu. Veuillez patienter...',
                connectionError: 'Erreur de connexion : {error}',
                unknownError: 'Erreur inconnue',
                advancedMemoryTitle: 'üß† M√©moire Avanc√©e et Contexte',
                emotionalAnalysis: 'üòä Analyse √âmotionnelle',
                lifeTimeline: 'üìÖ Chronologie de Vie',
                contextPatterns: 'üîç Mod√®les de Contexte',
                addRelationship: 'üë• Ajouter Relation',
                addGoal: 'üéØ Ajouter Objectif',
                addInterest: '‚≠ê Ajouter Int√©r√™t',
                addLongTermMemory: 'üíæ Ajouter M√©moire Longue Dur√©e',
                emotionalHelp: 'Analyser les √©tats √©motionnels et tendances dans le temps.',
                timelineHelp: 'Voir la chronologie des √©v√©nements de vie avec impact √©motionnel.',
                patternsHelp: 'Explorer les mod√®les de conversation et contexte.',
                relationshipHelp: 'Ajouter des relations et connexions importantes.',
                goalHelp: 'D√©finir et suivre les objectifs personnels.',
                interestHelp: 'Ajouter int√©r√™ts, passe-temps et pr√©f√©rences.',
                longTermHelp: 'Stocker des souvenirs et exp√©riences importants √† long terme.',
                multimodalTitle: 'üîä Int√©gration Multimodale',
                voiceTitle: 'üé§ Traitement Vocal',
                voiceInputLabel: 'Entr√©e Vocale:',
                processVoice: 'Traiter la Voix',
                synthesizeVoice: 'Synth√©tiser la Voix',
                videoTitle: 'üìπ Traitement Vid√©o',
                videoInputLabel: 'Entr√©e Vid√©o:',
                processVideo: 'Traiter la Vid√©o',
                extractFrames: 'Extraire les Images',
                sensorTitle: 'üì° Donn√©es de Capteurs',
                sensorTypeLabel: 'Type de Capteur:',
                temperature: 'Temp√©rature',
                humidity: 'Humidit√©',
                light: 'Lumi√®re',
                motion: 'Mouvement',
                processSensorData: 'Traiter les Donn√©es de Capteurs',
                sensorHistory: 'Historique des Capteurs',
                wearableTitle: '‚åö Dispositifs Portables',
                deviceTypeLabel: 'Type d\'Appareil:',
                smartwatch: 'Montre Connect√©e',
                fitnessTracker: 'Traqueur de Fitness',
                healthMonitor: 'Moniteur de Sant√©',
                connectDevice: 'Connecter l\'Appareil',
                getData: 'Obtenir les Donn√©es',
                healthTitle: '‚ù§Ô∏è Surveillance de Sant√©',
                reportTypeLabel: 'Type de Rapport:',
                daily: 'Quotidien',
                weekly: 'Hebdomadaire',
                monthly: 'Mensuel',
                processHealthData: 'Traiter les Donn√©es de Sant√©',
                generateReport: 'G√©n√©rer le Rapport',
                contextTitle: 'üîó Contexte Multimodal',
                generateContext: 'G√©n√©rer le Contexte',
                checkStatus: 'V√©rifier le Statut',
                culturalTitle: 'üåç Optimisation Culturelle et Linguistique',
                languageSettings: 'Param√®tres de Langue et de Formalit√©',
                culturalLanguage: 'Langue :',
                culturalFormality: 'Niveau de Formalit√© :',
                userAge: '√Çge de l\'Utilisateur (pour l\'adresse respectueuse) :',
                savePreferences: 'Sauvegarder les Pr√©f√©rences',
                loadPreferences: 'Charger les Pr√©f√©rences',
                culturalExpression: 'G√©n√©ration d\'Expressions Culturelles',
                responseType: 'Type de R√©ponse :',
                greeting: 'Salutation',
                agreement: 'Accord',
                disagreement: 'D√©saccord',
                gratitude: 'Gratitude',
                apology: 'Apologie',
                encouragement: 'Encouragement',
                sympathy: 'Sympathie',
                humor: 'Humeur',
                generateResponse: 'G√©n√©rer une R√©ponse',
                generateGreeting: 'G√©n√©rer une Salutation',
                conversationStarters: 'Amorces de Conversation',
                conversationTopic: 'Sujet :',
                general: 'G√©n√©ral',
                health: 'Sant√©',
                family: 'Famille',
                generateStarter: 'G√©n√©rer une Amorce',
                culturalEtiquette: '√âtiquette Culturelle',
                etiquetteContext: 'Contexte :',
                elderly: 'Respect des Personnes √Çg√©es',
                communication: 'Communication',
                getEtiquetteInfo: 'Obtenir les Informations d\'√âtiquette',
                applyCulturalContext: 'Appliquer le Contexte Culturel',
                messageToEnhance: 'Message √† Am√©liorer :',
                enterMessageToEnhance: 'Entrez un message pour appliquer le contexte culturel...',
                applyContext: 'Appliquer le Contexte Culturel'
            },
            ko: {
                title: 'üß† Ïù∏ÏßÄÍ∏∞Îä• Í∞úÏÑ† AI Ï±ÑÌåÖ (Kairos)',
                subtitle: 'Ïù∏ÏßÄ Í±¥Í∞ïÏùÑ ÏúÑÌïú Î©îÎ™®Î¶¨ Í∏∞Îä• Ìè¨Ìï® AI Ï±ÑÌåÖ',
                languageHelp: 'Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ïñ∏Ïñ¥Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.',
                apiUrlHelp: 'API ÏÑúÎ≤Ñ Ï£ºÏÜåÏûÖÎãàÎã§. Ïòà: http://localhost:3000 (Î°úÏª¨), ÏõêÍ≤© Ï†ëÏÜçÏùÄ ngrok URL ÏÇ¨Ïö©.',
                apiKeyHelp: 'API key used to authorize requests (Bearer token).',
                userIdHelp: 'Identifier for storing and retrieving your personal memory.',
                timeoutHelp: 'Maximum wait time in seconds before cancellation.',
                modelHelp: 'Choose an installed model. Large models require more VRAM/CPU and are slower.',
                testHelp: 'Check connectivity to /health endpoint.',
                settingsTitle: 'Settings',
                memoryManageTitle: 'Memory Management',
                statsHelp: 'View totals (conversations, facts, preferences).',
                memoryHelp: 'Display saved memory for this user.',
                addFactHelp: 'Add a fact to your personal memory.',
                addPrefHelp: 'Add a preference (ex: preferred language).',
                deleteMemHelp: 'Delete all memory for current user.',
                welcome: 'Welcome! Set your user ID and start chatting.',
                tip: 'Tip: Model list loads automatically. If not, click Refresh.',
                timeoutError: '‚ùå ÏöîÏ≤≠ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
                timeoutSolutions: 'Ìï¥Í≤∞Ï±Ö: 1) ÌÉÄÏûÑÏïÑÏõÉ Ï¶ùÍ∞Ä (180-300Ï¥à), 2) Í∞ÄÎ≤ºÏö¥ Î™®Îç∏ ÏãúÎèÑ (llama3.1), 3) Ïª¥Ìì®ÌÑ∞ ÏÇ¨Ïñë ÌôïÏù∏ (GPU/VRAM), 4) ngrok ÎåÄÏã† localhost ÏÇ¨Ïö©, 5) Îã§Î•∏ Ïï± Ï¢ÖÎ£å',
                computerRequirements: 'üíª Ïª¥Ìì®ÌÑ∞ ÏöîÍµ¨ÏÇ¨Ìï≠: ÎåÄÌòï Î™®Îç∏ÏóêÎäî Ï¢ãÏùÄ GPU (8GB+ VRAM) Í∂åÏû•. CPUÎßå ÏÇ¨Ïö© Ïãú ÎäêÎ¶º.',
                refreshModels: 'üîÑ Refresh Model List',
                selectModel: 'Select a model...',
                testConnection: 'üîó Test Connection',
                memoryStats: 'üìä Memory Statistics',
                viewMemory: 'üìñ View Memory',
                addFact: '‚ûï Add Fact',
                addPreference: '‚ûï Add Preference',
                deleteMemory: 'üóëÔ∏è Delete Memory',
                send: 'Send',
                enterMessage: 'Enter your message...',
                totalConversations: 'Total Conversations:',
                totalFacts: 'Total Facts:',
                totalPreferences: 'Total Preferences:',
                createdDate: 'Created:',
                lastUpdated: 'Last Updated:',
                loadingModels: 'üîÑ Loading model list...',
                modelsFound: '‚úÖ Found {count} models',
                noModels: '‚ö†Ô∏è No models installed. Please download models in Ollama.',
                modelLoadTimeout: '‚ùå Model list load timeout. Please try again.',
                serverConnectionError: '‚ùå Cannot connect to server. Please check if server is running.',
                modelLoadError: '‚ùå Model list load failed: {error}',
                defaultModelSelected: '‚úÖ Default model selected: {model}',
                modelSelected: '‚úÖ Model selected: {model}',
                responseDelay: '‚ö†Ô∏è Response is taking longer than expected. Please wait...',
                connectionError: 'Connection error: {error}',
                unknownError: 'Unknown error',
                advancedMemoryTitle: 'üß† Í≥†Í∏â Î©îÎ™®Î¶¨ Î∞è Îß•ÎùΩ',
                emotionalAnalysis: 'üòä Í∞êÏ†ï Î∂ÑÏÑù',
                lifeTimeline: 'üìÖ Ïù∏ÏÉù ÌÉÄÏûÑÎùºÏù∏',
                contextPatterns: 'üîç Îß•ÎùΩ Ìå®ÌÑ¥',
                addRelationship: 'üë• Í¥ÄÍ≥Ñ Ï∂îÍ∞Ä',
                addGoal: 'üéØ Î™©Ìëú Ï∂îÍ∞Ä',
                addInterest: '‚≠ê Í¥ÄÏã¨ÏÇ¨ Ï∂îÍ∞Ä',
                addLongTermMemory: 'üíæ Ïû•Í∏∞ Í∏∞Ïñµ Ï∂îÍ∞Ä',
                emotionalHelp: 'ÏãúÍ∞ÑÏóê Îî∞Î•∏ Í∞êÏ†ï ÏÉÅÌÉúÏôÄ Ìä∏Î†åÎìúÎ•º Î∂ÑÏÑùÌï©ÎãàÎã§.',
                timelineHelp: 'Í∞êÏ†ïÏ†Å ÏòÅÌñ•ÏùÑ Ìè¨Ìï®Ìïú Ïù∏ÏÉù ÏÇ¨Í±¥ ÌÉÄÏûÑÎùºÏù∏ÏùÑ Î¥ÖÎãàÎã§.',
                patternsHelp: 'ÎåÄÌôî Ìå®ÌÑ¥Í≥º Îß•ÎùΩÏùÑ ÌÉêÏÉâÌï©ÎãàÎã§.',
                relationshipHelp: 'Ï§ëÏöîÌïú Í¥ÄÍ≥ÑÏôÄ Ïó∞Í≤∞ÏùÑ Ï∂îÍ∞ÄÌï©ÎãàÎã§.',
                goalHelp: 'Í∞úÏù∏ Î™©ÌëúÏôÄ Í≥ÑÌöçÏùÑ ÏÑ§Ï†ïÌïòÍ≥† Ï∂îÏ†ÅÌï©ÎãàÎã§.',
                interestHelp: 'Í¥ÄÏã¨ÏÇ¨, Ï∑®ÎØ∏, ÏÑ†Ìò∏ÎèÑÎ•º Ï∂îÍ∞ÄÌï©ÎãàÎã§.',
                longTermHelp: 'Ï§ëÏöîÌïú Ïû•Í∏∞ Í∏∞ÏñµÍ≥º Í≤ΩÌóòÏùÑ Ï†ÄÏû•Ìï©ÎãàÎã§.',
                multimodalTitle: 'üîä Î©ÄÌã∞Î™®Îã¨ ÌÜµÌï©',
                voiceTitle: 'üé§ ÏùåÏÑ± Ï≤òÎ¶¨',
                voiceInputLabel: 'ÏùåÏÑ± ÏûÖÎ†•:',
                processVoice: 'ÏùåÏÑ± Ï≤òÎ¶¨',
                synthesizeVoice: 'ÏùåÏÑ± Ìï©ÏÑ±',
                videoTitle: 'üìπ ÏòÅÏÉÅ Ï≤òÎ¶¨',
                videoInputLabel: 'ÏòÅÏÉÅ ÏûÖÎ†•:',
                processVideo: 'ÏòÅÏÉÅ Ï≤òÎ¶¨',
                extractFrames: 'ÌîÑÎ†àÏûÑ Ï∂îÏ∂ú',
                sensorTitle: 'üì° ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞',
                sensorTypeLabel: 'ÏÑºÏÑú Ïú†Ìòï:',
                temperature: 'Ïò®ÎèÑ',
                humidity: 'ÏäµÎèÑ',
                light: 'Ï°∞ÎèÑ',
                motion: 'ÎèôÏûë',
                processSensorData: 'ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨',
                sensorHistory: 'ÏÑºÏÑú ÌûàÏä§ÌÜ†Î¶¨',
                wearableTitle: '‚åö Ïõ®Ïñ¥Îü¨Î∏î Í∏∞Í∏∞',
                deviceTypeLabel: 'Í∏∞Í∏∞ Ïú†Ìòï:',
                smartwatch: 'Ïä§ÎßàÌä∏ÏõåÏπò',
                fitnessTracker: 'ÌîºÌä∏ÎãàÏä§ Ìä∏ÎûòÏª§',
                healthMonitor: 'Í±¥Í∞ï Î™®ÎãàÌÑ∞',
                connectDevice: 'Í∏∞Í∏∞ Ïó∞Í≤∞',
                getData: 'Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå',
                healthTitle: '‚ù§Ô∏è Í±¥Í∞ï Î™®ÎãàÌÑ∞ÎßÅ',
                reportTypeLabel: 'Î¶¨Ìè¨Ìä∏ Ïú†Ìòï:',
                daily: 'ÏùºÏùº',
                weekly: 'Ï£ºÍ∞Ñ',
                monthly: 'ÏõîÍ∞Ñ',
                processHealthData: 'Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨',
                generateReport: 'Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±',
                contextTitle: 'üîó Î©ÄÌã∞Î™®Îã¨ Ïª®ÌÖçÏä§Ìä∏',
                generateContext: 'Ïª®ÌÖçÏä§Ìä∏ ÏÉùÏÑ±',
                checkStatus: 'ÏÉÅÌÉú ÌôïÏù∏',
                culturalTitle: 'üåç Î¨∏Ìôî Î∞è Ïñ∏Ïñ¥ ÏµúÏ†ÅÌôî',
                languageSettings: 'Ïñ∏Ïñ¥ Î∞è Í≤©Ïãù ÏàòÏ§Ä ÏÑ§Ï†ï',
                culturalLanguage: 'Ïñ∏Ïñ¥:',
                culturalFormality: 'Í≤©Ïãù ÏàòÏ§Ä:',
                userAge: 'ÏÇ¨Ïö©Ïûê ÎÇòÏù¥ (Ï°¥Ïπ≠Ïñ¥ ÏÇ¨Ïö©Ïö©):',
                savePreferences: 'ÏÑ†Ìò∏ÎèÑ Ï†ÄÏû•',
                loadPreferences: 'ÏÑ†Ìò∏ÎèÑ Î∂àÎü¨Ïò§Í∏∞',
                culturalExpression: 'Î¨∏ÌôîÏ†Å ÌëúÌòÑ ÏÉùÏÑ±',
                responseType: 'ÏùëÎãµ Ïú†Ìòï:',
                greeting: 'Ïù∏ÏÇ¨',
                agreement: 'ÎèôÏùò',
                disagreement: 'Î∞òÎåÄ',
                gratitude: 'Í∞êÏÇ¨',
                apology: 'ÏÇ¨Í≥º',
                encouragement: 'Í≤©Î†§',
                sympathy: 'ÎèôÏ†ï',
                humor: 'Ïú†Î®∏',
                generateResponse: 'ÏùëÎãµ ÏÉùÏÑ±',
                generateGreeting: 'Ïù∏ÏÇ¨Îßê ÏÉùÏÑ±',
                conversationStarters: 'ÎåÄÌôî ÏãúÏûëÏñ¥',
                conversationTopic: 'Ï£ºÏ†ú:',
                general: 'ÏùºÎ∞ò',
                health: 'Í±¥Í∞ï',
                family: 'Í∞ÄÏ°±',
                generateStarter: 'ÏãúÏûëÏñ¥ ÏÉùÏÑ±',
                culturalEtiquette: 'Î¨∏ÌôîÏ†Å ÏòàÏ†à',
                etiquetteContext: 'Îß•ÎùΩ:',
                elderly: 'ÎÖ∏Ïù∏ Ï°¥Ï§ë',
                communication: 'ÏÜåÌÜµ',
                getEtiquetteInfo: 'ÏòàÏ†à Ï†ïÎ≥¥ Ï°∞Ìöå',
                applyCulturalContext: 'Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏ Ï†ÅÏö©',
                messageToEnhance: 'Ìñ•ÏÉÅÌï† Î©îÏãúÏßÄ:',
                enterMessageToEnhance: 'Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏Î•º Ï†ÅÏö©Ìï† Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...',
                applyContext: 'Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏ Ï†ÅÏö©',
                brainResearchTitle: 'üß† Îáå ÏßàÌôò Ïó∞Íµ¨ Î∂ÑÏÇ∞ Ïª¥Ìì®ÌåÖ',
                brainResearchDescription: 'Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú Î∂ÑÏÇ∞ Ïª¥Ìì®ÌåÖ ÏûëÏóÖÏùÑ Ïã§ÌñâÌïòÏó¨ ÏïåÏ∏†ÌïòÏù¥Î®∏ÏôÄ ÏπòÎß§ Ïó∞Íµ¨Ïóê Í∏∞Ïó¨ÌïòÏÑ∏Ïöî.',
                capabilitiesTitle: 'üîç Í∏∞Í∏∞ Í∏∞Îä•',
                availableJobsTitle: 'üìã ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Ïª¥Ìì®ÌåÖ ÏûëÏóÖ',
                currentJobTitle: '‚ö° ÌòÑÏû¨ Ïª¥Ìì®ÌåÖ ÏûëÏóÖ',
                contributionTitle: 'üìä Í∏∞Ïó¨ ÌÜµÍ≥Ñ',
                researchStatsTitle: 'üî¨ Ïó∞Íµ¨ ÌÜµÍ≥Ñ',
                telomereTitle: 'üß¨ ÌÖîÎ°úÎØ∏Ïñ¥ Í∏∞Î∞ò Í±¥Í∞ïÌïú ÎÖ∏Ìôî',
                dailyRoutineTracking: 'ÏùºÏÉÅ Î£®Ìã¥ Ï∂îÏ†Å',
                sleepHours: 'ÏàòÎ©¥ ÏãúÍ∞Ñ:',
                sleepQuality: 'ÏàòÎ©¥ ÌíàÏßà (0-100):',
                dailySteps: 'ÏùºÏùº Í±∏Ïùå Ïàò:',
                activityMinutes: 'ÌôúÎèô ÏãúÍ∞Ñ (Î∂Ñ):',
                hiitSessions: 'HIIT ÏÑ∏ÏÖò:',
                strengthSessions: 'Í∑ºÎ†• Ïö¥Îèô ÏÑ∏ÏÖò:',
                mediterraneanDietScore: 'ÏßÄÏ§ëÌï¥Ïãù Îã§Ïù¥Ïñ¥Ìä∏ Ï†êÏàò (0-100):',
                omega3Intake: 'Ïò§Î©îÍ∞Ä-3 ÏÑ≠Ï∑®Îüâ (g/Ï£º):',
                stressLevel: 'Ïä§Ìä∏Î†àÏä§ ÏàòÏ§Ä (0-100):',
                mindfulnessMinutes: 'ÎßàÏùåÏ±ôÍπÄ ÏãúÍ∞Ñ (Î∂Ñ):',
                logDailyRoutine: 'ÏùºÏÉÅ Î£®Ìã¥ Í∏∞Î°ù',
                getDailySignals: 'ÏùºÏùº Ïã†Ìò∏ Ï°∞Ìöå',
                biomarkerTracking: 'Î∞îÏù¥Ïò§ÎßàÏª§ Ï∂îÏ†Å',
                hsCRP: 'hs-CRP (mg/L):',
                fastingGlucose: 'Í≥µÎ≥µ ÌòàÎãπ (mg/dL):',
                hba1c: 'HbA1c (%):',
                omega3Index: 'Ïò§Î©îÍ∞Ä-3 ÏßÄÏàò (%):',
                saveBiomarkers: 'Î∞îÏù¥Ïò§ÎßàÏª§ Ï†ÄÏû•',
                getReport: 'Î¶¨Ìè¨Ìä∏ Ï°∞Ìöå',
                telomereLengthMeasurement: 'ÌÖîÎ°úÎØ∏Ïñ¥ Í∏∏Ïù¥ Ï∏°Ï†ï',
                ltlValue: 'LTL Í∞í:',
                ltlUnits: 'Îã®ÏúÑ:',
                ltlMethod: 'Î∞©Î≤ï:',
                saveLTLResult: 'LTL Í≤∞Í≥º Ï†ÄÏû•',
                getTrend: 'Ï∂îÏÑ∏ Ï°∞Ìöå',
                healthFeedbackRecommendations: 'Í±¥Í∞ï ÌîºÎìúÎ∞± Î∞è Í∂åÏû•ÏÇ¨Ìï≠',
                generateFeedback: 'ÌîºÎìúÎ∞± ÏÉùÏÑ±',
                yourHealthInsights: 'Í±¥Í∞ï Ïù∏ÏÇ¨Ïù¥Ìä∏:'
            },
            ja: {
                title: 'üß† Ë™çÁü•Ê©üËÉΩ„Çµ„Éù„Éº„ÉàAI„ÉÅ„É£„ÉÉ„Éà (Kairos)',
                subtitle: 'Ë™çÁü•ÂÅ•Â∫∑„ÅÆ„Åü„ÇÅ„ÅÆ„É°„É¢„É™Ê©üËÉΩ‰ªò„ÅçAI„ÉÅ„É£„ÉÉ„Éà',
                languageHelp: '„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„ÇπË®ÄË™û„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                apiUrlHelp: 'API„Çµ„Éº„Éê„Éº„ÅÆÂ†¥ÊâÄ„ÄÇ‰æã: http://localhost:3000„ÄÅ„É™„É¢„Éº„Éà„ÅØngrok URL„ÄÇ',
                apiKeyHelp: '„Çµ„Éº„Éê„ÉºË¶ÅÊ±Ç„ÅÆË™çÂèØ„Å´‰Ωø„ÅÜAPI„Ç≠„ÉºÔºàBearer„Éà„Éº„ÇØ„É≥Ôºâ„ÄÇ',
                userIdHelp: 'ÂÄã‰∫∫„É°„É¢„É™„ÅÆ‰øùÂ≠ò/ÂèñÂæó„Å´‰Ωø„ÅÜ„É¶„Éº„Ç∂„ÉºË≠òÂà•Â≠ê„ÄÇ',
                timeoutHelp: '„Ç≠„É£„É≥„Çª„É´„Åæ„Åß„ÅÆÊúÄÂ§ßÂæÖÊ©üÊôÇÈñìÔºàÁßíÔºâ„ÄÇ',
                modelHelp: '„Ç§„É≥„Çπ„Éà„Éº„É´Ê∏à„Åø„É¢„Éá„É´„ÇíÈÅ∏Êäû„ÄÇÂ§ß„Åç„ÅÑ„É¢„Éá„É´„ÅØVRAM/CPU„ÅåÂ§ö„ÅèÂøÖË¶Å„ÅßÈÅÖ„Åè„Å™„Çä„Åæ„Åô„ÄÇ',
                testHelp: 'API„Çµ„Éº„Éê„Éº /health „Å∏„ÅÆÊé•Á∂ö„ÇíÁ¢∫Ë™ç„ÄÇ',
                settingsTitle: 'Ë®≠ÂÆö',
                memoryManageTitle: '„É°„É¢„É™ÁÆ°ÁêÜ',
                statsHelp: 'ÂêàË®àÔºà‰ºöË©±„ÄÅ‰∫ãÂÆü„ÄÅÂóúÂ•ΩÔºâ„ÇíË°®Á§∫„ÄÇ',
                memoryHelp: '„Åì„ÅÆ„É¶„Éº„Ç∂„Éº„ÅÆ‰øùÂ≠òÊ∏à„Åø„É°„É¢„É™„ÇíË°®Á§∫„ÄÇ',
                addFactHelp: 'ÂÄã‰∫∫„É°„É¢„É™„Å´‰∫ãÂÆü„ÇíËøΩÂä†„ÄÇ',
                addPrefHelp: 'ÂóúÂ•Ω„ÇíËøΩÂä†Ôºà‰æãÔºöÂ•Ω„Åç„Å™Ë®ÄË™ûÔºâ„ÄÇ',
                deleteMemHelp: 'ÁèæÂú®„É¶„Éº„Ç∂„Éº„ÅÆÂÖ®„É°„É¢„É™„ÇíÂâäÈô§„ÄÇ',
                welcome: '„Çà„ÅÜ„Åì„ÅùÔºÅ„É¶„Éº„Ç∂„ÉºID„ÇíË®≠ÂÆö„Åó„Å¶‰ºöË©±„ÇíÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                tip: '„Éí„É≥„ÉàÔºö„É¢„Éá„É´‰∏ÄË¶ß„ÅØËá™ÂãïË™≠Ëæº„ÄÇ„Å†„ÇÅ„Å™„ÇâÊõ¥Êñ∞„Çí„ÇØ„É™„ÉÉ„ÇØ„ÄÇ',
                timeoutError: '‚ùå „É™„ÇØ„Ç®„Çπ„Éà„Åå„Çø„Ç§„É†„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü„ÄÇÂÜçË©¶Ë°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                timeoutSolutions: 'Ëß£Ê±∫Á≠ñÔºö1) „Çø„Ç§„É†„Ç¢„Ç¶„ÉàÂª∂Èï∑ (180-300Áßí), 2) ËªΩÈáè„É¢„Éá„É´Ë©¶Ë°å (llama3.1), 3) PC‰ªïÊßòÁ¢∫Ë™ç (GPU/VRAM), 4) ngrok„ÅÆ‰ª£„Çè„Çä„Å´localhost‰ΩøÁî®, 5) ‰ªñ„ÅÆ„Ç¢„Éó„É™ÁµÇ‰∫Ü',
                computerRequirements: 'üíª PCË¶Å‰ª∂ÔºöÂ§ßÂÆπÈáè„É¢„Éá„É´„Å´„ÅØÈ´òÊÄßËÉΩGPU (8GB+ VRAM) Êé®Â•®„ÄÇCPU„ÅÆ„Åø„ÅÆ„É¢„Éº„Éâ„ÅØÈÅÖ„ÅÑ„ÄÇ',
                refreshModels: 'üîÑ „É¢„Éá„É´‰∏ÄË¶ßÊõ¥Êñ∞',
                selectModel: '„É¢„Éá„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
                testConnection: 'üîó Êé•Á∂ö„ÉÜ„Çπ„Éà',
                memoryStats: 'üìä „É°„É¢„É™Áµ±Ë®à',
                viewMemory: 'üìñ „É°„É¢„É™Ë°®Á§∫',
                addFact: '‚ûï ‰∫ãÂÆüËøΩÂä†',
                addPreference: '‚ûï ÂóúÂ•ΩËøΩÂä†',
                deleteMemory: 'üóëÔ∏è „É°„É¢„É™ÂâäÈô§',
                send: 'ÈÄÅ‰ø°',
                enterMessage: '„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
                totalConversations: 'Á∑è‰ºöË©±Êï∞Ôºö',
                totalFacts: 'Á∑è‰∫ãÂÆüÊï∞Ôºö',
                totalPreferences: 'Á∑èÂóúÂ•ΩÊï∞Ôºö',
                createdDate: '‰ΩúÊàêÊó•Ôºö',
                lastUpdated: 'ÊúÄÁµÇÊõ¥Êñ∞Ôºö',
                loadingModels: 'üîÑ „É¢„Éá„É´‰∏ÄË¶ß„ÇíË™≠„ÅøËæº„Åø‰∏≠...',
                modelsFound: '‚úÖ {count}ÂÄã„ÅÆ„É¢„Éá„É´„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü',
                noModels: '‚ö†Ô∏è „Ç§„É≥„Çπ„Éà„Éº„É´„Åï„Çå„Åü„É¢„Éá„É´„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇOllama„Åß„É¢„Éá„É´„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                modelLoadTimeout: '‚ùå „É¢„Éá„É´‰∏ÄË¶ß„ÅÆË™≠„ÅøËæº„Åø„Åå„Çø„Ç§„É†„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü„ÄÇÂÜçË©¶Ë°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                serverConnectionError: '‚ùå „Çµ„Éº„Éê„Éº„Å´Êé•Á∂ö„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Çµ„Éº„Éê„Éº„ÅåÂÆüË°å‰∏≠„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                modelLoadError: '‚ùå „É¢„Éá„É´‰∏ÄË¶ß„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„ÅüÔºö{error}',
                defaultModelSelected: '‚úÖ „Éá„Éï„Ç©„É´„Éà„É¢„Éá„É´„ÅåÈÅ∏Êäû„Åï„Çå„Åæ„Åó„ÅüÔºö{model}',
                modelSelected: '‚úÖ „É¢„Éá„É´„ÅåÈÅ∏Êäû„Åï„Çå„Åæ„Åó„ÅüÔºö{model}',
                responseDelay: '‚ö†Ô∏è ÂøúÁ≠î„Å´ÊôÇÈñì„Åå„Åã„Åã„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ...',
                connectionError: 'Êé•Á∂ö„Ç®„É©„ÉºÔºö{error}',
                unknownError: '‰∏çÊòé„Å™„Ç®„É©„Éº',
                advancedMemoryTitle: 'üß† È´òÂ∫¶„Å™„É°„É¢„É™„Å®„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà',
                emotionalAnalysis: 'üòä ÊÑüÊÉÖÂàÜÊûê',
                lifeTimeline: 'üìÖ ‰∫∫Áîü„Çø„Ç§„É†„É©„Ç§„É≥',
                contextPatterns: 'üîç „Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Éë„Çø„Éº„É≥',
                addRelationship: 'üë• Èñ¢‰øÇÊÄßËøΩÂä†',
                addGoal: 'üéØ ÁõÆÊ®ôËøΩÂä†',
                addInterest: '‚≠ê ËààÂë≥ËøΩÂä†',
                addLongTermMemory: 'üíæ Èï∑ÊúüË®òÊÜ∂ËøΩÂä†',
                emotionalHelp: 'ÊôÇÈñìÁµåÈÅé„Å´„Çà„ÇãÊÑüÊÉÖÁä∂ÊÖã„Å®„Éà„É¨„É≥„Éâ„ÇíÂàÜÊûê„Åó„Åæ„Åô„ÄÇ',
                timelineHelp: 'ÊÑüÊÉÖÁöÑÂΩ±Èüø„ÇíÂê´„ÇÄ‰∫∫Áîü„Ç§„Éô„É≥„Éà„ÅÆ„Çø„Ç§„É†„É©„Ç§„É≥„ÇíË°®Á§∫„Åó„Åæ„Åô„ÄÇ',
                patternsHelp: '‰ºöË©±„Éë„Çø„Éº„É≥„Å®„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÇíÊé¢Á¥¢„Åó„Åæ„Åô„ÄÇ',
                relationshipHelp: 'ÈáçË¶Å„Å™Èñ¢‰øÇÊÄß„Å®„Å§„Å™„Åå„Çä„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ',
                goalHelp: 'ÂÄã‰∫∫„ÅÆÁõÆÊ®ô„Å®Ë®àÁîª„ÇíË®≠ÂÆö„ÉªËøΩË∑°„Åó„Åæ„Åô„ÄÇ',
                interestHelp: 'ËààÂë≥„ÄÅË∂£Âë≥„ÄÅÂ•Ω„Åø„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ',
                longTermHelp: 'ÈáçË¶Å„Å™Èï∑ÊúüË®òÊÜ∂„Å®ÁµåÈ®ì„Çí‰øùÂ≠ò„Åó„Åæ„Åô„ÄÇ',
                multimodalTitle: 'üîä „Éû„É´„ÉÅ„É¢„Éº„ÉÄ„É´Áµ±Âêà',
                voiceTitle: 'üé§ Èü≥Â£∞Âá¶ÁêÜ',
                voiceInputLabel: 'Èü≥Â£∞ÂÖ•Âäõ:',
                processVoice: 'Èü≥Â£∞Âá¶ÁêÜ',
                synthesizeVoice: 'Èü≥Â£∞ÂêàÊàê',
                videoTitle: 'üìπ ÂãïÁîªÂá¶ÁêÜ',
                videoInputLabel: 'ÂãïÁîªÂÖ•Âäõ:',
                processVideo: 'ÂãïÁîªÂá¶ÁêÜ',
                extractFrames: '„Éï„É¨„Éº„É†ÊäΩÂá∫',
                sensorTitle: 'üì° „Çª„É≥„Çµ„Éº„Éá„Éº„Çø',
                sensorTypeLabel: '„Çª„É≥„Çµ„Éº„Çø„Ç§„Éó:',
                temperature: 'Ê∏©Â∫¶',
                humidity: 'ÊπøÂ∫¶',
                light: 'ÁÖßÂ∫¶',
                motion: 'Âãï‰Ωú',
                processSensorData: '„Çª„É≥„Çµ„Éº„Éá„Éº„ÇøÂá¶ÁêÜ',
                sensorHistory: '„Çª„É≥„Çµ„ÉºÂ±•Ê≠¥',
                wearableTitle: '‚åö „Ç¶„Çß„Ç¢„É©„Éñ„É´„Éá„Éê„Ç§„Çπ',
                deviceTypeLabel: '„Éá„Éê„Ç§„Çπ„Çø„Ç§„Éó:',
                smartwatch: '„Çπ„Éû„Éº„Éà„Ç¶„Ç©„ÉÉ„ÉÅ',
                fitnessTracker: '„Éï„Ç£„ÉÉ„Éà„Éç„Çπ„Éà„É©„ÉÉ„Ç´„Éº',
                healthMonitor: 'ÂÅ•Â∫∑„É¢„Éã„Çø„Éº',
                connectDevice: '„Éá„Éê„Ç§„ÇπÊé•Á∂ö',
                getData: '„Éá„Éº„ÇøÂèñÂæó',
                healthTitle: '‚ù§Ô∏è ÂÅ•Â∫∑„É¢„Éã„Çø„É™„É≥„Ç∞',
                reportTypeLabel: '„É¨„Éù„Éº„Éà„Çø„Ç§„Éó:',
                daily: 'Êó•Ê¨°',
                weekly: 'ÈÄ±Ê¨°',
                monthly: 'ÊúàÊ¨°',
                processHealthData: 'ÂÅ•Â∫∑„Éá„Éº„ÇøÂá¶ÁêÜ',
                generateReport: '„É¨„Éù„Éº„ÉàÁîüÊàê',
                contextTitle: 'üîó „Éû„É´„ÉÅ„É¢„Éº„ÉÄ„É´„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà',
                generateContext: '„Ç≥„É≥„ÉÜ„Ç≠„Çπ„ÉàÁîüÊàê',
                checkStatus: 'Áä∂ÊÖãÁ¢∫Ë™ç',
                culturalTitle: 'üåç ÊñáÂåñÁöÑ„ÉªË®ÄË™ûÁöÑÊúÄÈÅ©Âåñ',
                languageSettings: 'Ë®ÄË™û„ÉªÊï¨Ë™û„É¨„Éô„É´Ë®≠ÂÆö',
                culturalLanguage: 'Ë®ÄË™û:',
                culturalFormality: 'Êï¨Ë™û„É¨„Éô„É´:',
                userAge: '„É¶„Éº„Ç∂„ÉºÂπ¥ÈΩ¢ (Êï¨Ë™û‰ΩøÁî®Áî®):',
                savePreferences: 'Ë®≠ÂÆö‰øùÂ≠ò',
                loadPreferences: 'Ë®≠ÂÆöË™≠„ÅøËæº„Åø',
                culturalExpression: 'ÊñáÂåñÁöÑË°®ÁèæÁîüÊàê',
                responseType: 'ÂøúÁ≠î„Çø„Ç§„Éó:',
                greeting: 'Êå®Êã∂',
                agreement: 'ÂêåÊÑè',
                disagreement: 'ÂèçÂØæ',
                gratitude: 'ÊÑüË¨ù',
                apology: 'Ë¨ùÁΩ™',
                encouragement: 'Âä±„Åæ„Åó',
                sympathy: 'ÂêåÊÉÖ',
                humor: '„É¶„Éº„É¢„Ç¢',
                generateResponse: 'ÂøúÁ≠îÁîüÊàê',
                generateGreeting: 'Êå®Êã∂ÁîüÊàê',
                conversationStarters: '‰ºöË©±„ÅÆÂßã„ÇÅÊñπ',
                conversationTopic: '„Éà„Éî„ÉÉ„ÇØ:',
                general: '‰∏ÄËà¨ÁöÑ',
                health: 'ÂÅ•Â∫∑',
                family: 'ÂÆ∂Êóè',
                generateStarter: 'Âßã„ÇÅÊñπÁîüÊàê',
                culturalEtiquette: 'ÊñáÂåñÁöÑ„Éû„Éä„Éº',
                etiquetteContext: '„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà:',
                elderly: 'È´òÈΩ¢ËÄÖ„Å∏„ÅÆÊï¨ÊÑè',
                communication: '„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥',
                getEtiquetteInfo: '„Éû„Éä„ÉºÊÉÖÂ†±ÂèñÂæó',
                applyCulturalContext: 'ÊñáÂåñÁöÑ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„ÉàÈÅ©Áî®',
                messageToEnhance: 'ÊîπÂñÑ„Åô„Çã„É°„ÉÉ„Çª„Éº„Ç∏:',
                enterMessageToEnhance: 'ÊñáÂåñÁöÑ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÇíÈÅ©Áî®„Åô„Çã„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
                applyContext: 'ÊñáÂåñÁöÑ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„ÉàÈÅ©Áî®'
            },
            zh: {
                title: 'üß† ËÆ§Áü•ÂäüËÉΩÊèêÂçáAIËÅäÂ§© (Kairos)',
                subtitle: 'Áî®‰∫éËÆ§Áü•ÂÅ•Â∫∑ÁöÑÂ∏¶ËÆ∞ÂøÜAIËÅäÂ§©',
                languageHelp: 'ÈÄâÊã©ÁïåÈù¢ËØ≠Ë®Ä„ÄÇ',
                apiUrlHelp: 'APIÊúçÂä°Âô®Âú∞ÂùÄ„ÄÇ‰æãÂ¶Ç: http://localhost:3000ÔºåÊú¨Êú∫ÔºõËøúÁ®ãÂèØÁî®ngrok URL„ÄÇ',
                apiKeyHelp: 'Áî®‰∫éÂêëÊúçÂä°Âô®ÊéàÊùÉÁöÑAPIÂØÜÈí•ÔºàBearer‰ª§ÁâåÔºâ„ÄÇ',
                userIdHelp: 'Áî®‰∫éÂ≠òÂÇ®/ËØªÂèñ‰∏™‰∫∫ËÆ∞ÂøÜ‰∏ä‰∏ãÊñáÁöÑÁî®Êà∑Ê†áËØÜ„ÄÇ',
                timeoutHelp: 'ËØ∑Ê±ÇË¢´ÂèñÊ∂àÂâçÁöÑÊúÄÈïøÁ≠âÂæÖÊó∂Èó¥ÔºàÁßíÔºâ„ÄÇ',
                modelHelp: 'ÈÄâÊã©Â∑≤ÂÆâË£ÖÁöÑÊ®°Âûã„ÄÇ‰ΩìÁßØÊõ¥Â§ßÁöÑÊ®°ÂûãÈúÄË¶ÅÊõ¥Â§öVRAM/CPUÔºåÂìçÂ∫îÊõ¥ÊÖ¢„ÄÇ',
                testHelp: 'Ê£ÄÊü•Âà∞APIÊúçÂä°Âô® /health ÁöÑËøûÈÄöÊÄß„ÄÇ',
                settingsTitle: 'ËÆæÁΩÆ',
                memoryManageTitle: 'ËÆ∞ÂøÜÁÆ°ÁêÜ',
                statsHelp: 'Êü•ÁúãÊÄªÊï∞Ôºà‰ºöËØù„ÄÅ‰∫ãÂÆû„ÄÅÂÅèÂ•ΩÔºâ„ÄÇ',
                memoryHelp: 'Êü•ÁúãËØ•Áî®Êà∑‰øùÂ≠òÁöÑËÆ∞ÂøÜÂÜÖÂÆπ„ÄÇ',
                addFactHelp: 'Âêë‰∏™‰∫∫ËÆ∞ÂøÜÊ∑ªÂä†‰∏Ä‰∏™‰∫ãÂÆû„ÄÇ',
                addPrefHelp: 'Ê∑ªÂä†‰∏Ä‰∏™ÂÅèÂ•ΩÔºà‰æãÂ¶ÇÔºöÂÅèÂ•ΩËØ≠Ë®ÄÔºâ„ÄÇ',
                deleteMemHelp: 'Âà†Èô§ÂΩìÂâçÁî®Êà∑ÁöÑÂÖ®ÈÉ®ËÆ∞ÂøÜ„ÄÇ',
                welcome: 'Ê¨¢ËøéÔºÅËØ∑ËÆæÁΩÆÁî®Êà∑IDÂπ∂ÂºÄÂßãËÅäÂ§©„ÄÇ',
                tip: 'ÊèêÁ§∫ÔºöÊ®°ÂûãÂàóË°®‰ºöËá™Âä®Âä†ËΩΩ„ÄÇÂ¶ÇÊú™ÊòæÁ§∫ÔºåËØ∑ÁÇπÂáªÂà∑Êñ∞„ÄÇ',
                timeoutError: '‚ùå ËØ∑Ê±ÇË∂ÖÊó∂„ÄÇËØ∑ÈáçËØï„ÄÇ',
                timeoutSolutions: 'Ëß£ÂÜ≥ÊñπÊ°àÔºö1) Â¢ûÂä†Ë∂ÖÊó∂Êó∂Èó¥ (180-300Áßí), 2) Â∞ùËØïËΩªÈáèÊ®°Âûã (llama3.1), 3) Ê£ÄÊü•ÁîµËÑëÈÖçÁΩÆ (GPU/VRAM), 4) ‰ΩøÁî®localhostËÄåÈùûngrok, 5) ÂÖ≥Èó≠ÂÖ∂‰ªñÂ∫îÁî®',
                computerRequirements: 'üíª ÁîµËÑëË¶ÅÊ±ÇÔºöÂ§ßÊ®°ÂûãÊé®Ëçê‰ΩøÁî®È´òÊÄßËÉΩGPU (8GB+ VRAM)„ÄÇ‰ªÖCPUÊ®°ÂºèËæÉÊÖ¢„ÄÇ',
                refreshModels: 'üîÑ Âà∑Êñ∞Ê®°ÂûãÂàóË°®',
                selectModel: 'ÈÄâÊã©Ê®°Âûã...',
                testConnection: 'üîó ÊµãËØïËøûÊé•',
                memoryStats: 'üìä ÂÜÖÂ≠òÁªüËÆ°',
                viewMemory: 'üìñ Êü•ÁúãÂÜÖÂ≠ò',
                addFact: '‚ûï Ê∑ªÂä†‰∫ãÂÆû',
                addPreference: '‚ûï Ê∑ªÂä†ÂÅèÂ•Ω',
                deleteMemory: 'üóëÔ∏è Âà†Èô§ÂÜÖÂ≠ò',
                send: 'ÂèëÈÄÅ',
                enterMessage: 'ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...',
                totalConversations: 'ÊÄª‰ºöËØùÊï∞Ôºö',
                totalFacts: 'ÊÄª‰∫ãÂÆûÊï∞Ôºö',
                totalPreferences: 'ÊÄªÂÅèÂ•ΩÊï∞Ôºö',
                createdDate: 'ÂàõÂª∫Êó•ÊúüÔºö',
                lastUpdated: 'ÊúÄÂêéÊõ¥Êñ∞Ôºö',
                loadingModels: 'üîÑ Ê≠£Âú®Âä†ËΩΩÊ®°ÂûãÂàóË°®...',
                modelsFound: '‚úÖ ÊâæÂà∞ {count} ‰∏™Ê®°Âûã',
                noModels: '‚ö†Ô∏è Êú™ÂÆâË£ÖÊ®°Âûã„ÄÇËØ∑Âú®Ollama‰∏≠‰∏ãËΩΩÊ®°Âûã„ÄÇ',
                modelLoadTimeout: '‚ùå Ê®°ÂûãÂàóË°®Âä†ËΩΩË∂ÖÊó∂„ÄÇËØ∑ÈáçËØï„ÄÇ',
                serverConnectionError: '‚ùå Êó†Ê≥ïËøûÊé•Âà∞ÊúçÂä°Âô®„ÄÇËØ∑Ê£ÄÊü•ÊúçÂä°Âô®ÊòØÂê¶ËøêË°å„ÄÇ',
                modelLoadError: '‚ùå Ê®°ÂûãÂàóË°®Âä†ËΩΩÂ§±Ë¥•Ôºö{error}',
                defaultModelSelected: '‚úÖ Â∑≤ÈÄâÊã©ÈªòËÆ§Ê®°ÂûãÔºö{model}',
                modelSelected: '‚úÖ Â∑≤ÈÄâÊã©Ê®°ÂûãÔºö{model}',
                responseDelay: '‚ö†Ô∏è ÂìçÂ∫îÊó∂Èó¥ËæÉÈïøÔºåËØ∑Á®çÂÄô...',
                connectionError: 'ËøûÊé•ÈîôËØØÔºö{error}',
                unknownError: 'Êú™Áü•ÈîôËØØ',
                advancedMemoryTitle: 'üß† È´òÁ∫ßËÆ∞ÂøÜ‰∏é‰∏ä‰∏ãÊñá',
                emotionalAnalysis: 'üòä ÊÉÖÊÑüÂàÜÊûê',
                lifeTimeline: 'üìÖ ‰∫∫ÁîüÊó∂Èó¥Á∫ø',
                contextPatterns: 'üîç ‰∏ä‰∏ãÊñáÊ®°Âºè',
                addRelationship: 'üë• Ê∑ªÂä†ÂÖ≥Á≥ª',
                addGoal: 'üéØ Ê∑ªÂä†ÁõÆÊ†á',
                addInterest: '‚≠ê Ê∑ªÂä†ÂÖ¥Ë∂£',
                addLongTermMemory: 'üíæ Ê∑ªÂä†ÈïøÊúüËÆ∞ÂøÜ',
                emotionalHelp: 'ÂàÜÊûêÈöèÊó∂Èó¥ÂèòÂåñÁöÑÊÉÖÊÑüÁä∂ÊÄÅÂíåË∂ãÂäø„ÄÇ',
                timelineHelp: 'Êü•ÁúãÂåÖÂê´ÊÉÖÊÑüÂΩ±ÂìçÁöÑ‰∫∫Áîü‰∫ã‰ª∂Êó∂Èó¥Á∫ø„ÄÇ',
                patternsHelp: 'Êé¢Á¥¢ÂØπËØùÊ®°ÂºèÂíå‰∏ä‰∏ãÊñá„ÄÇ',
                relationshipHelp: 'Ê∑ªÂä†ÈáçË¶ÅÁöÑÂÖ≥Á≥ªÂíåËøûÊé•„ÄÇ',
                goalHelp: 'ËÆæÁΩÆÂíåË∑üË∏™‰∏™‰∫∫ÁõÆÊ†áÂíåËÆ°Âàí„ÄÇ',
                interestHelp: 'Ê∑ªÂä†ÂÖ¥Ë∂£„ÄÅÁà±Â•ΩÂíåÂÅèÂ•Ω„ÄÇ',
                longTermHelp: 'Â≠òÂÇ®ÈáçË¶ÅÁöÑÈïøÊúüËÆ∞ÂøÜÂíåÁªèÈ™å„ÄÇ',
                multimodalTitle: 'üîä Â§öÊ®°ÊÄÅÈõÜÊàê',
                voiceTitle: 'üé§ ËØ≠Èü≥Â§ÑÁêÜ',
                voiceInputLabel: 'ËØ≠Èü≥ËæìÂÖ•:',
                processVoice: 'ËØ≠Èü≥Â§ÑÁêÜ',
                synthesizeVoice: 'ËØ≠Èü≥ÂêàÊàê',
                videoTitle: 'üìπ ËßÜÈ¢ëÂ§ÑÁêÜ',
                videoInputLabel: 'ËßÜÈ¢ëËæìÂÖ•:',
                processVideo: 'ËßÜÈ¢ëÂ§ÑÁêÜ',
                extractFrames: 'Â∏ßÊèêÂèñ',
                sensorTitle: 'üì° ‰º†ÊÑüÂô®Êï∞ÊçÆ',
                sensorTypeLabel: '‰º†ÊÑüÂô®Á±ªÂûã:',
                temperature: 'Ê∏©Â∫¶',
                humidity: 'ÊπøÂ∫¶',
                light: 'ÂÖâÁÖß',
                motion: 'ËøêÂä®',
                processSensorData: '‰º†ÊÑüÂô®Êï∞ÊçÆÂ§ÑÁêÜ',
                sensorHistory: '‰º†ÊÑüÂô®ÂéÜÂè≤',
                wearableTitle: '‚åö ÂèØÁ©øÊà¥ËÆæÂ§á',
                deviceTypeLabel: 'ËÆæÂ§áÁ±ªÂûã:',
                smartwatch: 'Êô∫ËÉΩÊâãË°®',
                fitnessTracker: 'ÂÅ•Ë∫´ËøΩË∏™Âô®',
                healthMonitor: 'ÂÅ•Â∫∑ÁõëÊµãÂô®',
                connectDevice: 'ËøûÊé•ËÆæÂ§á',
                getData: 'Ëé∑ÂèñÊï∞ÊçÆ',
                healthTitle: '‚ù§Ô∏è ÂÅ•Â∫∑ÁõëÊµã',
                reportTypeLabel: 'Êä•ÂëäÁ±ªÂûã:',
                daily: 'ÊØèÊó•',
                weekly: 'ÊØèÂë®',
                monthly: 'ÊØèÊúà',
                processHealthData: 'ÂÅ•Â∫∑Êï∞ÊçÆÂ§ÑÁêÜ',
                generateReport: 'ÁîüÊàêÊä•Âëä',
                contextTitle: 'üîó Â§öÊ®°ÊÄÅ‰∏ä‰∏ãÊñá',
                generateContext: 'ÁîüÊàê‰∏ä‰∏ãÊñá',
                checkStatus: 'Ê£ÄÊü•Áä∂ÊÄÅ',
                culturalTitle: 'üåç ÊñáÂåñ‰∏éËØ≠Ë®Ä‰ºòÂåñ',
                languageSettings: 'ËØ≠Ë®Ä‰∏éÁ§ºË≤åÁ∫ßÂà´ËÆæÁΩÆ',
                culturalLanguage: 'ËØ≠Ë®Ä:',
                culturalFormality: 'Á§ºË≤åÁ∫ßÂà´:',
                userAge: 'Áî®Êà∑Âπ¥ÈæÑ (Áî®‰∫éÊï¨ËØ≠):',
                savePreferences: '‰øùÂ≠òÂÅèÂ•Ω',
                loadPreferences: 'Âä†ËΩΩÂÅèÂ•Ω',
                culturalExpression: 'ÊñáÂåñË°®ËææÁîüÊàê',
                responseType: 'ÂõûÂ∫îÁ±ªÂûã:',
                greeting: 'ÈóÆÂÄô',
                agreement: 'ÂêåÊÑè',
                disagreement: '‰∏çÂêåÊÑè',
                gratitude: 'ÊÑüË∞¢',
                apology: 'ÈÅìÊ≠â',
                encouragement: 'ÈºìÂä±',
                sympathy: 'ÂêåÊÉÖ',
                humor: 'ÂπΩÈªò',
                generateResponse: 'ÁîüÊàêÂõûÂ∫î',
                generateGreeting: 'ÁîüÊàêÈóÆÂÄô',
                conversationStarters: 'ÂØπËØùÂºÄÂú∫ÁôΩ',
                conversationTopic: 'ËØùÈ¢ò:',
                general: '‰∏ÄËà¨',
                health: 'ÂÅ•Â∫∑',
                family: 'ÂÆ∂Â∫≠',
                generateStarter: 'ÁîüÊàêÂºÄÂú∫ÁôΩ',
                culturalEtiquette: 'ÊñáÂåñÁ§º‰ª™',
                etiquetteContext: '‰∏ä‰∏ãÊñá:',
                elderly: 'ÂØπÈïøËÄÖÁöÑÂ∞äÈáç',
                communication: 'Ê≤üÈÄö',
                getEtiquetteInfo: 'Ëé∑ÂèñÁ§º‰ª™‰ø°ÊÅØ',
                applyCulturalContext: 'Â∫îÁî®ÊñáÂåñ‰∏ä‰∏ãÊñá',
                messageToEnhance: 'Ë¶ÅÂ¢ûÂº∫ÁöÑÊ∂àÊÅØ:',
                enterMessageToEnhance: 'ËæìÂÖ•Ë¶ÅÂ∫îÁî®ÊñáÂåñ‰∏ä‰∏ãÊñáÁöÑÊ∂àÊÅØ...',
                applyContext: 'Â∫îÁî®ÊñáÂåñ‰∏ä‰∏ãÊñá'
            }
        };

        function applyTranslations(lang) {
            const t = i18n[lang] || i18n.en;
            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('settingsTitle').textContent = t.settingsTitle;
            document.getElementById('memoryManageTitle').textContent = t.memoryManageTitle;
            document.getElementById('languageHelp').textContent = t.languageHelp;
            document.getElementById('apiUrlHelp').textContent = t.apiUrlHelp;
            document.getElementById('apiKeyHelp').textContent = t.apiKeyHelp;
            document.getElementById('userIdHelp').textContent = t.userIdHelp;
            document.getElementById('timeoutHelp').textContent = t.timeoutHelp;
            document.getElementById('modelHelp').textContent = t.modelHelp;
            document.getElementById('testConnectionHelp').textContent = t.testHelp;
            document.getElementById('statsHelp').textContent = t.statsHelp;
            document.getElementById('memoryHelp').textContent = t.memoryHelp;
            document.getElementById('addFactHelp').textContent = t.addFactHelp;
            document.getElementById('addPrefHelp').textContent = t.addPrefHelp;
            document.getElementById('deleteMemHelp').textContent = t.deleteMemHelp;
            document.getElementById('welcomeMessage').textContent = t.welcome;
            document.getElementById('tipMessage').textContent = `üí° ${t.tip}`;
            
            // Update button texts
            document.getElementById('refreshModelsBtn').textContent = t.refreshModels;
            document.getElementById('testConnectionBtn').textContent = t.testConnection;
            document.getElementById('loadMemoryStatsBtn').textContent = t.memoryStats;
            document.getElementById('loadUserMemoryBtn').textContent = t.viewMemory;
            document.getElementById('addFactBtn').textContent = t.addFact;
            document.getElementById('addPreferenceBtn').textContent = t.addPreference;
            document.getElementById('deleteMemoryBtn').textContent = t.deleteMemory;
            document.getElementById('sendMessageBtn').textContent = t.send;
            
            // Update placeholders
            document.getElementById('model').options[0].textContent = t.selectModel;
            document.getElementById('messageInput').placeholder = t.enterMessage;
            
            // Update memory stats labels
            const statsLabels = document.querySelectorAll('.stats-label');
            if (statsLabels.length > 0) {
                statsLabels[0].textContent = t.totalConversations;
                statsLabels[1].textContent = t.totalFacts;
                statsLabels[2].textContent = t.totalPreferences;
                statsLabels[3].textContent = t.createdDate;
                statsLabels[4].textContent = t.lastUpdated;
            }
            
            // Update advanced memory section
            const advancedMemoryTitle = document.getElementById('advancedMemoryTitle');
            if (advancedMemoryTitle) advancedMemoryTitle.textContent = t.advancedMemoryTitle;
            
            // Update advanced memory buttons
            const advancedButtons = {
                'loadEmotionalStatsBtn': t.emotionalAnalysis,
                'loadTimelineBtn': t.lifeTimeline,
                'loadPatternsBtn': t.contextPatterns,
                'addRelationshipBtn': t.addRelationship,
                'addGoalBtn': t.addGoal,
                'addInterestBtn': t.addInterest,
                'addLongTermMemoryBtn': t.addLongTermMemory
            };
            
            for (const [id, text] of Object.entries(advancedButtons)) {
                const element = document.getElementById(id);
                if (element) element.textContent = text;
            }
            
            // Update help texts
            const helpTexts = {
                'emotionalHelp': t.emotionalHelp,
                'timelineHelp': t.timelineHelp,
                'patternsHelp': t.patternsHelp,
                'relationshipHelp': t.relationshipHelp,
                'goalHelp': t.goalHelp,
                'interestHelp': t.interestHelp,
                'longTermHelp': t.longTermHelp
            };
            
            for (const [id, text] of Object.entries(helpTexts)) {
                const element = document.getElementById(id);
                if (element) element.textContent = text;
            }
            
            // Update multimodal section
            const multimodalTitle = document.getElementById('multimodalTitle');
            if (multimodalTitle) multimodalTitle.textContent = t.multimodalTitle;
            
            // Update brain research computing section
            const brainResearchTitle = document.getElementById('brainResearchTitle');
            if (brainResearchTitle) brainResearchTitle.textContent = t.brainResearchTitle;
            
            const brainResearchDescription = document.getElementById('brainResearchDescription');
            if (brainResearchDescription) brainResearchDescription.textContent = t.brainResearchDescription;
            
            const capabilitiesTitle = document.getElementById('capabilitiesTitle');
            if (capabilitiesTitle) capabilitiesTitle.textContent = t.capabilitiesTitle;
            
            const availableJobsTitle = document.getElementById('availableJobsTitle');
            if (availableJobsTitle) availableJobsTitle.textContent = t.availableJobsTitle;
            
            const currentJobTitle = document.getElementById('currentJobTitle');
            if (currentJobTitle) currentJobTitle.textContent = t.currentJobTitle;
            
            const contributionTitle = document.getElementById('contributionTitle');
            if (contributionTitle) contributionTitle.textContent = t.contributionTitle;
            
            const researchStatsTitle = document.getElementById('researchStatsTitle');
            if (researchStatsTitle) researchStatsTitle.textContent = t.researchStatsTitle;
            
            // Update multimodal subsections
            const multimodalElements = {
                'voiceTitle': t.voiceTitle,
                'voiceInputLabel': t.voiceInputLabel,
                'processVoiceBtn': t.processVoice,
                'synthesizeVoiceBtn': t.synthesizeVoice,
                'videoTitle': t.videoTitle,
                'videoInputLabel': t.videoInputLabel,
                'processVideoBtn': t.processVideo,
                'extractFramesBtn': t.extractFrames,
                'sensorTitle': t.sensorTitle,
                'sensorTypeLabel': t.sensorTypeLabel,
                'processSensorBtn': t.processSensorData,
                'loadSensorHistoryBtn': t.sensorHistory,
                'wearableTitle': t.wearableTitle,
                'deviceTypeLabel': t.deviceTypeLabel,
                'connectWearableBtn': t.connectDevice,
                'getWearableDataBtn': t.getData,
                'healthTitle': t.healthTitle,
                'reportTypeLabel': t.reportTypeLabel,
                'processHealthBtn': t.processHealthData,
                'generateHealthReportBtn': t.generateReport,
                'contextTitle': t.contextTitle,
                'generateContextBtn': t.generateContext,
                'checkMultimodalStatusBtn': t.checkStatus
            };
            
            for (const [id, text] of Object.entries(multimodalElements)) {
                const element = document.getElementById(id);
                if (element) element.textContent = text;
            }
            
            // Update sensor type options
            const sensorType = document.getElementById('sensorType');
            if (sensorType) {
                sensorType.options[0].textContent = t.temperature;
                sensorType.options[1].textContent = t.humidity;
                sensorType.options[2].textContent = t.light;
                sensorType.options[3].textContent = t.motion;
            }
            
            // Update device type options
            const deviceType = document.getElementById('deviceType');
            if (deviceType) {
                deviceType.options[0].textContent = t.smartwatch;
                deviceType.options[1].textContent = t.fitnessTracker;
                deviceType.options[2].textContent = t.healthMonitor;
            }
            
            // Update report type options
            const reportType = document.getElementById('reportType');
            if (reportType) {
                reportType.options[0].textContent = t.daily;
                reportType.options[1].textContent = t.weekly;
                reportType.options[2].textContent = t.monthly;
            }
            
            // Update cultural optimization section
            const culturalTitle = document.getElementById('culturalTitle');
            if (culturalTitle) culturalTitle.textContent = t.culturalTitle;
            
            // Update cultural optimization subsections
            const culturalElements = {
                'languageSettings': t.languageSettings,
                'culturalLanguage': t.culturalLanguage,
                'culturalFormality': t.culturalFormality,
                'userAge': t.userAge,
                'saveCulturalPrefsBtn': t.savePreferences,
                'loadCulturalPrefsBtn': t.loadPreferences,
                'culturalExpression': t.culturalExpression,
                'responseType': t.responseType,
                'generateCulturalResponseBtn': t.generateResponse,
                'generateGreetingBtn': t.generateGreeting,
                'conversationStarters': t.conversationStarters,
                'conversationTopic': t.conversationTopic,
                'generateConversationStarterBtn': t.generateStarter,
                'culturalEtiquette': t.culturalEtiquette,
                'etiquetteContext': t.etiquetteContext,
                'getCulturalEtiquetteBtn': t.getEtiquetteInfo,
                'applyCulturalContext': t.applyCulturalContext,
                'messageToEnhance': t.messageToEnhance,
                'applyCulturalContextBtn': t.applyContext
            };
            
            for (const [id, text] of Object.entries(culturalElements)) {
                const element = document.getElementById(id);
                if (element) element.textContent = text;
            }
            
            // Update response type options
            const responseType = document.getElementById('responseType');
            if (responseType) {
                responseType.options[0].textContent = t.greeting;
                responseType.options[1].textContent = t.agreement;
                responseType.options[2].textContent = t.disagreement;
                responseType.options[3].textContent = t.gratitude;
                responseType.options[4].textContent = t.apology;
                responseType.options[5].textContent = t.encouragement;
                responseType.options[6].textContent = t.sympathy;
                responseType.options[7].textContent = t.humor;
            }
            
            // Update conversation topic options
            const conversationTopic = document.getElementById('conversationTopic');
            if (conversationTopic) {
                conversationTopic.options[0].textContent = t.general;
                conversationTopic.options[1].textContent = t.health;
                conversationTopic.options[2].textContent = t.family;
            }
            
            // Update etiquette context options
            const etiquetteContext = document.getElementById('etiquetteContext');
            if (etiquetteContext) {
                etiquetteContext.options[0].textContent = t.general;
                etiquetteContext.options[1].textContent = t.elderly;
                etiquetteContext.options[2].textContent = t.communication;
            }
            
            // Update placeholders
            const messageToEnhance = document.getElementById('messageToEnhance');
            if (messageToEnhance) messageToEnhance.placeholder = t.enterMessageToEnhance;
        }

        // Î™®Îç∏ Î™©Î°ù Î°úÎìú / Load model list / Charger la liste des mod√®les / „É¢„Éá„É´‰∏ÄË¶ß„ÇíË™≠„ÅøËæº„ÇÄ / Âä†ËΩΩÊ®°ÂûãÂàóË°®
        async function loadModels() {
            const config = getConfig();
            
            // API URL Í≤ÄÏ¶ù
            if (!config.apiUrl || config.apiUrl === '') {
                const currentLang = document.getElementById('languageSelect').value;
                const t = i18n[currentLang] || i18n.en;
                showStatus('‚ùå ' + t.apiUrlHelp.split('.')[0], 'error');
                return;
            }
            
                        try {
                const currentLang = document.getElementById('languageSelect').value;
                const t = i18n[currentLang] || i18n.en;
                showStatus(t.loadingModels, 'info');
                
                // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (30Ï¥à)
                const timeoutDuration = 30000;
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);
                
                const response = await fetch(`${config.apiUrl}/api/models`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);

                if (response.ok) {
                    const data = await response.json();
                    if (data.models && data.models.length > 0) {
                        populateModelSelect(data.models);
                        const currentLang = document.getElementById('languageSelect').value;
                        const t = i18n[currentLang] || i18n.en;
                        showStatus(t.modelsFound.replace('{count}', data.models.length), 'success');
                    } else {
                        const currentLang = document.getElementById('languageSelect').value;
                        const t = i18n[currentLang] || i18n.en;
                        showStatus(t.noModels, 'info');
                    }
                } else {
                    const errorText = await response.text();
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    showStatus(`‚ùå HTTP ${response.status}`, 'error');
                    console.error('Response error:', errorText);
                }
            } catch (error) {
                const currentLang = document.getElementById('languageSelect').value;
                const t = i18n[currentLang] || i18n.en;
                if (error.name === 'AbortError') {
                    showStatus(t.modelLoadTimeout, 'error');
                } else if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {
                    showStatus(t.serverConnectionError, 'error');
                } else {
                    showStatus(t.modelLoadError.replace('{error}', error.message), 'error');
                }
                console.error('Fetch error:', error);
            }
        }

        // Î™®Îç∏ ÏÑ†ÌÉù ÏòµÏÖò Ï±ÑÏö∞Í∏∞ / Populate model select / Remplir la liste des mod√®les / „É¢„Éá„É´ÈÅ∏Êäû„Å´ÂèçÊò† / Â°´ÂÖÖÊ®°Âûã‰∏ãÊãâ
        function populateModelSelect(models) {
            const modelSelect = document.getElementById('model');
            
            // Í∏∞Ï°¥ ÏòµÏÖòÎì§ Ï†úÍ±∞ (Ï≤´ Î≤àÏß∏ "Î™®Îç∏ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî" ÏòµÏÖò Ï†úÏô∏)
            while (modelSelect.children.length > 1) {
                modelSelect.removeChild(modelSelect.lastChild);
            }
            
            // ÏÉà Î™®Îç∏Îì§ Ï∂îÍ∞Ä
            models.forEach(model => {
                const option = document.createElement('option');
                option.value = model.name;
                option.textContent = `${model.name} (${formatFileSize(model.size)})`;
                modelSelect.appendChild(option);
            });
            
            // Í∏∞Î≥∏ Î™®Îç∏ ÏûêÎèô ÏÑ†ÌÉù
            if (models.length > 0) {
                // jinbora/deepseek-r1-Bllossom:8b Î™®Îç∏Ïù¥ ÏûàÏúºÎ©¥ Ïö∞ÏÑ† ÏÑ†ÌÉù
                const preferredModel = models.find(model => 
                    model.name.includes('jinbora/deepseek-r1-Bllossom:8b') ||
                    model.name.includes('deepseek') ||
                    model.name.includes('llama') ||
                    model.name.includes('mistral')
                );
                
                if (preferredModel) {
                    modelSelect.value = preferredModel.name;
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    showStatus(t.defaultModelSelected.replace('{model}', preferredModel.name), 'success');
                } else {
                    // Ï≤´ Î≤àÏß∏ Î™®Îç∏ ÏÑ†ÌÉù
                    modelSelect.value = models[0].name;
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    showStatus(t.modelSelected.replace('{model}', models[0].name), 'success');
                }
            }
        }

        // ÌååÏùº ÌÅ¨Í∏∞ Ìè¨Îß∑ÌåÖ / Format file size / Formater la taille / „Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫Êï¥ÂΩ¢ / Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Ïó∞Í≤∞ ÌÖåÏä§Ìä∏ / Connection test / Test de connexion / Êé•Á∂ö„ÉÜ„Çπ„Éà / ËøûÊé•ÊµãËØï
        async function testConnection() {
            const config = getConfig();
            
            try {
                showStatus('üîó ÏÑúÎ≤ÑÏóê Ïó∞Í≤∞ Ï§ë...', 'info');
                
                // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (30Ï¥à)
                const timeoutDuration = 30000;
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);
                
                const response = await fetch(`${config.apiUrl}/health`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);

                if (response.ok) {
                    const data = await response.json();
                    showStatus(`‚úÖ Ïó∞Í≤∞ ÏÑ±Í≥µ! ÏÑúÎ≤Ñ ÏÉÅÌÉú: ${data.status}`, 'success');
                } else {
                    showStatus('‚ùå Ïó∞Í≤∞ Ïã§Ìå®: ÏÑúÎ≤Ñ ÏùëÎãµ Ïò§Î•ò', 'error');
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    showStatus('‚ùå Ïó∞Í≤∞ ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                } else {
                    showStatus(`‚ùå Ïó∞Í≤∞ Ïã§Ìå®: ${error.message}`, 'error');
                }
            }
        }

        // Î©îÎ™®Î¶¨ ÌÜµÍ≥Ñ Î°úÎìú / Load memory stats / Charger les statistiques / „É°„É¢„É™Áµ±Ë®àË™≠„ÅøËæº„Åø / Âä†ËΩΩËÆ∞ÂøÜÁªüËÆ°
        async function loadMemoryStats() {
            const config = getConfig();
            
            try {
                // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (30Ï¥à)
                const timeoutDuration = 30000;
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);
                
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/stats`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);

                if (response.ok) {
                    const stats = await response.json();
                    displayMemoryStats(stats);
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    showStatus('‚úÖ Memory stats loaded', 'success');
                } else {
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    showStatus('‚ùå Memory stats load failed', 'error');
                }
            } catch (error) {
                const currentLang = document.getElementById('languageSelect').value;
                const t = i18n[currentLang] || i18n.en;
                if (error.name === 'AbortError') {
                    showStatus('‚ùå Memory stats load timeout', 'error');
                } else {
                    showStatus(`‚ùå Memory stats load failed: ${error.message}`, 'error');
                }
            }
        }

        // Î©îÎ™®Î¶¨ ÌÜµÍ≥Ñ ÌëúÏãú / Display memory stats / Afficher statistiques / Áµ±Ë®àË°®Á§∫ / ÊòæÁ§∫ÁªüËÆ°
        function displayMemoryStats(stats) {
            const currentLang = document.getElementById('languageSelect').value;
            const t = i18n[currentLang] || i18n.en;
            statsContent.innerHTML = `
                <div class="stat-item">
                    <span class="stats-label">${t.totalConversations}</span>
                    <span class="stat-value">${stats.totalConversations}</span>
                </div>
                <div class="stat-item">
                    <span class="stats-label">${t.totalFacts}</span>
                    <span class="stat-value">${stats.totalFacts}</span>
                </div>
                <div class="stat-item">
                    <span class="stats-label">${t.totalPreferences}</span>
                    <span class="stat-value">${stats.totalPreferences}</span>
                </div>
                <div class="stat-item">
                    <span class="stats-label">${t.createdDate}</span>
                    <span class="stat-value">${new Date(stats.createdAt).toLocaleDateString()}</span>
                </div>
                <div class="stat-item">
                    <span class="stats-label">${t.lastUpdated}</span>
                    <span class="stat-value">${new Date(stats.lastUpdated).toLocaleDateString()}</span>
                </div>
            `;
            memoryStats.style.display = 'block';
        }

        // ÏÇ¨Ïö©Ïûê Î©îÎ™®Î¶¨ Î°úÎìú / Load user memory / Charger la m√©moire utilisateur / „É¶„Éº„Ç∂„Éº„É°„É¢„É™Ë™≠„ÅøËæº„Åø / Âä†ËΩΩÁî®Êà∑ËÆ∞ÂøÜ
        async function loadUserMemory() {
            const config = getConfig();
            
            try {
                // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (30Ï¥à)
                const timeoutDuration = 30000;
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);
                
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);

                if (response.ok) {
                    memoryData = await response.json();
                    displayMemoryData(memoryData);
                    showStatus('‚úÖ ÏÇ¨Ïö©Ïûê Î©îÎ™®Î¶¨ Î°úÎìú ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå ÏÇ¨Ïö©Ïûê Î©îÎ™®Î¶¨ Î°úÎìú Ïã§Ìå®', 'error');
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    showStatus('‚ùå ÏÇ¨Ïö©Ïûê Î©îÎ™®Î¶¨ Î°úÎìú ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                } else {
                    showStatus(`‚ùå ÏÇ¨Ïö©Ïûê Î©îÎ™®Î¶¨ Î°úÎìú Ïã§Ìå®: ${error.message}`, 'error');
                }
            }
        }

        // Î©îÎ™®Î¶¨ Îç∞Ïù¥ÌÑ∞ ÌëúÏãú / Display memory data / Afficher la m√©moire / „É°„É¢„É™ÂÜÖÂÆπË°®Á§∫ / ÊòæÁ§∫ËÆ∞ÂøÜÂÜÖÂÆπ
        function displayMemoryData(memory) {
            // ÏÇ¨Ïù¥ÎìúÎ∞îÏóê Î©îÎ™®Î¶¨ ÎÇ¥Ïö© ÌëúÏãú
            const sidebar = document.querySelector('.sidebar');
            
            // Í∏∞Ï°¥ Î©îÎ™®Î¶¨ ÌëúÏãú ÏòÅÏó≠ Ï†úÍ±∞
            const existingMemoryDisplay = document.getElementById('memoryDisplay');
            if (existingMemoryDisplay) {
                existingMemoryDisplay.remove();
            }

            const memoryDisplay = document.createElement('div');
            memoryDisplay.id = 'memoryDisplay';
            memoryDisplay.className = 'config-section';
            memoryDisplay.innerHTML = '<h3>üìñ Î©îÎ™®Î¶¨ ÎÇ¥Ïö©</h3>';

            // ÏÇ¨Ïã§Îì§ ÌëúÏãú
            if (memory.facts.length > 0) {
                memoryDisplay.innerHTML += '<h4>ÏÇ¨Ïã§Îì§:</h4>';
                memory.facts.forEach(fact => {
                    memoryDisplay.innerHTML += `
                        <div class="memory-item">
                            <div class="timestamp">${new Date(fact.timestamp).toLocaleString()}</div>
                            <div class="content">${fact.content}</div>
                        </div>
                    `;
                });
            }

            // ÏÑ†Ìò∏ÎèÑÎì§ ÌëúÏãú
            if (memory.preferences.length > 0) {
                memoryDisplay.innerHTML += '<h4>ÏÑ†Ìò∏ÎèÑ:</h4>';
                memory.preferences.forEach(pref => {
                    memoryDisplay.innerHTML += `
                        <div class="memory-item">
                            <div class="timestamp">${new Date(pref.timestamp).toLocaleString()}</div>
                            <div class="content">${pref.preference}: ${pref.value}</div>
                        </div>
                    `;
                });
            }

            sidebar.appendChild(memoryDisplay);
        }

        // ÏÇ¨Ïã§ Ï∂îÍ∞Ä / Add fact / Ajouter un fait / ‰∫ãÂÆü„ÇíËøΩÂä† / Ê∑ªÂä†‰∫ãÂÆû
        async function addFact() {
            const fact = prompt('Ï∂îÍ∞ÄÌï† ÏÇ¨Ïã§ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
            if (!fact) return;

            const category = prompt('Ïπ¥ÌÖåÍ≥†Î¶¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Í∏∞Î≥∏Í∞í: general):') || 'general';
            const config = getConfig();

            try {
                // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (30Ï¥à)
                const timeoutDuration = 30000;
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);
                
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/facts`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({ fact, category }),
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);

                if (response.ok) {
                    showStatus('‚úÖ ÏÇ¨Ïã§ Ï∂îÍ∞Ä ÏôÑÎ£å', 'success');
                    loadMemoryStats();
                } else {
                    showStatus('‚ùå ÏÇ¨Ïã§ Ï∂îÍ∞Ä Ïã§Ìå®', 'error');
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    showStatus('‚ùå ÏÇ¨Ïã§ Ï∂îÍ∞Ä ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                } else {
                    showStatus(`‚ùå ÏÇ¨Ïã§ Ï∂îÍ∞Ä Ïã§Ìå®: ${error.message}`, 'error');
                }
            }
        }

        // ÏÑ†Ìò∏ÎèÑ Ï∂îÍ∞Ä / Add preference / Ajouter une pr√©f√©rence / ÂóúÂ•Ω„ÇíËøΩÂä† / Ê∑ªÂä†ÂÅèÂ•Ω
        async function addPreference() {
            const preference = prompt('ÏÑ†Ìò∏ÎèÑ Ìï≠Î™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: ÌîÑÎ°úÍ∑∏ÎûòÎ∞ç Ïñ∏Ïñ¥):');
            if (!preference) return;

            const value = prompt('ÏÑ†Ìò∏ÎèÑ Í∞íÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: Python, JavaScript):');
            if (!value) return;

            const config = getConfig();

            try {
                // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (30Ï¥à)
                const timeoutDuration = 30000;
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);
                
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/preferences`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({ preference, value }),
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);

                if (response.ok) {
                    showStatus('‚úÖ ÏÑ†Ìò∏ÎèÑ Ï∂îÍ∞Ä ÏôÑÎ£å', 'success');
                    loadMemoryStats();
                } else {
                    showStatus('‚ùå ÏÑ†Ìò∏ÎèÑ Ï∂îÍ∞Ä Ïã§Ìå®', 'error');
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    showStatus('‚ùå ÏÑ†Ìò∏ÎèÑ Ï∂îÍ∞Ä ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                } else {
                    showStatus(`‚ùå ÏÑ†Ìò∏ÎèÑ Ï∂îÍ∞Ä Ïã§Ìå®: ${error.message}`, 'error');
                }
            }
        }

        // Î©îÎ™®Î¶¨ ÏÇ≠Ï†ú / Delete memory / Supprimer la m√©moire / „É°„É¢„É™ÂâäÈô§ / Âà†Èô§ËÆ∞ÂøÜ
        async function deleteMemory() {
            if (!confirm('Ï†ïÎßêÎ°ú Î™®Îì† Î©îÎ™®Î¶¨Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;

            const config = getConfig();

            try {
                // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (30Ï¥à)
                const timeoutDuration = 30000;
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);
                
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);

                if (response.ok) {
                    showStatus('‚úÖ Î©îÎ™®Î¶¨ ÏÇ≠Ï†ú ÏôÑÎ£å', 'success');
                    memoryStats.style.display = 'none';
                    const memoryDisplay = document.getElementById('memoryDisplay');
                    if (memoryDisplay) memoryDisplay.remove();
                } else {
                    showStatus('‚ùå Î©îÎ™®Î¶¨ ÏÇ≠Ï†ú Ïã§Ìå®', 'error');
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    showStatus('‚ùå Î©îÎ™®Î¶¨ ÏÇ≠Ï†ú ÏãúÍ∞ÑÏù¥ Ï¥àÍ≥ºÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                } else {
                    showStatus(`‚ùå Î©îÎ™®Î¶¨ ÏÇ≠Ï†ú Ïã§Ìå®: ${error.message}`, 'error');
                }
            }
        }

        // Í∞êÏ†ï ÏÉÅÌÉú ÌÜµÍ≥Ñ Ï°∞Ìöå / Load emotional stats / Charger les statistiques √©motionnelles / ÊÑüÊÉÖÁµ±Ë®àË™≠„ÅøËæº„Åø / Âä†ËΩΩÊÉÖÊÑüÁªüËÆ°
        async function loadEmotionalStats() {
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/emotions`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    }
                });

                if (response.ok) {
                    const emotionalStats = await response.json();
                    displayEmotionalStats(emotionalStats);
                    showStatus('‚úÖ Í∞êÏ†ï ÏÉÅÌÉú ÌÜµÍ≥Ñ Î°úÎìú ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå Í∞êÏ†ï ÏÉÅÌÉú ÌÜµÍ≥Ñ Î°úÎìú Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Í∞êÏ†ï ÏÉÅÌÉú ÌÜµÍ≥Ñ Î°úÎìú Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // Í∞êÏ†ï ÏÉÅÌÉú ÌÜµÍ≥Ñ ÌëúÏãú / Display emotional stats / Afficher les statistiques √©motionnelles / ÊÑüÊÉÖÁµ±Ë®àË°®Á§∫ / ÊòæÁ§∫ÊÉÖÊÑüÁªüËÆ°
        function displayEmotionalStats(stats) {
            const emotionalDisplay = document.createElement('div');
            emotionalDisplay.id = 'emotionalDisplay';
            emotionalDisplay.className = 'memory-item';
            emotionalDisplay.innerHTML = `
                <h4>üòä Í∞êÏ†ï ÏÉÅÌÉú Î∂ÑÏÑù</h4>
                <div class="stat-item">
                    <span>Ï¥ù Í∞êÏ†ï Í∏∞Î°ù:</span>
                    <span class="stat-value">${stats.totalEmotions}</span>
                </div>
                <div class="stat-item">
                    <span>Ï£ºÏöî Í∞êÏ†ï:</span>
                    <span class="stat-value">${stats.dominantEmotion}</span>
                </div>
                <div class="stat-item">
                    <span>Í∞êÏ†ï Î∂ÑÌè¨:</span>
                    <div class="emotion-breakdown">
                        ${Object.entries(stats.emotionBreakdown).map(([emotion, count]) => 
                            `<div class="emotion-item">${emotion}: ${count}</div>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            // Í∏∞Ï°¥ ÌëúÏãú Ï†úÍ±∞
            const existingDisplay = document.getElementById('emotionalDisplay');
            if (existingDisplay) existingDisplay.remove();
            
            memoryStats.appendChild(emotionalDisplay);
            memoryStats.style.display = 'block';
        }

        // Ïù∏ÏÉù ÏÇ¨Í±¥ ÌÉÄÏûÑÎùºÏù∏ Ï°∞Ìöå / Load life timeline / Charger la chronologie de vie / ‰∫∫Áîü„Çø„Ç§„É†„É©„Ç§„É≥Ë™≠„ÅøËæº„Åø / Âä†ËΩΩ‰∫∫ÁîüÊó∂Èó¥Á∫ø
        async function loadTimeline() {
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/timeline`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    }
                });

                if (response.ok) {
                    const timelineData = await response.json();
                    displayTimeline(timelineData.timeline);
                    showStatus('‚úÖ Ïù∏ÏÉù ÏÇ¨Í±¥ ÌÉÄÏûÑÎùºÏù∏ Î°úÎìú ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå Ïù∏ÏÉù ÏÇ¨Í±¥ ÌÉÄÏûÑÎùºÏù∏ Î°úÎìú Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Ïù∏ÏÉù ÏÇ¨Í±¥ ÌÉÄÏûÑÎùºÏù∏ Î°úÎìú Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // Ïù∏ÏÉù ÏÇ¨Í±¥ ÌÉÄÏûÑÎùºÏù∏ ÌëúÏãú / Display timeline / Afficher la chronologie / „Çø„Ç§„É†„É©„Ç§„É≥Ë°®Á§∫ / ÊòæÁ§∫Êó∂Èó¥Á∫ø
        function displayTimeline(timeline) {
            const timelineDisplay = document.createElement('div');
            timelineDisplay.id = 'timelineDisplay';
            timelineDisplay.className = 'memory-item';
            
            let timelineHTML = '<h4>üìÖ Ïù∏ÏÉù ÏÇ¨Í±¥ ÌÉÄÏûÑÎùºÏù∏</h4>';
            
            if (timeline.length === 0) {
                timelineHTML += '<p>ÏïÑÏßÅ Í∏∞Î°ùÎêú Ïù∏ÏÉù ÏÇ¨Í±¥Ïù¥ ÏóÜÏäµÎãàÎã§.</p>';
            } else {
                timeline.forEach(event => {
                    const date = new Date(event.timestamp).toLocaleDateString();
                    timelineHTML += `
                        <div class="timeline-event">
                            <div class="event-date">${date}</div>
                            <div class="event-type">${event.type}</div>
                            <div class="event-description">${event.description}</div>
                            <div class="event-emotion">Í∞êÏ†ï: ${event.emotionalImpact}</div>
                        </div>
                    `;
                });
            }
            
            timelineDisplay.innerHTML = timelineHTML;
            
            // Í∏∞Ï°¥ ÌëúÏãú Ï†úÍ±∞
            const existingDisplay = document.getElementById('timelineDisplay');
            if (existingDisplay) existingDisplay.remove();
            
            memoryStats.appendChild(timelineDisplay);
            memoryStats.style.display = 'block';
        }

        // Îß•ÎùΩ Ìå®ÌÑ¥ Î∂ÑÏÑù Ï°∞Ìöå / Load context patterns / Charger les mod√®les de contexte / „Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Éë„Çø„Éº„É≥Ë™≠„ÅøËæº„Åø / Âä†ËΩΩ‰∏ä‰∏ãÊñáÊ®°Âºè
        async function loadPatterns() {
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/patterns`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    }
                });

                if (response.ok) {
                    const patternsData = await response.json();
                    displayPatterns(patternsData.patterns);
                    showStatus('‚úÖ Îß•ÎùΩ Ìå®ÌÑ¥ Î∂ÑÏÑù Î°úÎìú ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå Îß•ÎùΩ Ìå®ÌÑ¥ Î∂ÑÏÑù Î°úÎìú Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Îß•ÎùΩ Ìå®ÌÑ¥ Î∂ÑÏÑù Î°úÎìú Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // Îß•ÎùΩ Ìå®ÌÑ¥ Î∂ÑÏÑù ÌëúÏãú / Display patterns / Afficher les mod√®les / „Éë„Çø„Éº„É≥Ë°®Á§∫ / ÊòæÁ§∫Ê®°Âºè
        function displayPatterns(patterns) {
            const patternsDisplay = document.createElement('div');
            patternsDisplay.id = 'patternsDisplay';
            patternsDisplay.className = 'memory-item';
            
            let patternsHTML = '<h4>üîç Îß•ÎùΩ Ìå®ÌÑ¥ Î∂ÑÏÑù</h4>';
            
            if (patterns.length === 0) {
                patternsHTML += '<p>ÏïÑÏßÅ Î∂ÑÏÑùÎêú Îß•ÎùΩ Ìå®ÌÑ¥Ïù¥ ÏóÜÏäµÎãàÎã§.</p>';
            } else {
                patterns.forEach(pattern => {
                    const date = new Date(pattern.timestamp).toLocaleDateString();
                    patternsHTML += `
                        <div class="pattern-item">
                            <div class="pattern-topics">Ï£ºÏ†ú: ${pattern.topics.join(', ')}</div>
                            <div class="pattern-emotion">Í∞êÏ†ï: ${pattern.emotionalState}</div>
                            <div class="pattern-frequency">ÎπàÎèÑ: ${pattern.frequency}</div>
                            <div class="pattern-date">ÎÇ†Ïßú: ${date}</div>
                        </div>
                    `;
                });
            }
            
            patternsDisplay.innerHTML = patternsHTML;
            
            // Í∏∞Ï°¥ ÌëúÏãú Ï†úÍ±∞
            const existingDisplay = document.getElementById('patternsDisplay');
            if (existingDisplay) existingDisplay.remove();
            
            memoryStats.appendChild(patternsDisplay);
            memoryStats.style.display = 'block';
        }

        // Í¥ÄÍ≥Ñ Ï†ïÎ≥¥ Ï∂îÍ∞Ä / Add relationship / Ajouter une relation / Èñ¢‰øÇÊÄßËøΩÂä† / Ê∑ªÂä†ÂÖ≥Á≥ª
        async function addRelationship() {
            const person = prompt('Í¥ÄÍ≥ÑÎ•º Ï∂îÍ∞ÄÌï† ÏÇ¨ÎûåÏùò Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
            if (!person) return;
            
            const relationship = prompt('Í¥ÄÍ≥ÑÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: ÏπúÍµ¨, Í∞ÄÏ°±, ÎèôÎ£å):');
            if (!relationship) return;
            
            const details = prompt('Ï∂îÍ∞Ä ÏÑ∏Î∂ÄÏÇ¨Ìï≠ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (ÏÑ†ÌÉùÏÇ¨Ìï≠):');
            
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/relationships`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        person: person,
                        relationship: relationship,
                        details: details || {}
                    })
                });

                if (response.ok) {
                    showStatus('‚úÖ Í¥ÄÍ≥Ñ Ï†ïÎ≥¥ Ï∂îÍ∞Ä ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå Í¥ÄÍ≥Ñ Ï†ïÎ≥¥ Ï∂îÍ∞Ä Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Í¥ÄÍ≥Ñ Ï†ïÎ≥¥ Ï∂îÍ∞Ä Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // Î™©Ìëú Ï∂îÍ∞Ä / Add goal / Ajouter un objectif / ÁõÆÊ®ôËøΩÂä† / Ê∑ªÂä†ÁõÆÊ†á
        async function addGoal() {
            const goal = prompt('Î™©ÌëúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
            if (!goal) return;
            
            const category = prompt('Ïπ¥ÌÖåÍ≥†Î¶¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: career, health, education):');
            const deadline = prompt('ÎßàÍ∞êÏùºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (YYYY-MM-DD, ÏÑ†ÌÉùÏÇ¨Ìï≠):');
            
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/goals`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        goal: goal,
                        category: category || 'general',
                        deadline: deadline || null
                    })
                });

                if (response.ok) {
                    showStatus('‚úÖ Î™©Ìëú Ï∂îÍ∞Ä ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå Î™©Ìëú Ï∂îÍ∞Ä Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î™©Ìëú Ï∂îÍ∞Ä Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // Í¥ÄÏã¨ÏÇ¨ Ï∂îÍ∞Ä / Add interest / Ajouter un int√©r√™t / ËààÂë≥ËøΩÂä† / Ê∑ªÂä†ÂÖ¥Ë∂£
        async function addInterest() {
            const interest = prompt('Í¥ÄÏã¨ÏÇ¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
            if (!interest) return;
            
            const category = prompt('Ïπ¥ÌÖåÍ≥†Î¶¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: hobby, skill, topic):');
            
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/interests`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        interest: interest,
                        category: category || 'general'
                    })
                });

                if (response.ok) {
                    showStatus('‚úÖ Í¥ÄÏã¨ÏÇ¨ Ï∂îÍ∞Ä ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå Í¥ÄÏã¨ÏÇ¨ Ï∂îÍ∞Ä Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Í¥ÄÏã¨ÏÇ¨ Ï∂îÍ∞Ä Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // Ïû•Í∏∞ Í∏∞Ïñµ Ï∂îÍ∞Ä / Add long-term memory / Ajouter une m√©moire √† long terme / Èï∑ÊúüË®òÊÜ∂ËøΩÂä† / Ê∑ªÂä†ÈïøÊúüËÆ∞ÂøÜ
        async function addLongTermMemory() {
            const memory = prompt('Ïû•Í∏∞ Í∏∞ÏñµÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
            if (!memory) return;
            
            const category = prompt('Ïπ¥ÌÖåÍ≥†Î¶¨Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: experience, achievement, lesson):');
            const importance = prompt('Ï§ëÏöîÎèÑÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (high, medium, low):');
            
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/memory/${config.userId}/longterm`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        memory: memory,
                        category: category || 'general',
                        importance: importance || 'medium'
                    })
                });

                if (response.ok) {
                    showStatus('‚úÖ Ïû•Í∏∞ Í∏∞Ïñµ Ï∂îÍ∞Ä ÏôÑÎ£å', 'success');
                } else {
                    showStatus('‚ùå Ïû•Í∏∞ Í∏∞Ïñµ Ï∂îÍ∞Ä Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Ïû•Í∏∞ Í∏∞Ïñµ Ï∂îÍ∞Ä Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // üß† Ïù∏ÏßÄ ÌõàÎ†® Í¥ÄÎ†® Ìï®ÏàòÎì§

        // üîä Î©ÄÌã∞Î™®Îã¨ ÌÜµÌï© Í¥ÄÎ†® Ìï®ÏàòÎì§
        async function processVoiceInput() {
            const config = getConfig();
            const voiceInput = document.getElementById('voiceInput');
            
            if (!voiceInput.files[0]) {
                showStatus('‚ùå ÏùåÏÑ± ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                return;
            }
            
            try {
                showStatus('üé§ ÏùåÏÑ±ÏùÑ Ï≤òÎ¶¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const formData = new FormData();
                formData.append('audioFile', voiceInput.files[0]);
                formData.append('userId', config.userId);
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/voice/process`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    },
                    body: formData
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ ÏùåÏÑ± Ï≤òÎ¶¨ ÏôÑÎ£å!', 'success');
                    addMessage('system', `ÏùåÏÑ± Ïù∏Ïãù Í≤∞Í≥º: ${result.text} (Ïã†Î¢∞ÎèÑ: ${result.confidence})`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå ÏùåÏÑ± Ï≤òÎ¶¨ Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÏùåÏÑ± Ï≤òÎ¶¨ Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function synthesizeVoice() {
            const config = getConfig();
            const text = prompt('ÏùåÏÑ±ÏúºÎ°ú Î≥ÄÌôòÌï† ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî:');
            
            if (!text) return;
            
            try {
                showStatus('üé§ ÏùåÏÑ±ÏùÑ Ìï©ÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/voice/synthesize`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: config.userId,
                        text: text,
                        voiceType: 'natural'
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ ÏùåÏÑ± Ìï©ÏÑ± ÏôÑÎ£å!', 'success');
                    addMessage('system', `ÏùåÏÑ± ÌååÏùº ÏÉùÏÑ±: ${result.audioFile}`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå ÏùåÏÑ± Ìï©ÏÑ± Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÏùåÏÑ± Ìï©ÏÑ± Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function processVideoInput() {
            const config = getConfig();
            const videoInput = document.getElementById('videoInput');
            
            if (!videoInput.files[0]) {
                showStatus('‚ùå ÎπÑÎîîÏò§ ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                return;
            }
            
            try {
                showStatus('üìπ ÎπÑÎîîÏò§Î•º Ï≤òÎ¶¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const formData = new FormData();
                formData.append('videoFile', videoInput.files[0]);
                formData.append('userId', config.userId);
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/video/process`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    },
                    body: formData
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ ÎπÑÎîîÏò§ Ï≤òÎ¶¨ ÏôÑÎ£å!', 'success');
                    addMessage('system', `ÎπÑÎîîÏò§ Î∂ÑÏÑù: ${result.analysis.objects.join(', ')} Í∞êÏßÄÎê®`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå ÎπÑÎîîÏò§ Ï≤òÎ¶¨ Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÎπÑÎîîÏò§ Ï≤òÎ¶¨ Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function extractVideoFrames() {
            const config = getConfig();
            const videoInput = document.getElementById('videoInput');
            
            if (!videoInput.files[0]) {
                showStatus('‚ùå ÎπÑÎîîÏò§ ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.', 'error');
                return;
            }
            
            try {
                showStatus('üìπ ÌîÑÎ†àÏûÑÏùÑ Ï∂îÏ∂úÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const formData = new FormData();
                formData.append('videoFile', videoInput.files[0]);
                formData.append('userId', config.userId);
                formData.append('frameRate', '1');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/video/frames`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    },
                    body: formData
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ ÌîÑÎ†àÏûÑ Ï∂îÏ∂ú ÏôÑÎ£å!', 'success');
                    addMessage('system', `${result.frames.length}Í∞úÏùò ÌîÑÎ†àÏûÑÏù¥ Ï∂îÏ∂úÎêòÏóàÏäµÎãàÎã§.`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå ÌîÑÎ†àÏûÑ Ï∂îÏ∂ú Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÌîÑÎ†àÏûÑ Ï∂îÏ∂ú Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function processSensorData() {
            const config = getConfig();
            const sensorType = document.getElementById('sensorType').value;
            
            try {
                showStatus('üì° ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞Î•º Ï≤òÎ¶¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const sensorData = {
                    type: sensorType,
                    value: Math.random() * 100,
                    timestamp: new Date().toISOString()
                };
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/sensors/process`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: config.userId,
                        sensorData: sensorData
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÏôÑÎ£å!', 'success');
                    addMessage('system', `ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨Îê®: ${sensorType}`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function loadSensorHistory() {
            const config = getConfig();
            const sensorType = document.getElementById('sensorType').value;
            
            try {
                showStatus('üì° ÏÑºÏÑú ÌûàÏä§ÌÜ†Î¶¨Î•º Î°úÎìúÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/sensors/${config.userId}/history?sensorType=${sensorType}&timeRange=24h`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ ÏÑºÏÑú ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú ÏôÑÎ£å!', 'success');
                    addMessage('system', `${result.history.length}Í∞úÏùò ÏÑºÏÑú Îç∞Ïù¥ÌÑ∞ Í∏∞Î°ùÏùÑ Ï∞æÏïòÏäµÎãàÎã§.`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå ÏÑºÏÑú ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÏÑºÏÑú ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function connectWearableDevice() {
            const config = getConfig();
            const deviceType = document.getElementById('deviceType').value;
            
            try {
                showStatus('‚åö Ïõ®Ïñ¥Îü¨Î∏î Í∏∞Í∏∞Î•º Ïó∞Í≤∞ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/wearables/connect`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: config.userId,
                        deviceType: deviceType,
                        deviceConfig: {
                            autoConnect: true,
                            dataInterval: 60
                        }
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Ïõ®Ïñ¥Îü¨Î∏î Í∏∞Í∏∞ Ïó∞Í≤∞ ÏôÑÎ£å!', 'success');
                    addMessage('system', `${deviceType} Í∏∞Í∏∞Í∞Ä Ïó∞Í≤∞ÎêòÏóàÏäµÎãàÎã§.`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Ïõ®Ïñ¥Îü¨Î∏î Í∏∞Í∏∞ Ïó∞Í≤∞ Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Ïõ®Ïñ¥Îü¨Î∏î Í∏∞Í∏∞ Ïó∞Í≤∞ Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function getWearableData() {
            const config = getConfig();
            const deviceType = document.getElementById('deviceType').value;
            
            try {
                showStatus('‚åö Ïõ®Ïñ¥Îü¨Î∏î Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏ†∏Ïò§Í≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/wearables/${config.userId}/data?deviceType=${deviceType}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Ïõ®Ïñ¥Îü¨Î∏î Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏôÑÎ£å!', 'success');
                    addMessage('system', `Ïã¨Î∞ïÏàò: ${result.data.heartRate} BPM, Í±∏ÏùåÏàò: ${result.data.steps}Í±∏Ïùå`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Ïõ®Ïñ¥Îü¨Î∏î Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Ïõ®Ïñ¥Îü¨Î∏î Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function processHealthData() {
            const config = getConfig();
            
            try {
                showStatus('‚ù§Ô∏è Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞Î•º Ï≤òÎ¶¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const healthData = {
                    heartRate: Math.floor(Math.random() * 40) + 60,
                    steps: Math.floor(Math.random() * 1000) + 5000,
                    sleepHours: Math.floor(Math.random() * 3) + 6,
                    calories: Math.floor(Math.random() * 500) + 1500
                };
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/health/process`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: config.userId,
                        healthData: healthData
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÏôÑÎ£å!', 'success');
                    addMessage('system', `Í±¥Í∞ï Ï†êÏàò: ${result.analysis.overallHealth}/100`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function generateHealthReport() {
            const config = getConfig();
            const reportType = document.getElementById('reportType').value;
            
            try {
                showStatus('‚ù§Ô∏è Í±¥Í∞ï Î¶¨Ìè¨Ìä∏Î•º ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/health/${config.userId}/report?reportType=${reportType}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Í±¥Í∞ï Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ± ÏôÑÎ£å!', 'success');
                    addMessage('system', `${reportType} Í±¥Í∞ï Î¶¨Ìè¨Ìä∏: ÌèâÍ∑† Ïã¨Î∞ïÏàò ${result.report.summary.averageHeartRate} BPM`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Í±¥Í∞ï Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ± Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Í±¥Í∞ï Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ± Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function generateMultimodalContext() {
            const config = getConfig();
            
            try {
                showStatus('üîó Î©ÄÌã∞Î™®Îã¨ Ïª®ÌÖçÏä§Ìä∏Î•º ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/context/${config.userId}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î©ÄÌã∞Î™®Îã¨ Ïª®ÌÖçÏä§Ìä∏ ÏÉùÏÑ± ÏôÑÎ£å!', 'success');
                    addMessage('system', 'Î©ÄÌã∞Î™®Îã¨ Ïª®ÌÖçÏä§Ìä∏Í∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§. ÏùåÏÑ±, ÏòÅÏÉÅ, ÏÑºÏÑú, Ïõ®Ïñ¥Îü¨Î∏î, Í±¥Í∞ï Îç∞Ïù¥ÌÑ∞Í∞Ä ÌÜµÌï©ÎêòÏóàÏäµÎãàÎã§.');
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î©ÄÌã∞Î™®Îã¨ Ïª®ÌÖçÏä§Ìä∏ ÏÉùÏÑ± Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î©ÄÌã∞Î™®Îã¨ Ïª®ÌÖçÏä§Ìä∏ ÏÉùÏÑ± Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        async function checkMultimodalStatus() {
            const config = getConfig();
            
            try {
                showStatus('üîó Î©ÄÌã∞Î™®Îã¨ ÏÉÅÌÉúÎ•º ÌôïÏù∏ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/multimodal/status`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î©ÄÌã∞Î™®Îã¨ ÏÉÅÌÉú ÌôïÏù∏ ÏôÑÎ£å!', 'success');
                    addMessage('system', `Î©ÄÌã∞Î™®Îã¨ ÏãúÏä§ÌÖú ÏÉÅÌÉú: Ïó∞Í≤∞ ${result.status.activeConnections}Í∞ú`);
                    // ÏûëÎèô ÌôïÏù∏Îêú ÏÑπÏÖòÎßå ÎÖ∏Ï∂ú
                    document.getElementById('sensorSection').style.display = 'block';
                    document.getElementById('wearableSection').style.display = 'block';
                    document.getElementById('healthSection').style.display = 'block';
                    document.getElementById('contextSection').style.display = 'block';
                    // ÌååÏùº ÏóÖÎ°úÎìú Í∏∞Î∞ò(ÏùåÏÑ±/ÏòÅÏÉÅ)ÏùÄ ÌòÑÏû¨ ÎπÑÌôúÏÑ±Ìôî Ïú†ÏßÄ
                    document.getElementById('voiceSection').style.display = 'none';
                    document.getElementById('videoSection').style.display = 'none';
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î©ÄÌã∞Î™®Îã¨ ÏÉÅÌÉú ÌôïÏù∏ Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î©ÄÌã∞Î™®Îã¨ ÏÉÅÌÉú ÌôïÏù∏ Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        // Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑ Ï†ÄÏû•
        async function saveCulturalPreferences() {
            const config = getConfig();
            const language = document.getElementById('culturalLanguage').value;
            const formality = document.getElementById('culturalFormality').value;
            const age = document.getElementById('userAge').value;

            try {
                showStatus('üåç Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑÎ•º Ï†ÄÏû•ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/cultural/preferences/${config.userId}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        language: language,
                        formalityLevel: formality,
                        age: age ? parseInt(age) : null
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!', 'success');
                    addMessage('system', `Î¨∏ÌôîÏ†Å ÏÑ§Ï†ï Ï†ÄÏû•Îê®: ${language}, ${formality}${age ? `, ${age}ÏÑ∏` : ''}`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑ Ï†ÄÏû• Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑ Ï†ÄÏû• Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        // Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑ Î∂àÎü¨Ïò§Í∏∞
        async function loadCulturalPreferences() {
            const config = getConfig();
            
            try {
                showStatus('üåç Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑÎ•º Î∂àÎü¨Ïò§Í≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/cultural/preferences/${config.userId}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    if (result.preferences) {
                        document.getElementById('culturalLanguage').value = result.preferences.language || 'en';
                        document.getElementById('culturalFormality').value = result.preferences.formalityLevel || 'polite';
                        document.getElementById('userAge').value = result.preferences.age || '';
                        showStatus('‚úÖ Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑÍ∞Ä Î∂àÎü¨ÏôÄÏ°åÏäµÎãàÎã§!', 'success');
                        addMessage('system', `Î¨∏ÌôîÏ†Å ÏÑ§Ï†ï Î°úÎìúÎê®: ${result.preferences.language}, ${result.preferences.formalityLevel}${result.preferences.age ? `, ${result.preferences.age}ÏÑ∏` : ''}`);
                    } else {
                        showStatus('‚ÑπÔ∏è Ï†ÄÏû•Îêú Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑÍ∞Ä ÏóÜÏäµÎãàÎã§', 'info');
                    }
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑ Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏÑ†Ìò∏ÎèÑ Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // Î¨∏ÌôîÏ†Å ÏùëÎãµ ÏÉùÏÑ±
        async function generateCulturalResponse() {
            const config = getConfig();
            const language = document.getElementById('culturalLanguage').value;
            const formality = document.getElementById('culturalFormality').value;
            const responseType = document.getElementById('responseType').value;

            try {
                showStatus('üåç Î¨∏ÌôîÏ†Å ÏùëÎãµÏùÑ ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/cultural/response`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        language: language,
                        formalityLevel: formality,
                        responseType: responseType
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î¨∏ÌôîÏ†Å ÏùëÎãµÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!', 'success');
                    addMessage('system', `Î¨∏ÌôîÏ†Å ÏùëÎãµ (${language}, ${formality}): ${result.response}`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏùëÎãµ ÏÉùÏÑ± Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏùëÎãµ ÏÉùÏÑ± Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        // Î¨∏ÌôîÏ†Å Ïù∏ÏÇ¨Îßê ÏÉùÏÑ±
        async function generateCulturalGreeting() {
            const config = getConfig();
            const language = document.getElementById('culturalLanguage').value;
            const formality = document.getElementById('culturalFormality').value;

            try {
                showStatus('üåç Î¨∏ÌôîÏ†Å Ïù∏ÏÇ¨ÎßêÏùÑ ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/cultural/greeting`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        language: language,
                        formalityLevel: formality,
                        timeOfDay: true
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î¨∏ÌôîÏ†Å Ïù∏ÏÇ¨ÎßêÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!', 'success');
                    addMessage('system', `Î¨∏ÌôîÏ†Å Ïù∏ÏÇ¨Îßê (${language}, ${formality}): ${result.greeting}`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î¨∏ÌôîÏ†Å Ïù∏ÏÇ¨Îßê ÏÉùÏÑ± Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î¨∏ÌôîÏ†Å Ïù∏ÏÇ¨Îßê ÏÉùÏÑ± Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        // Î¨∏ÌôîÏ†Å ÎåÄÌôî ÏãúÏûëÏñ¥ ÏÉùÏÑ±
        async function generateConversationStarter() {
            const config = getConfig();
            const language = document.getElementById('culturalLanguage').value;
            const formality = document.getElementById('culturalFormality').value;
            const topic = document.getElementById('conversationTopic').value;

            try {
                showStatus('üåç Î¨∏ÌôîÏ†Å ÎåÄÌôî ÏãúÏûëÏñ¥Î•º ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/cultural/starter/${topic}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        language: language,
                        formalityLevel: formality
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î¨∏ÌôîÏ†Å ÎåÄÌôî ÏãúÏûëÏñ¥Í∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!', 'success');
                    addMessage('system', `Î¨∏ÌôîÏ†Å ÎåÄÌôî ÏãúÏûëÏñ¥ (${language}, ${formality}, ${topic}): ${result.starter}`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÎåÄÌôî ÏãúÏûëÏñ¥ ÏÉùÏÑ± Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÎåÄÌôî ÏãúÏûëÏñ¥ ÏÉùÏÑ± Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        // Î¨∏ÌôîÏ†Å ÏòàÏ†à Ï†ïÎ≥¥ Ï°∞Ìöå
        async function getCulturalEtiquette() {
            const config = getConfig();
            const language = document.getElementById('culturalLanguage').value;
            const context = document.getElementById('etiquetteContext').value;

            try {
                showStatus('üåç Î¨∏ÌôîÏ†Å ÏòàÏ†à Ï†ïÎ≥¥Î•º Ï°∞ÌöåÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/cultural/etiquette/${language}/${context}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î¨∏ÌôîÏ†Å ÏòàÏ†à Ï†ïÎ≥¥Í∞Ä Ï°∞ÌöåÎêòÏóàÏäµÎãàÎã§!', 'success');
                    
                    let etiquetteText = `Î¨∏ÌôîÏ†Å ÏòàÏ†à (${language}, ${context}):\n`;
                    for (const [key, value] of Object.entries(result.etiquette)) {
                        etiquetteText += `‚Ä¢ ${key}: ${value}\n`;
                    }
                    
                    addMessage('system', etiquetteText);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏòàÏ†à Ï†ïÎ≥¥ Ï°∞Ìöå Ïã§Ìå®: ${errorData.error?.message}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Î¨∏ÌôîÏ†Å ÏòàÏ†à Ï†ïÎ≥¥ Ï°∞Ìöå Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        // Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏ Ï†ÅÏö©
        async function applyCulturalContext() {
            const config = getConfig();
            const language = document.getElementById('culturalLanguage').value;
            const formality = document.getElementById('culturalFormality').value;
            const message = document.getElementById('messageToEnhance').value;
            const age = document.getElementById('userAge').value;

            if (!message.trim()) {
                showStatus('‚ùå Ìñ•ÏÉÅÌï† Î©îÏãúÏßÄÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî', 'error');
                return;
            }

            try {
                showStatus('üåç Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏Î•º Ï†ÅÏö©ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                
                const response = await fetch(`${config.apiUrl}/api/cultural/context`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        language: language,
                        formalityLevel: formality,
                        message: message,
                        userAge: age ? parseInt(age) : null
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showStatus('‚úÖ Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏Í∞Ä Ï†ÅÏö©ÎêòÏóàÏäµÎãàÎã§!', 'success');
                    addMessage('system', `ÏõêÎ≥∏ Î©îÏãúÏßÄ: ${result.originalMessage}`);
                    addMessage('system', `Ìñ•ÏÉÅÎêú Î©îÏãúÏßÄ: ${result.enhancedMessage}`);
                } else {
                    const errorData = await response.json();
                    showStatus(`‚ùå Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏ Ï†ÅÏö© Ïã§Ìå®: ${errorData.error?.message}`, 'error');
            }
            } catch (error) {
                showStatus(`‚ùå Î¨∏ÌôîÏ†Å Ïª®ÌÖçÏä§Ìä∏ Ï†ÅÏö© Ïò§Î•ò: ${error.message}`, 'error');
            }
        }

        // Ïù∏ÏßÄ ÌõàÎ†® ÏãúÏûë
        async function startCognitiveTraining() {
            const config = getConfig();
            const trainingType = document.getElementById('trainingType').value;
            const difficulty = document.getElementById('trainingDifficulty').value;

            try {
                showStatus('üéØ Ïù∏ÏßÄ ÌõàÎ†®ÏùÑ ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                console.log('üß† Starting cognitive training with:', { trainingType, difficulty, userId: config.userId });

                const response = await fetch(`${config.apiUrl}/api/cognitive/training/${config.userId}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        trainingType: trainingType,
                        difficulty: difficulty
                    })
                });

                console.log('üß† Response status:', response.status);
                console.log('üß† Response ok:', response.ok);

                if (response.ok) {
                    const data = await response.json();
                    console.log('üß† Training data received:', data);
                    console.log('üß† Training exercise:', data.training?.exercise);
                    
                    if (data.training && data.training.exercise) {
                        displayTraining(data.training);
                        showStatus('‚úÖ Ïù∏ÏßÄ ÌõàÎ†®Ïù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!', 'success');
                    } else {
                        console.error('üß† No training exercise found in response');
                        showStatus('‚ùå ÌõàÎ†® Îç∞Ïù¥ÌÑ∞Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§', 'error');
                    }
                } else {
                    const errorData = await response.json();
                    console.error('üß† Training generation failed:', errorData);
                    showStatus('‚ùå Ïù∏ÏßÄ ÌõàÎ†® ÏÉùÏÑ± Ïã§Ìå®', 'error');
                }
            } catch (error) {
                console.error('üß† Training error:', error);
                showStatus(`‚ùå Ïù∏ÏßÄ ÌõàÎ†® ÏÉùÏÑ± Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // ÌõàÎ†® ÌëúÏãú
        function displayTraining(training) {
            console.log('üß† Displaying training:', training);
            const exercise = training.exercise;
            console.log('üß† Exercise:', exercise);
            
            if (!exercise) {
                console.error('üß† No exercise found in training');
                return;
            }
            
            const chatMessages = document.getElementById('chatMessages');
            console.log('üß† Chat messages element:', chatMessages);
            
            // ÌõàÎ†® ÏÑπÏÖò ÏÉùÏÑ±
            const trainingSection = document.createElement('div');
            trainingSection.className = 'training-section';
            trainingSection.innerHTML = `
                <h4>üß† ${exercise.title}</h4>
                <p>${exercise.description}</p>
                <p><strong>ÏãúÍ∞Ñ Ï†úÌïú:</strong> ${exercise.timeLimit}Ï¥à</p>
                <p><strong>ÏµúÎåÄ Ï†êÏàò:</strong> ${exercise.maxScore}Ï†ê</p>
            `;

            console.log('üß† Questions:', exercise.questions);
            
            // ÏßàÎ¨∏Îì§ ÌëúÏãú
            if (exercise.questions && exercise.questions.length > 0) {
                exercise.questions.forEach((question, index) => {
                    console.log(`üß† Processing question ${index}:`, question);
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'training-question';
                    questionDiv.innerHTML = `
                        <h5>ÏßàÎ¨∏ ${index + 1}</h5>
                        <p>${question.question}</p>
                        ${generateQuestionInput(question, index)}
                    `;
                    trainingSection.appendChild(questionDiv);
                });
            } else {
                console.error('üß† No questions found in exercise');
            }

            // Ï†úÏ∂ú Î≤ÑÌäº
            const submitButton = document.createElement('button');
            submitButton.className = 'btn btn-primary';
            submitButton.textContent = 'üìù ÌõàÎ†® Ï†úÏ∂ú';
            submitButton.onclick = () => submitTraining(training.id);
            trainingSection.appendChild(submitButton);

            chatMessages.appendChild(trainingSection);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            console.log('üß† Training section added to chat');
        }

        // ÏßàÎ¨∏ ÏûÖÎ†• ÏÉùÏÑ±
        function generateQuestionInput(question, index) {
            switch (question.type) {
                case 'multiple_choice':
                    return `
                        <div class="training-options">
                            ${question.options.map((option, optIndex) => `
                                <div class="training-option" onclick="selectOption(${index}, ${optIndex})" data-question="${index}" data-option="${optIndex}">
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    `;
                case 'true_false':
                    return `
                        <div class="training-options">
                            <div class="training-option" onclick="selectOption(${index}, true)" data-question="${index}" data-option="true">ÎßûÏùå</div>
                            <div class="training-option" onclick="selectOption(${index}, false)" data-question="${index}" data-option="false">ÌãÄÎ¶º</div>
                        </div>
                    `;
                case 'fill_blank':
                case 'open_ended':
                    return `
                        <textarea id="answer-${index}" placeholder="ÎãµÎ≥ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." style="width: 100%; min-height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></textarea>
                    `;
                default:
                    return '<p>ÏßÄÏõêÌïòÏßÄ ÏïäÎäî ÏßàÎ¨∏ Ïú†ÌòïÏûÖÎãàÎã§.</p>';
            }
        }

        // ÏòµÏÖò ÏÑ†ÌÉù
        function selectOption(questionIndex, optionIndex) {
            // Í∏∞Ï°¥ ÏÑ†ÌÉù Ï†úÍ±∞
            document.querySelectorAll(`[data-question="${questionIndex}"]`).forEach(el => {
                el.classList.remove('selected');
            });
            
            // ÏÉà ÏÑ†ÌÉù ÌëúÏãú
            const selectedElement = document.querySelector(`[data-question="${questionIndex}"][data-option="${optionIndex}"]`);
            if (selectedElement) {
                selectedElement.classList.add('selected');
            }
        }

        // ÌõàÎ†® Ï†úÏ∂ú
        async function submitTraining(trainingId) {
            const config = getConfig();
            const answers = [];

            // Î™®Îì† ÏßàÎ¨∏Ïùò ÎãµÎ≥Ä ÏàòÏßë
            const questions = document.querySelectorAll('.training-question');
            questions.forEach((questionDiv, index) => {
                const selectedOption = questionDiv.querySelector('.training-option.selected');
                const textAnswer = questionDiv.querySelector('textarea');

                if (selectedOption) {
                    const optionIndex = selectedOption.getAttribute('data-option');
                    answers.push(optionIndex === 'true' ? true : optionIndex === 'false' ? false : optionIndex);
                } else if (textAnswer) {
                    answers.push(textAnswer.value);
                } else {
                    answers.push('');
                }
            });

            try {
                showStatus('üìù ÌõàÎ†® Í≤∞Í≥ºÎ•º ÌèâÍ∞ÄÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');

                const response = await fetch(`${config.apiUrl}/api/cognitive/training/${config.userId}/${trainingId}/submit`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        answers: answers
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    displayTrainingResult(data.result);
                    showStatus('‚úÖ ÌõàÎ†® Í≤∞Í≥ºÍ∞Ä ÌèâÍ∞ÄÎêòÏóàÏäµÎãàÎã§!', 'success');
                } else {
                    showStatus('‚ùå ÌõàÎ†® Í≤∞Í≥º ÌèâÍ∞Ä Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÌõàÎ†® Í≤∞Í≥º ÌèâÍ∞Ä Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // ÌõàÎ†® Í≤∞Í≥º ÌëúÏãú
        function displayTrainingResult(result) {
            const chatMessages = document.getElementById('chatMessages');
            
            const resultDiv = document.createElement('div');
            resultDiv.className = 'training-section';
            resultDiv.innerHTML = `
                <h4>üìä ÌõàÎ†® Í≤∞Í≥º</h4>
                <p><strong>Ï†êÏàò:</strong> ${result.score}/${result.maxScore} (${result.completionRate.toFixed(1)}%)</p>
                <p><strong>ÏÑ±Í≥º:</strong> ${getPerformanceText(result.performance)}</p>
                <h5>ÌîºÎìúÎ∞±:</h5>
            `;

            result.feedback.forEach((feedback, index) => {
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = `training-feedback ${feedback.correct ? 'correct' : 'incorrect'}`;
                feedbackDiv.innerHTML = `
                    <p><strong>ÏßàÎ¨∏ ${index + 1}:</strong> ${feedback.feedback}</p>
                    ${!feedback.correct && feedback.correctAnswer ? `<p><strong>Ï†ïÎãµ:</strong> ${feedback.correctAnswer}</p>` : ''}
                `;
                resultDiv.appendChild(feedbackDiv);
            });

            chatMessages.appendChild(resultDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // ÏÑ±Í≥º ÌÖçÏä§Ìä∏ Î≥ÄÌôò
        function getPerformanceText(performance) {
            const performanceMap = {
                'excellent': 'Ïö∞Ïàò',
                'good': 'Ï¢ãÏùå',
                'fair': 'Î≥¥ÌÜµ',
                'needs_improvement': 'Í∞úÏÑ† ÌïÑÏöî',
                'poor': 'Î∂ÄÏ°±'
            };
            return performanceMap[performance] || performance;
        }

        // ÌõàÎ†® ÌÜµÍ≥Ñ Ï°∞Ìöå
        async function loadTrainingStats() {
            const config = getConfig();

            try {
                showStatus('üìà ÌõàÎ†® ÌÜµÍ≥ÑÎ•º Ï°∞ÌöåÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');

                const response = await fetch(`${config.apiUrl}/api/cognitive/training/${config.userId}/stats`, {
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    displayTrainingStats(data.stats);
                    showStatus('‚úÖ ÌõàÎ†® ÌÜµÍ≥ÑÎ•º Ï°∞ÌöåÌñàÏäµÎãàÎã§!', 'success');
                } else {
                    showStatus('‚ùå ÌõàÎ†® ÌÜµÍ≥Ñ Ï°∞Ìöå Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÌõàÎ†® ÌÜµÍ≥Ñ Ï°∞Ìöå Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // ÌõàÎ†® ÌÜµÍ≥Ñ ÌëúÏãú
        function displayTrainingStats(stats) {
            const chatMessages = document.getElementById('chatMessages');
            
            const statsDiv = document.createElement('div');
            statsDiv.className = 'message system';
            statsDiv.innerHTML = `
                <div class="message-header">ÌõàÎ†® ÌÜµÍ≥Ñ</div>
                <div class="message-content">
                    <h4>üß† Ïù∏ÏßÄ ÌõàÎ†® ÌÜµÍ≥Ñ</h4>
                    <p><strong>Ï¥ù ÌõàÎ†® Ïàò:</strong> ${stats.totalTrainings}</p>
                    <p><strong>ÏôÑÎ£åÎêú ÌõàÎ†®:</strong> ${stats.completedTrainings}</p>
                    <p><strong>ÌèâÍ∑† Ï†êÏàò:</strong> ${stats.averageScore}Ï†ê</p>
                    <p><strong>ÏµúÍ≥† Ï†êÏàò:</strong> ${stats.bestScore}Ï†ê</p>
                    <p><strong>Í∞ÄÏû• ÎßéÏù¥ Ìïú ÌõàÎ†®:</strong> ${stats.mostFrequentType}</p>
                    <p><strong>Ìñ•ÏÉÅ Ï∂îÏÑ∏:</strong> ${getImprovementText(stats.improvementTrend)}</p>
                    ${stats.lastTraining ? `<p><strong>ÎßàÏßÄÎßâ ÌõàÎ†®:</strong> ${new Date(stats.lastTraining).toLocaleString('ko-KR')}</p>` : ''}
                </div>
            `;

            chatMessages.appendChild(statsDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Ìñ•ÏÉÅ Ï∂îÏÑ∏ ÌÖçÏä§Ìä∏ Î≥ÄÌôò
        function getImprovementText(trend) {
            const trendMap = {
                'improving': 'Ìñ•ÏÉÅ Ï§ë',
                'stable': 'ÏïàÏ†ïÏ†Å',
                'declining': 'Í∞êÏÜå Ï§ë'
            };
            return trendMap[trend] || trend;
        }

        // ÌõàÎ†® Í∏∞Î°ù Ï°∞Ìöå
        async function loadTrainingRecords() {
            const config = getConfig();

            try {
                showStatus('üìã ÌõàÎ†® Í∏∞Î°ùÏùÑ Ï°∞ÌöåÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');

                const response = await fetch(`${config.apiUrl}/api/cognitive/training/${config.userId}/records`, {
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    displayTrainingRecords(data.records);
                    showStatus('‚úÖ ÌõàÎ†® Í∏∞Î°ùÏùÑ Ï°∞ÌöåÌñàÏäµÎãàÎã§!', 'success');
                } else {
                    showStatus('‚ùå ÌõàÎ†® Í∏∞Î°ù Ï°∞Ìöå Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÌõàÎ†® Í∏∞Î°ù Ï°∞Ìöå Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // ÌõàÎ†® Í∏∞Î°ù ÌëúÏãú
        function displayTrainingRecords(records) {
            const chatMessages = document.getElementById('chatMessages');
            
            const recordsDiv = document.createElement('div');
            recordsDiv.className = 'message system';
            recordsDiv.innerHTML = `
                <div class="message-header">ÌõàÎ†® Í∏∞Î°ù</div>
                <div class="message-content">
                    <h4>üìã Ïù∏ÏßÄ ÌõàÎ†® Í∏∞Î°ù (Ï¥ù ${records.length}Í∞ú)</h4>
                    ${records.slice(-5).map(record => `
                        <div style="border: 1px solid #ddd; padding: 10px; margin: 5px 0; border-radius: 4px;">
                            <p><strong>ÌõàÎ†® Ïú†Ìòï:</strong> ${record.exercise.title}</p>
                            <p><strong>ÎÇúÏù¥ÎèÑ:</strong> ${record.difficulty}</p>
                            <p><strong>Ï†êÏàò:</strong> ${record.score || 0}/${record.maxScore || 0}</p>
                            <p><strong>ÏôÑÎ£å Ïó¨Î∂Ä:</strong> ${record.completed ? 'ÏôÑÎ£å' : 'ÏßÑÌñâ Ï§ë'}</p>
                            <p><strong>ÎÇ†Ïßú:</strong> ${new Date(record.timestamp).toLocaleString('ko-KR')}</p>
                        </div>
                    `).join('')}
                </div>
            `;

            chatMessages.appendChild(recordsDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // ÌõàÎ†® ÌÖúÌîåÎ¶ø Ï°∞Ìöå
        async function loadTrainingTemplates() {
            const config = getConfig();

            try {
                showStatus('üìö ÌõàÎ†® Í∞ÄÏù¥ÎìúÎ•º Ï°∞ÌöåÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');

                const response = await fetch(`${config.apiUrl}/api/cognitive/training/templates`, {
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    displayTrainingTemplates(data.templates);
                    showStatus('‚úÖ ÌõàÎ†® Í∞ÄÏù¥ÎìúÎ•º Ï°∞ÌöåÌñàÏäµÎãàÎã§!', 'success');
                } else {
                    showStatus('‚ùå ÌõàÎ†® Í∞ÄÏù¥Îìú Ï°∞Ìöå Ïã§Ìå®', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå ÌõàÎ†® Í∞ÄÏù¥Îìú Ï°∞Ìöå Ïã§Ìå®: ${error.message}`, 'error');
            }
        }

        // ÌõàÎ†® ÌÖúÌîåÎ¶ø ÌëúÏãú
        function displayTrainingTemplates(templates) {
            const chatMessages = document.getElementById('chatMessages');
            
            const templatesDiv = document.createElement('div');
            templatesDiv.className = 'message system';
            templatesDiv.innerHTML = `
                <div class="message-header">ÌõàÎ†® Í∞ÄÏù¥Îìú</div>
                <div class="message-content">
                    <h4>üìö Ïù∏ÏßÄ ÌõàÎ†® Í∞ÄÏù¥Îìú</h4>
                    ${Object.entries(templates).map(([key, template]) => `
                        <div style="border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px;">
                            <h5>${template.name}</h5>
                            <p>${template.description}</p>
                            <p><strong>Ïπ¥ÌÖåÍ≥†Î¶¨:</strong> ${template.categories.join(', ')}</p>
                            <p><strong>ÎÇúÏù¥ÎèÑ:</strong> ${template.difficulty.join(', ')}</p>
                            <p><strong>Ïú†Ìòï:</strong> ${template.types.join(', ')}</p>
                        </div>
                    `).join('')}
                </div>
            `;

            chatMessages.appendChild(templatesDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Î©îÏãúÏßÄ Ï∂îÍ∞Ä / Add message / Ajouter un message / „É°„ÉÉ„Çª„Éº„Ç∏ËøΩÂä† / Ê∑ªÂä†Ê∂àÊÅØ
        function addMessage(role, content, showRetry = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const header = document.createElement('div');
            header.className = 'message-header';
            header.textContent = role === 'user' ? 'ÏÇ¨Ïö©Ïûê' : role === 'assistant' ? 'AI' : 'ÏãúÏä§ÌÖú';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = content;
            
            messageDiv.appendChild(header);
            messageDiv.appendChild(contentDiv);
            
            // Ïû¨ÏãúÎèÑ Î≤ÑÌäº Ï∂îÍ∞Ä (ÏãúÏä§ÌÖú Î©îÏãúÏßÄÏù¥Í≥† showRetryÍ∞Ä trueÏù∏ Í≤ΩÏö∞)
            if (role === 'system' && showRetry) {
                const retryButton = document.createElement('button');
                retryButton.className = 'retry-button';
                retryButton.textContent = 'üîÑ Ïû¨ÏãúÎèÑ';
                retryButton.onclick = () => {
                    messageDiv.remove();
                    sendMessage();
                };
                messageDiv.appendChild(retryButton);
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Î©îÏãúÏßÄ Ï†ÑÏÜ° / Send message / Envoyer un message / ÈÄÅ‰ø° / ÂèëÈÄÅÊ∂àÊÅØ
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            const config = getConfig();
            
            // ÏÇ¨Ïö©Ïûê Î©îÏãúÏßÄ ÌëúÏãú
            addMessage('user', message);
            messageInput.value = '';

            // Î°úÎî© ÌëúÏãú
            loading.style.display = 'block';
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // ÌÉÄÏûÑÏïÑÏõÉ ÏÑ§Ï†ï (ÏÇ¨Ïö©Ïûê ÏÑ§Ï†ïÍ∞í ÏÇ¨Ïö©)
            const timeoutDuration = config.timeout * 1000;
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), timeoutDuration);

            // ÌÉÄÏûÑÏïÑÏõÉÏùò 1/3 ÏßÄÏ†êÏóêÏÑú Í≤ΩÍ≥† Î©îÏãúÏßÄ ÌëúÏãú
            const warningTimeout = setTimeout(() => {
                if (loading.style.display !== 'none') {
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    showStatus(t.responseDelay, 'info');
                }
            }, timeoutDuration / 3);

            try {
                const response = await fetch(`${config.apiUrl}/v1/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json; charset=utf-8'
                    },
                    body: JSON.stringify({
                        model: config.model,
                        messages: [{ role: 'user', content: message }],
                        temperature: 0.7,
                        user_id: config.userId
                    }),
                    signal: controller.signal
                });

                // ÌÉÄÏûÑÏïÑÏõÉ Ï∑®ÏÜå
                clearTimeout(timeoutId);
                clearTimeout(warningTimeout);

                if (response.ok) {
                    const data = await response.json();
                    const aiResponse = data.choices[0].message.content;
                    addMessage('assistant', aiResponse);
                    
                    // Î©îÎ™®Î¶¨ ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
                    setTimeout(() => loadMemoryStats(), 1000);
                } else {
                    const errorData = await response.json();
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    addMessage('system', `${t.unknownError}: ${errorData.error?.message || t.unknownError}`);
                }
            } catch (error) {
                if (error.name === 'AbortError') {
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    addMessage('system', t.timeoutError, true);
                    addMessage('system', t.timeoutSolutions, true);
                    addMessage('system', t.computerRequirements, true);
                } else {
                    const currentLang = document.getElementById('languageSelect').value;
                    const t = i18n[currentLang] || i18n.en;
                    addMessage('system', t.connectionError.replace('{error}', error.message), true);
                }
            } finally {
                clearTimeout(warningTimeout);
                loading.style.display = 'none';
            }
        }

        // ÏóîÌÑ∞ÌÇ§ Ï≤òÎ¶¨ / Handle Enter key / G√©rer Entr√©e / „Ç®„É≥„Çø„ÉºÂá¶ÁêÜ / Â§ÑÁêÜÂõûËΩ¶
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî / Initialize on load / Initialiser au chargement / Ë™≠„ÅøËæº„ÅøÊôÇÂàùÊúüÂåñ / È°µÈù¢Âä†ËΩΩÂàùÂßãÂåñ
        window.onload = function() {
            // ÏÇ¨Ïö©Ïûê ID Î≥ÄÍ≤Ω Ïãú Î©îÎ™®Î¶¨ ÌÜµÍ≥Ñ Î°úÎìú
            userIdInput.addEventListener('change', loadMemoryStats);
            // Ïñ∏Ïñ¥ Î≥ÄÍ≤Ω Ïãú Î≤àÏó≠ Ï†ÅÏö© / Apply i18n when language changes
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.addEventListener('change', (e) => applyTranslations(e.target.value));
            
            // Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
            document.getElementById('refreshModelsBtn').addEventListener('click', loadModels);
            document.getElementById('testConnectionBtn').addEventListener('click', testConnection);
            document.getElementById('loadMemoryStatsBtn').addEventListener('click', loadMemoryStats);
            document.getElementById('loadUserMemoryBtn').addEventListener('click', loadUserMemory);
            document.getElementById('addFactBtn').addEventListener('click', addFact);
            document.getElementById('addPreferenceBtn').addEventListener('click', addPreference);
            document.getElementById('deleteMemoryBtn').addEventListener('click', deleteMemory);
            document.getElementById('sendMessageBtn').addEventListener('click', sendMessage);
            
            // Í≥†Í∏â Î©îÎ™®Î¶¨ Í∏∞Îä• Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
            document.getElementById('loadEmotionalStatsBtn').addEventListener('click', loadEmotionalStats);
            document.getElementById('loadTimelineBtn').addEventListener('click', loadTimeline);
            document.getElementById('loadPatternsBtn').addEventListener('click', loadPatterns);
            document.getElementById('addRelationshipBtn').addEventListener('click', addRelationship);
            document.getElementById('addGoalBtn').addEventListener('click', addGoal);
            document.getElementById('addInterestBtn').addEventListener('click', addInterest);
            document.getElementById('addLongTermMemoryBtn').addEventListener('click', addLongTermMemory);
            
                    // Ïù∏ÏßÄ ÌõàÎ†® Í∏∞Îä• Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
        document.getElementById('startTrainingBtn').addEventListener('click', startCognitiveTraining);
        document.getElementById('loadTrainingStatsBtn').addEventListener('click', loadTrainingStats);
        document.getElementById('loadTrainingRecordsBtn').addEventListener('click', loadTrainingRecords);
        
        // Î©ÄÌã∞Î™®Îã¨ ÌÜµÌï© Í∏∞Îä• Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
        document.getElementById('processVoiceBtn').addEventListener('click', processVoiceInput);
        document.getElementById('synthesizeVoiceBtn').addEventListener('click', synthesizeVoice);
        document.getElementById('processVideoBtn').addEventListener('click', processVideoInput);
        document.getElementById('extractFramesBtn').addEventListener('click', extractVideoFrames);
        document.getElementById('processSensorBtn').addEventListener('click', processSensorData);
        document.getElementById('loadSensorHistoryBtn').addEventListener('click', loadSensorHistory);
        document.getElementById('connectWearableBtn').addEventListener('click', connectWearableDevice);
        document.getElementById('getWearableDataBtn').addEventListener('click', getWearableData);
        document.getElementById('processHealthBtn').addEventListener('click', processHealthData);
        document.getElementById('generateHealthReportBtn').addEventListener('click', generateHealthReport);
        document.getElementById('generateContextBtn').addEventListener('click', generateMultimodalContext);
        document.getElementById('checkMultimodalStatusBtn').addEventListener('click', checkMultimodalStatus);
        
        // Î¨∏Ìôî Î∞è Ïñ∏Ïñ¥ ÏµúÏ†ÅÌôî Í∏∞Îä• Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
        document.getElementById('saveCulturalPrefsBtn').addEventListener('click', saveCulturalPreferences);
        document.getElementById('loadCulturalPrefsBtn').addEventListener('click', loadCulturalPreferences);
        document.getElementById('generateCulturalResponseBtn').addEventListener('click', generateCulturalResponse);
        document.getElementById('generateGreetingBtn').addEventListener('click', generateCulturalGreeting);
        document.getElementById('generateConversationStarterBtn').addEventListener('click', generateConversationStarter);
        document.getElementById('getCulturalEtiquetteBtn').addEventListener('click', getCulturalEtiquette);
        document.getElementById('applyCulturalContextBtn').addEventListener('click', applyCulturalContext);
        
        // ÌÖîÎ°úÎØ∏Ïñ¥ Í±¥Í∞ï Í∏∞Îä• Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
        document.getElementById('logRoutineBtn').addEventListener('click', logDailyRoutine);
        document.getElementById('getDailySignalsBtn').addEventListener('click', getDailySignals);
        document.getElementById('saveBiomarkersBtn').addEventListener('click', saveBiomarkers);
        document.getElementById('getBiomarkerReportBtn').addEventListener('click', getBiomarkerReport);
        document.getElementById('saveLTLBtn').addEventListener('click', saveLTLResult);
        document.getElementById('getLTLTrendBtn').addEventListener('click', getLTLTrend);
        document.getElementById('generateFeedbackBtn').addEventListener('click', generateHealthFeedback);
        
        // Brain Research Computing Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
        document.getElementById('refreshCapabilitiesBtn').addEventListener('click', updateCapabilitiesDisplay);
        document.getElementById('loadAvailableJobsBtn').addEventListener('click', loadAvailableJobs);
        document.getElementById('refreshJobsBtn').addEventListener('click', loadAvailableJobs);
        document.getElementById('loadContributionBtn').addEventListener('click', loadContributionStats);
        document.getElementById('loadLeaderboardBtn').addEventListener('click', loadLeaderboard);
        document.getElementById('loadResearchStatsBtn').addEventListener('click', loadResearchStats);
        document.getElementById('runSelectedJobBtn').addEventListener('click', runSelectedJob);
            
            // Ï¥àÍ∏∞ Î™®Îç∏ Î™©Î°ù Î°úÎìú
            setTimeout(loadModels, 500);
            
            // Ï¥àÍ∏∞ Î©îÎ™®Î¶¨ ÌÜµÍ≥Ñ Î°úÎìú
            setTimeout(loadMemoryStats, 1000);

            // Í∏∞Î≥∏ Ïñ∏Ïñ¥ Ï†ÅÏö© (ÏòÅÏñ¥) / Apply default language (English)
            applyTranslations('en');
            
            // Brain Research Computing Ï¥àÍ∏∞Ìôî
            setTimeout(initializeBrainComputing, 1500);
        };

        // ===== Brain Research Computing Í∏∞Îä• Ìï®ÏàòÎì§ =====
        
        // Brain Computing Client Ï¥àÍ∏∞Ìôî
        async function initializeBrainComputing() {
            try {
                // BrainComputingClient Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìú
                if (typeof BrainComputingClient === 'undefined') {
                    const script = document.createElement('script');
                    script.src = 'brain_computing_client.js';
                    script.onload = () => {
                        brainComputingClient = new BrainComputingClient();
                        updateCapabilitiesDisplay();
                        console.log('üß† Brain Computing Client initialized');
                    };
                    script.onerror = () => {
                        console.error('üß† Failed to load Brain Computing Client');
                        showStatus('Failed to load Brain Computing Client', 'error');
                    };
                    document.head.appendChild(script);
                } else {
                    brainComputingClient = new BrainComputingClient();
                    updateCapabilitiesDisplay();
                    console.log('üß† Brain Computing Client initialized');
                }
            } catch (error) {
                console.error('üß† Error initializing Brain Computing Client:', error);
                showStatus('Error initializing Brain Computing Client', 'error');
            }
        }

        // ÏÇ¨Ïö©Ïûê Í∏∞Îä• ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateCapabilitiesDisplay() {
            if (!brainComputingClient) return;

            const capabilities = brainComputingClient.userCapabilities;
            
            document.getElementById('gpuSupport').textContent = capabilities.gpu ? 'Supported' : 'Not Supported';
            document.getElementById('gpuSupport').className = `capability-value ${capabilities.gpu ? 'supported' : 'not-supported'}`;
            
            document.getElementById('webgpuSupport').textContent = capabilities.webgpu ? 'Supported' : 'Not Supported';
            document.getElementById('webgpuSupport').className = `capability-value ${capabilities.webgpu ? 'supported' : 'not-supported'}`;
            
            document.getElementById('webassemblySupport').textContent = capabilities.webassembly ? 'Supported' : 'Not Supported';
            document.getElementById('webassemblySupport').className = `capability-value ${capabilities.webassembly ? 'supported' : 'not-supported'}`;
            
            document.getElementById('cpuCores').textContent = capabilities.cores;
            document.getElementById('deviceMemory').textContent = `${capabilities.memory} GB`;
        }

        // ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏûëÏóÖ Î°úÎìú
        async function loadAvailableJobs() {
            const config = getConfig();
            
            try {
                const response = await fetch(`${config.apiUrl}/api/brain-research/jobs?userId=${config.userId}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        capabilities: brainComputingClient ? brainComputingClient.userCapabilities : { gpu: false, webgpu: false, webassembly: true }
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    displayAvailableJobs(data.jobs);
                    showStatus(`Found ${data.count} available jobs`, 'success');
                } else {
                    const errorData = await response.json();
                    showStatus(`Failed to load jobs: ${errorData.error?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                showStatus(`Error loading jobs: ${error.message}`, 'error');
            }
        }

        // ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏûëÏóÖ ÌëúÏãú
        function displayAvailableJobs(jobs) {
            const jobsList = document.getElementById('availableJobsList');
            jobsList.innerHTML = '';
            
            if (jobs.length === 0) {
                jobsList.innerHTML = '<p>No available jobs at the moment.</p>';
                return;
            }

            jobs.forEach(job => {
                const jobElement = document.createElement('div');
                jobElement.className = 'job-item';
                jobElement.onclick = () => selectJob(job);
                
                jobElement.innerHTML = `
                    <div class="job-header">
                        <span class="job-title">${job.name}</span>
                        <span class="job-complexity ${job.complexity}">${job.complexity}</span>
                    </div>
                    <div class="job-description">${job.description}</div>
                    <div class="job-meta">
                        <span>‚è±Ô∏è ~${Math.round(job.estimatedTime / 1000)}s</span>
                        <span>${job.gpuRequired ? 'üéÆ GPU Required' : 'üíª CPU Only'}</span>
                    </div>
                `;
                
                jobsList.appendChild(jobElement);
            });
            
            jobsList.style.display = 'block';
        }

        // ÏûëÏóÖ ÏÑ†ÌÉù
        function selectJob(job) {
            // Ïù¥Ï†Ñ ÏÑ†ÌÉù Ìï¥Ï†ú
            document.querySelectorAll('.job-item').forEach(item => item.classList.remove('selected'));
            
            // ÌòÑÏû¨ ÏûëÏóÖ ÏÑ†ÌÉù
            event.currentTarget.classList.add('selected');
            currentComputingJob = job;
            
            showStatus(`Selected job: ${job.name}`, 'info');
        }

        // ÏÑ†ÌÉùÎêú ÏûëÏóÖ Ïã§Ìñâ
        async function runSelectedJob() {
            if (!currentComputingJob || !brainComputingClient) {
                showStatus('Please select a job first', 'error');
                return;
            }

            if (!brainComputingClient.canHandleJob(currentComputingJob)) {
                showStatus('Your device cannot handle this job type', 'error');
                return;
            }

            try {
                // ÏûëÏóÖ Ìï†Îãπ
                const config = getConfig();
                const assignResponse = await fetch(`${config.apiUrl}/api/brain-research/jobs/${currentComputingJob.id}/assign`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: config.userId,
                        capabilities: brainComputingClient.userCapabilities
                    })
                });

                if (!assignResponse.ok) {
                    throw new Error('Failed to assign job');
                }

                // ÏûëÏóÖ Ïã§Ìñâ
                const result = await brainComputingClient.startComputing(currentComputingJob);
                
                if (result.success) {
                    // Í≤∞Í≥º Ï†úÏ∂ú
                    const submitResponse = await fetch(`${config.apiUrl}/api/brain-research/jobs/${currentComputingJob.id}/submit`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${config.apiKey}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            userId: config.userId,
                            result: result.result,
                            computeTime: result.computeTime
                        })
                    });

                    if (submitResponse.ok) {
                        showStatus(`Job completed successfully! Contribution points earned.`, 'success');
                        currentComputingJob = null;
                        document.querySelectorAll('.job-item').forEach(item => item.classList.remove('selected'));
                    } else {
                        showStatus('Job completed but failed to submit result', 'warning');
                    }
                }
            } catch (error) {
                showStatus(`Error running job: ${error.message}`, 'error');
            }
        }

        // Í∏∞Ïó¨ ÌÜµÍ≥Ñ Î°úÎìú
        async function loadContributionStats() {
            const config = getConfig();
            
            try {
                const response = await fetch(`${config.apiUrl}/api/brain-research/contribution/${config.userId}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    displayContributionStats(data.contribution);
                    showStatus('Contribution stats loaded', 'success');
                } else {
                    const errorData = await response.json();
                    showStatus(`Failed to load stats: ${errorData.error?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                showStatus(`Error loading stats: ${error.message}`, 'error');
            }
        }

        // Í∏∞Ïó¨ ÌÜµÍ≥Ñ ÌëúÏãú
        function displayContributionStats(contribution) {
            const statsDiv = document.getElementById('contributionStats');
            
            statsDiv.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">${contribution.totalJobs}</div>
                        <div class="stat-label">Total Jobs</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${contribution.completedJobs}</div>
                        <div class="stat-label">Completed Jobs</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${contribution.contributionPoints}</div>
                        <div class="stat-label">Contribution Points</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${contribution.rank || 'N/A'}</div>
                        <div class="stat-label">Rank</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${Math.round(contribution.totalComputeTime / 1000)}s</div>
                        <div class="stat-label">Total Compute Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${(contribution.successRate * 100).toFixed(1)}%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                </div>
            `;
            
            statsDiv.style.display = 'block';
        }

        // Î¶¨ÎçîÎ≥¥Îìú Î°úÎìú
        async function loadLeaderboard() {
            const config = getConfig();
            
            try {
                const response = await fetch(`${config.apiUrl}/api/brain-research/leaderboard?limit=10`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    displayLeaderboard(data.leaderboard);
                    showStatus('Leaderboard loaded', 'success');
                } else {
                    const errorData = await response.json();
                    showStatus(`Failed to load leaderboard: ${errorData.error?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                showStatus(`Error loading leaderboard: ${error.message}`, 'error');
            }
        }

        // Î¶¨ÎçîÎ≥¥Îìú ÌëúÏãú
        function displayLeaderboard(leaderboard) {
            const statsDiv = document.getElementById('contributionStats');
            
            let leaderboardHTML = '<h4>üèÜ Top Contributors</h4>';
            leaderboard.forEach((user, index) => {
                const rankClass = index < 3 ? ['gold', 'silver', 'bronze'][index] : '';
                const rankSymbol = index < 3 ? ['ü•á', 'ü•à', 'ü•â'][index] : `${index + 1}.`;
                
                leaderboardHTML += `
                    <div class="leaderboard-item">
                        <span class="rank ${rankClass}">${rankSymbol}</span>
                        <div class="user-info">
                            <div class="username">${user.username}</div>
                            <div class="points">${user.contributionPoints} points ‚Ä¢ ${user.completedJobs} jobs</div>
                        </div>
                    </div>
                `;
            });
            
            statsDiv.innerHTML = leaderboardHTML;
            statsDiv.style.display = 'block';
        }

        // Ïó∞Íµ¨ ÌÜµÍ≥Ñ Î°úÎìú
        async function loadResearchStats() {
            const config = getConfig();
            
            try {
                const response = await fetch(`${config.apiUrl}/api/brain-research/statistics`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    displayResearchStats(data.statistics);
                    showStatus('Research stats loaded', 'success');
                } else {
                    const errorData = await response.json();
                    showStatus(`Failed to load research stats: ${errorData.error?.message || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                showStatus(`Error loading research stats: ${error.message}`, 'error');
            }
        }

        // Ïó∞Íµ¨ ÌÜµÍ≥Ñ ÌëúÏãú
        function displayResearchStats(stats) {
            const statsDiv = document.getElementById('researchStats');
            
            statsDiv.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">${stats.totalJobs}</div>
                        <div class="stat-label">Total Jobs</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${stats.totalContributors}</div>
                        <div class="stat-label">Total Contributors</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${Math.round(stats.totalComputeTime / 1000 / 60)}m</div>
                        <div class="stat-label">Total Compute Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${(parseFloat(stats.averageVerificationRate) * 100).toFixed(1)}%</div>
                        <div class="stat-label">Verification Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${stats.activeJobs}</div>
                        <div class="stat-label">Active Jobs</div>
                    </div>
                </div>
                <h4>Recent Completions</h4>
                <div class="recent-completions">
                    ${stats.recentCompletions.map(job => `
                        <div class="job-item">
                            <div class="job-header">
                                <span class="job-title">${job.type}</span>
                                <span class="job-complexity">${(job.verificationRate * 100).toFixed(1)}% verified</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            statsDiv.style.display = 'block';
        }

        // ===== ÌÖîÎ°úÎØ∏Ïñ¥ Í±¥Í∞ï Í∏∞Îä• Ìï®ÏàòÎì§ =====
        
        // ÏùºÏÉÅ Î£®Ìã¥ Í∏∞Î°ù
        async function logDailyRoutine() {
            const config = getConfig();
            const routine = {
                sleepHours: parseFloat(document.getElementById('sleepHours').value) || 0,
                sleepQuality: parseInt(document.getElementById('sleepQuality').value) || 0,
                steps: parseInt(document.getElementById('dailySteps').value) || 0,
                activityMinutes: parseInt(document.getElementById('activityMinutes').value) || 0,
                hiitSessions: parseInt(document.getElementById('hiitSessions').value) || 0,
                strengthSessions: parseInt(document.getElementById('strengthSessions').value) || 0,
                dietScore: parseInt(document.getElementById('dietScore').value) || 0,
                omega3Intake: parseFloat(document.getElementById('omega3Intake').value) || 0,
                stressLevel: parseInt(document.getElementById('stressLevel').value) || 50,
                mindfulnessMinutes: parseInt(document.getElementById('mindfulnessMinutes').value) || 0
            };

            try {
                const response = await fetch(`${config.apiUrl}/api/telomere/${config.userId}/routine`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(routine)
                });

                if (response.ok) {
                    const result = await response.json();
                    addMessage('system', '‚úÖ Daily routine logged successfully!');
                    showStatus('Daily routine logged successfully!', 'success');
                } else {
                    const errorData = await response.json();
                    addMessage('system', `‚ùå Failed to log routine: ${errorData.error?.message || 'Unknown error'}`);
                }
            } catch (error) {
                addMessage('system', `‚ùå Error logging routine: ${error.message}`);
            }
        }

        // ÏùºÏùº ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº Ïã†Ìò∏ Ï°∞Ìöå
        async function getDailySignals() {
            const config = getConfig();
            const dateInput = document.getElementById('dateInput')?.value || new Date().toISOString().split('T')[0];

            try {
                const response = await fetch(`${config.apiUrl}/api/telomere/${config.userId}/signals?date=${dateInput}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const signals = await response.json();
                    addMessage('system', `üìä Daily Health Signals for ${dateInput}:`);
                    addMessage('system', `Sleep Score: ${signals.signals.sleepScore}/100`);
                    addMessage('system', `Activity Score: ${signals.signals.activityScore}/100`);
                    addMessage('system', `Diet Score: ${signals.signals.dietScore}/100`);
                    addMessage('system', `Inflammation Risk: ${signals.signals.inflammationRisk}/100`);
                    addMessage('system', `Telomere Lifestyle Score: ${signals.signals.telomereLifestyleScore}/100`);
                } else {
                    const errorData = await response.json();
                    addMessage('system', `‚ùå Failed to get signals: ${errorData.error?.message || 'Unknown error'}`);
                }
            } catch (error) {
                addMessage('system', `‚ùå Error getting signals: ${error.message}`);
            }
        }

        // Î∞îÏù¥Ïò§ÎßàÏª§ Ï†ÄÏû•
        async function saveBiomarkers() {
            const config = getConfig();
            const biomarkers = {
                hsCRP: parseFloat(document.getElementById('hsCRP').value) || null,
                fastingGlucose: parseInt(document.getElementById('fastingGlucose').value) || null,
                hba1c: parseFloat(document.getElementById('hba1c').value) || null,
                omega3Index: parseFloat(document.getElementById('omega3Index').value) || null
            };

            try {
                const response = await fetch(`${config.apiUrl}/api/telomere/${config.userId}/biomarkers`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(biomarkers)
                });

                if (response.ok) {
                    const result = await response.json();
                    addMessage('system', '‚úÖ Biomarkers saved successfully!');
                    showStatus('Biomarkers saved successfully!', 'success');
                } else {
                    const errorData = await response.json();
                    addMessage('system', `‚ùå Failed to save biomarkers: ${errorData.error?.message || 'Unknown error'}`);
                }
            } catch (error) {
                addMessage('system', `‚ùå Error saving biomarkers: ${error.message}`);
            }
        }

        // Î∞îÏù¥Ïò§ÎßàÏª§ Î¶¨Ìè¨Ìä∏ Ï°∞Ìöå
        async function getBiomarkerReport() {
            const config = getConfig();
            const range = 'quarter'; // Í∏∞Î≥∏Í∞í

            try {
                const response = await fetch(`${config.apiUrl}/api/telomere/${config.userId}/biomarkers/report?range=${range}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const report = await response.json();
                    addMessage('system', `üìä ${range.charAt(0).toUpperCase() + range.slice(1)} Biomarker Report:`);
                    addMessage('system', `hs-CRP: ${report.averages.hsCRP || 'N/A'} mg/L (${report.grades.hsCRP})`);
                    addMessage('system', `Fasting Glucose: ${report.averages.fastingGlucose || 'N/A'} mg/dL (${report.grades.fastingGlucose})`);
                    addMessage('system', `HbA1c: ${report.averages.hba1c || 'N/A'}% (${report.grades.hba1c})`);
                    addMessage('system', `Omega-3 Index: ${report.averages.omega3Index || 'N/A'}% (${report.grades.omega3Index})`);
                } else {
                    const errorData = await response.json();
                    addMessage('system', `‚ùå Failed to get report: ${errorData.error?.message || 'Unknown error'}`);
                }
            } catch (error) {
                addMessage('system', `‚ùå Error getting report: ${error.message}`);
            }
        }

        // LTL Í≤∞Í≥º Ï†ÄÏû•
        async function saveLTLResult() {
            const config = getConfig();
            const ltlData = {
                ltl: parseFloat(document.getElementById('ltlValue').value) || null,
                units: document.getElementById('ltlUnits').value,
                method: document.getElementById('ltlMethod').value
            };

            try {
                const response = await fetch(`${config.apiUrl}/api/telomere/${config.userId}/ltl`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(ltlData)
                });

                if (response.ok) {
                    const result = await response.json();
                    addMessage('system', '‚úÖ LTL result saved successfully!');
                    showStatus('LTL result saved successfully!', 'success');
                } else {
                    const errorData = await response.json();
                    addMessage('system', `‚ùå Failed to save LTL: ${errorData.error?.message || 'Unknown error'}`);
                }
            } catch (error) {
                addMessage('system', `‚ùå Error saving LTL: ${error.message}`);
            }
        }

        // LTL Ï∂îÏÑ∏ Ï°∞Ìöå
        async function getLTLTrend() {
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/telomere/${config.userId}/ltl/trend`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const trend = await response.json();
                    if (trend.hasData) {
                        addMessage('system', `üìà Telomere Trend: ${trend.interpretation}`);
                        addMessage('system', `Baseline: ${trend.baseline.ltl} ${trend.baseline.units}`);
                        addMessage('system', `Current: ${trend.current.ltl} ${trend.current.units}`);
                        if (trend.changePercent !== null) {
                            addMessage('system', `Change: ${trend.changePercent > 0 ? '+' : ''}${trend.changePercent}%`);
                        }
                    } else {
                        addMessage('system', `‚ÑπÔ∏è ${trend.message}`);
                    }
                } else {
                    const errorData = await response.json();
                    addMessage('system', `‚ùå Failed to get trend: ${errorData.error?.message || 'Unknown error'}`);
                }
            } catch (error) {
                addMessage('system', `‚ùå Error getting trend: ${error.message}`);
            }
        }

        // Í±¥Í∞ï ÌîºÎìúÎ∞± ÏÉùÏÑ±
        async function generateHealthFeedback() {
            const config = getConfig();

            try {
                const response = await fetch(`${config.apiUrl}/api/telomere/${config.userId}/feedback`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${config.apiKey}`
                    }
                });

                if (response.ok) {
                    const feedback = await response.json();
                    addMessage('system', 'üß¨ Health Feedback Generated:');
                    
                    // ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº Ïã†Ìò∏
                    addMessage('system', `üìä Lifestyle Scores:`);
                    addMessage('system', `Sleep: ${feedback.lifestyleSignals.sleepScore}/100`);
                    addMessage('system', `Activity: ${feedback.lifestyleSignals.activityScore}/100`);
                    addMessage('system', `Diet: ${feedback.lifestyleSignals.dietScore}/100`);
                    addMessage('system', `Inflammation Risk: ${feedback.lifestyleSignals.inflammationRisk}/100`);
                    addMessage('system', `Overall: ${feedback.lifestyleSignals.telomereLifestyleScore}/100`);
                    
                    // Í∂åÏû•ÏÇ¨Ìï≠
                    if (feedback.recommendations && feedback.recommendations.length > 0) {
                        addMessage('system', 'üí° Recommendations:');
                        feedback.recommendations.forEach(rec => {
                            addMessage('system', `‚Ä¢ ${rec}`);
                        });
                    }
                    
                    // ÌîºÎìúÎ∞± ÌëúÏãú ÏòÅÏó≠ ÏóÖÎç∞Ïù¥Ìä∏
                    const feedbackDisplay = document.getElementById('feedbackDisplay');
                    const feedbackContent = document.getElementById('feedbackContent');
                    if (feedbackDisplay && feedbackContent) {
                        feedbackContent.innerHTML = `
                            <p><strong>Lifestyle Score:</strong> ${feedback.lifestyleSignals.telomereLifestyleScore}/100</p>
                            <p><strong>Recommendations:</strong></p>
                            <ul>${feedback.recommendations.map(rec => `<li>${rec}</li>`).join('')}</ul>
                        `;
                        feedbackDisplay.style.display = 'block';
                    }
                } else {
                    const errorData = await response.json();
                    addMessage('system', `‚ùå Failed to generate feedback: ${errorData.error?.message || 'Unknown error'}`);
                }
            } catch (error) {
                addMessage('system', `‚ùå Error generating feedback: ${error.message}`);
            }
        }
    </script>
</body>
</html> 